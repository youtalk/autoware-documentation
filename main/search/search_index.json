{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":""},{"location":"#autoware-documentation","title":"Autoware Documentation","text":""},{"location":"#about-autoware","title":"About Autoware","text":"<p>Autoware is the world\u2019s leading open-source software project for autonomous driving. Autoware is built on Robot Operating System (ROS) and enables commercial deployment of autonomous driving in a broad range of vehicles and applications.</p> <p>Please see here for more details.</p>"},{"location":"#related-documentations","title":"Related Documentations","text":"<p>This Autoware Documentation is for Autoware's general information.</p> <p>For detailed documents of Autoware Universe components, see Autoware Universe Documentation.</p>"},{"location":"#getting-started","title":"Getting started","text":"<ul> <li>Installation pages explain the installation steps of Autoware and related tools.</li> <li>Tutorials pages explain several tutorials that you should try after installation.</li> <li>How-to guides pages explain advanced topics that you should read after you get used to Autoware.</li> <li>Design pages explain the design concept of Autoware.</li> <li>Contributing pages explain how to contribute to Autoware.</li> <li>Datasets pages contain information about datasets that can be used with Autoware.</li> <li>Support pages explain several support resources.</li> <li>Competitions pages explain on-going challenges related to AWF</li> </ul>"},{"location":"autoware-competitions/","title":"Autoware Competitions","text":""},{"location":"autoware-competitions/#autoware-competitions","title":"Autoware Competitions","text":"<p>This page is a collection of the links to the competitions that are related to the Autoware Foundation.</p> Title Status Description Ongoing Autoware / TIER IV Challenge 2023 Date: May 15, 2023 - Nov. 1st, 2023  As one of the main contributors of Autoware, TIER IV has been facing many difficult challenges through development, and TIER IV would like to sponsor a challenge to solve such engineering challenges. Any researchers, students, individuals or organizations are welcome to participate and submit their solution to any of the challenges we propose. Ongoing Japan Automotive AI Challenge 2023 Registration: June 5, 2023 - July 14, 2023 Qualifiers: July 3, 2023 - Aug. 31, 2023 Finals: Nov. 12, 2023 In this competition, we focus on challenging tasks posed by autonomous driving in factory environments and aim to develop Autoware-based AD software that can overcome them. The qualifiers use the digital twin autonomous driving simulator AWSIM to complete specific tasks within a virtual environment. Teams that make it to the finals have the opportunity to run their software on actual vehicles in a test course in Japan."},{"location":"autoware-competitions/#proposing-new-competition","title":"Proposing New Competition","text":"<p>If you want add a new competition to this page, please propose it in a TSC meeting and get confirmation from the AWF.</p>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#contributing","title":"Contributing","text":"<p>Thank you for your interest in contributing! Autoware is supported by people like you, and all types and sizes of contribution are welcome.</p> <p>As a contributor, here are the guidelines that we would like you to follow for Autoware and its associated repositories.</p> <ul> <li>Code of Conduct</li> <li>What should I know before I get started?<ul> <li>Autoware concepts</li> <li>Contributing to open source projects</li> </ul> </li> <li>How can I get help?</li> <li>How can I contribute?<ul> <li>Participate in discussions</li> <li>Join a working group</li> <li>Report bugs</li> <li>Make a pull request</li> </ul> </li> </ul> <p>Like Autoware itself, these guidelines are being actively developed and suggestions for improvement are always welcome! Guideline changes can be proposed by creating a discussion in the Ideas category.</p>"},{"location":"contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>To ensure the Autoware community stays open and inclusive, please follow the Code of Conduct.</p> <p>If you believe that someone in the community has violated the Code of Conduct, please make a report by emailing conduct@autoware.org.</p>"},{"location":"contributing/#what-should-i-know-before-i-get-started","title":"What should I know before I get started?","text":""},{"location":"contributing/#autoware-concepts","title":"Autoware concepts","text":"<p>To gain a high-level understanding of Autoware's architecture and design, the following pages provide a brief overview:</p> <ul> <li>Autoware architecture</li> <li>Autoware concepts</li> </ul> <p>For experienced developers, the Autoware interfaces and individual component pages should also be reviewed to understand the inputs and outputs for each component or module at a more detailed level.</p>"},{"location":"contributing/#contributing-to-open-source-projects","title":"Contributing to open source projects","text":"<p>If you are new to open source projects, we recommend reading GitHub's How to Contribute to Open Source guide for an overview of why people contribute to open source projects, what it means to contribute and much more besides.</p>"},{"location":"contributing/#how-can-i-get-help","title":"How can I get help?","text":"<p>Do not open issues for general support questions as we want to keep GitHub issues for confirmed bug reports. Instead, open a discussion in the Q&amp;A category. For more details on the support mechanisms for Autoware, refer to the Support guidelines.</p> <p>Note</p> <p>Issues created for questions or unconfirmed bugs will be moved to GitHub discussions by the maintainers.</p>"},{"location":"contributing/#how-can-i-contribute","title":"How can I contribute?","text":""},{"location":"contributing/#discussions","title":"Discussions","text":"<p>You can contribute to Autoware by facilitating and participating in discussions, such as:</p> <ul> <li>Proposing a new feature to enhance Autoware</li> <li>Joining an existing discussion and expressing your opinion</li> <li>Organizing discussions for other contributors</li> <li>Answering questions and supporting other contributors</li> </ul>"},{"location":"contributing/#working-groups","title":"Working groups","text":"<p>The various working groups within the Autoware Foundation are responsible for accomplishing goals set by the Technical Steering Committee. These working groups are open to everyone, and joining a particular working group will allow you to gain an understanding of current projects, see how those projects are managed within each group and to contribute to issues that will help progress a particular project.</p> <p>To see the schedule for upcoming working group meetings, refer to the Autoware Foundation events calendar.</p>"},{"location":"contributing/#bug-reports","title":"Bug reports","text":"<p>Before you report a bug, please search the issue tracker for the appropriate repository. It is possible that someone has already reported the same issue and that workarounds exist. If you can't determine the appropriate repository, ask the maintainers for help by creating a new discussion in the Q&amp;A category.</p> <p>When reporting a bug, you should provide a minimal set of instructions to reproduce the issue. Doing so allows us to quickly confirm and focus on the right problem.</p> <p>If you want to fix the bug by yourself that will be appreciated, but you should discuss possible approaches with the maintainers in the issue before submitting a pull request.</p> <p>Creating an issue is straightforward, but if you happen to experience any problems then create a Q&amp;A discussion to ask for help.</p>"},{"location":"contributing/#pull-requests","title":"Pull requests","text":"<p>You can submit pull requests for small changes such as:</p> <ul> <li>Minor documentation updates</li> <li>Fixing spelling mistakes</li> <li>Fixing CI failures</li> <li>Fixing warnings detected by compilers or analysis tools</li> <li>Making small changes to a single package</li> </ul> <p>If your pull request is a large change, the following process should be followed:</p> <ol> <li> <p>Create a GitHub Discussion to propose the change. Doing so allows you to get feedback from other members and the Autoware maintainers and to ensure that the proposed change is in line with Autoware's design philosophy and current development plans. If you're not sure where to have that conversation, then create a new Q&amp;A discussion.</p> </li> <li> <p>Create an issue following consensus in the discussions</p> </li> <li> <p>Create a pull request to implement the changes that references the Issue created in step 2</p> </li> <li> <p>Create documentation for the new addition (if relevant)</p> </li> </ol> <p>Examples of large changes include:</p> <ul> <li>Adding a new feature to Autoware</li> <li>Adding a new documentation page or section</li> </ul> <p>For more information on how to submit a good pull request, have a read of the pull request guidelines and don't forget to review the required license notations!</p>"},{"location":"contributing/license/","title":"License","text":""},{"location":"contributing/license/#license","title":"License","text":"<p>Autoware is licensed under Apache License 2.0. Thus all contributions will be licensed as such as per clause 5 of the Apache License 2.0:</p> <pre><code>5. Submission of Contributions. Unless You explicitly state otherwise,\n   any Contribution intentionally submitted for inclusion in the Work\n   by You to the Licensor shall be under the terms and conditions of\n   this License, without any additional terms or conditions.\n   Notwithstanding the above, nothing herein shall supersede or modify\n   the terms of any separate license agreement you may have executed\n   with Licensor regarding such Contributions.\n</code></pre> <p>Here is an example copyright header to add to the top of a new file:</p> <pre><code>Copyright [first year of contribution] The Autoware Contributors\nSPDX-License-Identifier: Apache-2.0\n</code></pre> <p>We don't write copyright notations of each contributor here. Instead, we place them in the <code>NOTICE</code> file like the following.</p> <pre><code>This product includes code developed by [company name].\nCopyright [first year of contribution] [company name]\n</code></pre> <p>Let us know if your legal department has a special request for the copyright notation.</p> <p>Currently, the old formats explained here are also acceptable. Those old formats can be replaced by this new format if the original authors agree. Note that we won't write their copyrights to the <code>NOTICE</code> file unless they agree with the new format.</p> <p>References:</p> <ul> <li>https://opensource.google/docs/copyright/#the-year</li> <li>https://www.linuxfoundation.org/blog/copyright-notices-in-open-source-software-projects/</li> <li>https://www.apache.org/licenses/LICENSE-2.0</li> <li>https://www.apache.org/legal/src-headers.html</li> <li>https://www.apache.org/foundation/license-faq.html</li> <li>https://infra.apache.org/licensing-howto.html</li> </ul>"},{"location":"contributing/coding-guidelines/","title":"Coding guidelines","text":""},{"location":"contributing/coding-guidelines/#coding-guidelines","title":"Coding guidelines","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"contributing/coding-guidelines/#common-guidelines","title":"Common guidelines","text":"<p>Refer to the following links for now:</p> <ul> <li>https://docs.ros.org/en/humble/Contributing/Developer-Guide.html</li> </ul> <p>Also, keep in mind the following concepts.</p> <ul> <li>Keep things consistent.</li> <li>Automate where possible, using simple checks for formatting, syntax, etc.</li> <li>When it comes to code reviews, don't spend too much time on trivial disagreements. For details see:<ul> <li>https://en.wikipedia.org/wiki/Law_of_triviality</li> <li>https://steemit.com/programming/@emrebeyler/code-reviews-and-parkinson-s-law-of-triviality</li> </ul> </li> </ul>"},{"location":"contributing/coding-guidelines/languages/cmake/","title":"CMake","text":""},{"location":"contributing/coding-guidelines/languages/cmake/#cmake","title":"CMake","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://docs.ros.org/en/humble/Contributing/Code-Style-Language-Versions.html#cmake</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cmake/#use-the-autoware_package-macro","title":"Use the autoware_package macro","text":"<p>To reduce duplications in CMakeLists.txt, there is the <code>autoware_package()</code> macro. See the README and use it in your package.</p>"},{"location":"contributing/coding-guidelines/languages/cpp/","title":"C++","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#c","title":"C++","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"contributing/coding-guidelines/languages/cpp/#references","title":"References","text":"<p>Follow the guidelines below if a rule is not defined on this page.</p> <ol> <li>https://docs.ros.org/en/humble/Contributing/Code-Style-Language-Versions.html</li> <li>https://www.autosar.org/fileadmin/standards/adaptive/22-11/AUTOSAR_RS_CPP14Guidelines.pdf</li> <li>https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines</li> </ol> <p>Also, it is encouraged to apply Clang-Tidy to each file. For the usage, see Applying Clang-Tidy to ROS packages.</p> <p>Note that not all rules are covered by Clang-Tidy.</p>"},{"location":"contributing/coding-guidelines/languages/cpp/#style-rules","title":"Style rules","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#include-header-files-in-the-defined-order-required-partially-automated","title":"Include header files in the defined order (required, partially automated)","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#rationale","title":"Rationale","text":"<ul> <li>Due to indirect dependencies, the include system of C++ makes different behaviors if the header order is different.</li> <li>To reduce unintended bugs, local header files should come first.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#reference","title":"Reference","text":"<ul> <li>https://llvm.org/docs/CodingStandards.html#include-style</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#example","title":"Example","text":"<p>Include the headers in the following order:</p> <ul> <li>Main module header</li> <li>Local package headers</li> <li>Other package headers</li> <li>Message headers</li> <li>Boost headers</li> <li>C system headers</li> <li>C++ system headers</li> </ul> <pre><code>// Compliant\n#include \"my_header.hpp\"\n\n#include \"my_package/foo.hpp\"\n\n#include &lt;package1/foo.hpp&gt;\n#include &lt;package2/bar.hpp&gt;\n\n#include &lt;std_msgs/msg/header.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n</code></pre> <p>If you use <code>\"\"</code> and <code>&lt;&gt;</code> properly, <code>ClangFormat</code> in <code>pre-commit</code> sorts headers automatically.</p> <p>Do not define macros between <code>#include</code> lines because it prevents automatic sorting.</p> <pre><code>// Non-compliant\n#include &lt;package1/foo.hpp&gt;\n#include &lt;package2/bar.hpp&gt;\n\n#define EIGEN_MPL2_ONLY\n#include \"my_header.hpp\"\n#include \"my_package/foo.hpp\"\n\n#include &lt;Eigen/Core&gt;\n\n#include &lt;std_msgs/msg/header.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n</code></pre> <p>Instead, define macros before <code>#include</code> lines.</p> <pre><code>// Compliant\n#define EIGEN_MPL2_ONLY\n\n#include \"my_header.hpp\"\n\n#include \"my_package/foo.hpp\"\n\n#include &lt;Eigen/Core&gt;\n#include &lt;package1/foo.hpp&gt;\n#include &lt;package2/bar.hpp&gt;\n\n#include &lt;std_msgs/msg/header.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n</code></pre> <p>If there are any reasons for defining macros at a specific position, write a comment before the macro.</p> <pre><code>// Compliant\n#include \"my_header.hpp\"\n\n#include \"my_package/foo.hpp\"\n\n#include &lt;package1/foo.hpp&gt;\n#include &lt;package2/bar.hpp&gt;\n\n#include &lt;std_msgs/msg/header.hpp&gt;\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n// For the foo bar reason, the FOO_MACRO must be defined here.\n#define FOO_MACRO\n#include &lt;foo/bar.hpp&gt;\n</code></pre>"},{"location":"contributing/coding-guidelines/languages/cpp/#use-lower-snake-case-for-function-names-required-partially-automated","title":"Use lower snake case for function names (required, partially automated)","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#rationale_1","title":"Rationale","text":"<ul> <li>It is consistent with the C++ standard library.</li> <li>It is consistent with other programming languages such as Python and Rust.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#exception","title":"Exception","text":"<ul> <li>For member functions of classes inherited from external project classes such as Qt, follow that naming convention.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#reference_1","title":"Reference","text":"<ul> <li>https://docs.ros.org/en/humble/The-ROS2-Project/Contributing/Code-Style-Language-Versions.html#function-and-method-naming</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#example_1","title":"Example","text":"<pre><code>void function_name()\n{\n}\n</code></pre>"},{"location":"contributing/coding-guidelines/languages/cpp/#use-upper-camel-case-for-enum-names-required-partially-automated","title":"Use upper camel case for enum names (required, partially automated)","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#rationale_2","title":"Rationale","text":"<ul> <li>It is consistent with ROS 2 core packages.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#exception_1","title":"Exception","text":"<ul> <li>Enums defined in the <code>rosidl</code> file can use other naming conventions.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#reference_2","title":"Reference","text":"<ul> <li>http://wiki.ros.org/CppStyleGuide (Refer to \"15. Enumerations\")</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#example_2","title":"Example","text":"<pre><code>enum class Color\n{\nRed, Green, Blue\n}\n</code></pre>"},{"location":"contributing/coding-guidelines/languages/cpp/#use-lower-snake-case-for-constant-names-required-partially-automated","title":"Use lower snake case for constant names (required, partially automated)","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#rationale_3","title":"Rationale","text":"<ul> <li>It is consistent with ROS 2 core packages.</li> <li>It is consistent with <code>std::numbers</code>.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#exception_2","title":"Exception","text":"<ul> <li>Constants defined in the <code>rosidl</code> file can use other naming conventions.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#reference_3","title":"Reference","text":"<ul> <li>https://en.cppreference.com/w/cpp/numeric/constants</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#example_3","title":"Example","text":"<pre><code>constexpr double gravity = 9.80665;\n</code></pre>"},{"location":"contributing/coding-guidelines/languages/cpp/#count-acronyms-and-contractions-of-compound-words-as-one-word-required-partially-automated","title":"Count acronyms and contractions of compound words as one word (required, partially automated)","text":""},{"location":"contributing/coding-guidelines/languages/cpp/#rationale_4","title":"Rationale","text":"<ul> <li>To clarify the boundaries of words when acronyms are consecutive.</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#reference_4","title":"Reference","text":"<ul> <li>https://rust-lang.github.io/api-guidelines/naming.html#casing-conforms-to-rfc-430-c-case</li> </ul>"},{"location":"contributing/coding-guidelines/languages/cpp/#example_4","title":"Example","text":"<pre><code>class RosApi;\nRosApi ros_api;\n</code></pre>"},{"location":"contributing/coding-guidelines/languages/docker/","title":"Docker","text":""},{"location":"contributing/coding-guidelines/languages/docker/#docker","title":"Docker","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://github.com/hadolint/hadolint</li> </ul>"},{"location":"contributing/coding-guidelines/languages/github-actions/","title":"GitHub Actions","text":""},{"location":"contributing/coding-guidelines/languages/github-actions/#github-actions","title":"GitHub Actions","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://docs.github.com/en/actions/guides</li> </ul>"},{"location":"contributing/coding-guidelines/languages/markdown/","title":"Markdown","text":""},{"location":"contributing/coding-guidelines/languages/markdown/#markdown","title":"Markdown","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://docs.ros.org/en/foxy/Contributing/Code-Style-Language-Versions.html#markdown-restructured-text-docblocks</li> <li>https://github.com/DavidAnson/markdownlint</li> </ul>"},{"location":"contributing/coding-guidelines/languages/package-xml/","title":"package.xml","text":""},{"location":"contributing/coding-guidelines/languages/package-xml/#packagexml","title":"package.xml","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://ros.org/reps/rep-0149.html</li> <li>https://github.com/tier4/pre-commit-hooks-ros#prettier-package-xml</li> </ul>"},{"location":"contributing/coding-guidelines/languages/python/","title":"Python","text":""},{"location":"contributing/coding-guidelines/languages/python/#python","title":"Python","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://docs.ros.org/en/foxy/Contributing/Code-Style-Language-Versions.html#python</li> <li>https://github.com/psf/black</li> <li>https://github.com/PyCQA/isort</li> </ul>"},{"location":"contributing/coding-guidelines/languages/shell-scripts/","title":"Shell scripts","text":""},{"location":"contributing/coding-guidelines/languages/shell-scripts/#shell-scripts","title":"Shell scripts","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://google.github.io/styleguide/shellguide.html</li> <li>https://github.com/koalaman/shellcheck</li> <li>https://github.com/mvdan/sh</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/class-design/","title":"Class design","text":""},{"location":"contributing/coding-guidelines/ros-nodes/class-design/#class-design","title":"Class design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/","title":"Console logging","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#console-logging","title":"Console logging","text":"<p>ROS 2 logging is a powerful tool for understanding and debugging ROS nodes.</p> <p>This page focuses on how to design console logging in Autoware and shows several practical examples. To comprehensively understand how ROS 2 logging works, refer to the logging documentation.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#logging-use-cases-in-autoware","title":"Logging use cases in Autoware","text":"<ul> <li>Developers debug code by seeing the console logs.</li> <li>Vehicle operators take appropriate risk-avoiding actions depending on the console logs.</li> <li>Log analysts analyze the console logs that are recorded in rosbag files.</li> </ul> <p>To efficiently support these use cases, clean and highly visible logs are required. For that, several rules are defined below.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#rules","title":"Rules","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#choose-appropriate-severity-levels-required-non-automated","title":"Choose appropriate severity levels (required, non-automated)","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#rationale","title":"Rationale","text":"<p>It's confusing if severity levels are inappropriate as follows:</p> <ul> <li>Useless messages are marked as <code>FATAL</code>.</li> <li>Very important error messages are marked as <code>INFO</code>.</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#example","title":"Example","text":"<p>Use the following criteria as a reference:</p> <ul> <li>DEBUG: Use this level to show debug information for developers. Note that logs with this level is hidden by default.</li> <li>INFO: Use this level to notify events (cyclic notifications during initialization, state changes, service responses, etc.) to operators.</li> <li>WARN: Use this level when a node can continue working correctly, but unintended behaviors might happen.<ul> <li>For example, \"path optimization failed but the previous data can be used\", \"the localization score is low\", etc.</li> </ul> </li> <li>ERROR: Use this level when a node can't continue working correctly, and unintended behaviors would happen.<ul> <li>For example, \"path optimization failed and the path is empty\", \"the vehicle will trigger an emergency stop\", etc.</li> </ul> </li> <li>FATAL: Use this level when the entire system can't continue working correctly, and the system must be stopped.<ul> <li>For example, \"the vehicle control ECU doesn't respond\", \"the system storage crashed\", etc.</li> </ul> </li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#filter-out-unnecessary-logs-by-setting-logging-options-required-non-automated","title":"Filter out unnecessary logs by setting logging options (required, non-automated)","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#rationale_1","title":"Rationale","text":"<p>Some third-party nodes such as drivers may not follow the Autoware's guidelines. If the logs are noisy, unnecessary logs should be filtered out.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#example_1","title":"Example","text":"<p>Use the <code>--log-level {level}</code> option to change the minimum level of logs to be displayed:</p> <pre><code>&lt;launch&gt;\n&lt;!-- This outputs only FATAL level logs. --&gt;\n&lt;node pkg=\"demo_nodes_cpp\" exec=\"talker\" ros_args=\"--log-level fatal\" /&gt;\n&lt;/launch&gt;\n</code></pre> <p>If you want to disable only specific output targets, use the <code>--disable-stdout-logs</code>, <code>--disable-rosout-logs</code>, and/or <code>--disable-external-lib-logs</code> options:</p> <pre><code>&lt;launch&gt;\n&lt;!-- This outputs to rosout and disk. --&gt;\n&lt;node pkg=\"demo_nodes_cpp\" exec=\"talker\" ros_args=\"--disable-stdout-logs\" /&gt;\n&lt;/launch&gt;\n</code></pre> <pre><code>&lt;launch&gt;\n&lt;!-- This outputs to stdout. --&gt;\n&lt;node pkg=\"demo_nodes_cpp\" exec=\"talker\" ros_args=\"--disable-rosout-logs --disable-external-lib-logs\" /&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#use-throttled-logging-when-the-log-is-unnecessarily-shown-repeatedly-required-non-automated","title":"Use throttled logging when the log is unnecessarily shown repeatedly (required, non-automated)","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#rationale_2","title":"Rationale","text":"<p>If tons of logs are shown on the console, people miss important message.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#example_2","title":"Example","text":"<p>While waiting for some messages, throttled logs are usually enough. In such cases, wait about 5 seconds as a reference value.</p> <pre><code>// Compliant\nvoid FooNode::on_timer() {\nif (!current_pose_) {\nRCLCPP_ERROR_THROTTLE(get_logger(), *get_clock(), 5000, \"Waiting for current_pose_.\");\nreturn;\n}\n}\n\n// Non-compliant\nvoid FooNode::on_timer() {\nif (!current_pose_) {\nRCLCPP_ERROR(get_logger(), \"Waiting for current_pose_.\");\nreturn;\n}\n}\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#exception","title":"Exception","text":"<p>The following cases are acceptable even if it's not throttled.</p> <ul> <li>The message is really worth displaying every time.</li> <li>The message level is DEBUG.</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#do-not-depend-on-rclcppnode-in-core-library-classes-but-depend-only-on-rclcpplogginghpp-advisory-non-automated","title":"Do not depend on rclcpp::Node in core library classes but depend only on rclcpp/logging.hpp (advisory, non-automated)","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#rationale_3","title":"Rationale","text":"<p>Core library classes, which contain reusable algorithms, may also be used for non-ROS platforms. When porting libraries to other platforms, fewer dependencies are preferred.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#example_3","title":"Example","text":"<pre><code>// Compliant\n#include &lt;rclcpp/logging.hpp&gt;\n\nclass FooCore {\npublic:\nexplicit FooCore(const rclcpp::Logger &amp; logger) : logger_(logger) {}\n\nvoid process() {\nRCLCPP_INFO(logger_, \"message\");\n}\n\nprivate:\nrclcpp::Logger logger_;\n};\n\n// Compliant\n// Note that logs aren't published to `/rosout` if the logger name is different from the node name.\n#include &lt;rclcpp/logging.hpp&gt;\n\nclass FooCore {\nvoid process() {\nRCLCPP_INFO(rclcpp::get_logger(\"foo_core_logger\"), \"message\");\n}\n};\n\n\n// Non-compliant\n#include &lt;rclcpp/node.hpp&gt;\n\nclass FooCore {\npublic:\nexplicit FooCore(const rclcpp::NodeOptions &amp; node_options) : node_(\"foo_core_node\", node_options) {}\n\nvoid process() {\nRCLCPP_INFO(node_.get_logger(), \"message\");\n}\n\nprivate:\nrclcpp::Node node_;\n};\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#tips","title":"Tips","text":""},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#use-rqt_console-to-filter-logs","title":"Use rqt_console to filter logs","text":"<p>To filter logs, using <code>rqt_console</code> is useful:</p> <pre><code>ros2 run rqt_console rqt_console\n</code></pre> <p>For more details, refer to ROS 2 Documentation.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/console-logging/#useful-marco-expressions","title":"Useful marco expressions","text":"<p>To debug program, sometimes you need to see which functions and lines of code are executed. In that case, you can use <code>__FILE__</code>, <code>__LINE__</code> and <code>__FUNCTION__</code> macro:</p> <pre><code>void FooNode::on_timer() {\nRCLCPP_DEBUG(get_logger(), \"file: %s, line: %s, function: %s\" __FILE__, __LINE__, __FUNCTION__);\n}\n</code></pre> <p>The example output is as follows:</p> <p>[DEBUG] [1671720414.395456931] [foo]: file: /path/to/file.cpp, line: 100, function: on_timer</p>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/","title":"Coordinate system","text":""},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#coordinate-system","title":"Coordinate system","text":""},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#overview","title":"Overview","text":"<p>The commonly used coordinate systems include the world coordinate system, the vehicle coordinate system, and the sensor coordinate system.</p> <ul> <li>The world coordinate system is a fixed coordinate system that defines the physical space in the environment where the vehicle is located.</li> </ul> <ul> <li>The vehicle coordinate system is the vehicle's own coordinate system, which defines the vehicle's position and orientation in the world coordinate system.</li> </ul> <ul> <li>The sensor coordinate system is the sensor's own coordinate system, which is used to define the sensor's position and orientation in the vehicle coordinate system.</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#how-coordinates-are-used-in-autoware","title":"How coordinates are used in Autoware","text":"<p>In Autoware, coordinate systems are typically used to represent the position and movement of vehicles and obstacles in space. Coordinate systems are commonly used for path planning, perception and control, can help the vehicle decide how to avoid obstacles and to plan a safe and efficient path of travel.</p> <ol> <li> <p>Transformation of sensor data</p> <p>In Autoware, each sensor has a unique coordinate system and their data is expressed in terms of the coordinates. In order to correlate the independent data between different sensors, we need to find the position relationship between each sensor and the vehicle body. Once the installation position of the sensor on the vehicle body is determined, it will remain fixed during running, so the offline calibration method can be used to determine the precise position of each sensor relative to the vehicle body.</p> </li> <li> <p>ROS TF2</p> <p>The <code>TF2</code> system maintains a tree of coordinate transformations to represent the relationships between different coordinate systems. Each coordinate system is given a unique name and they are connected by coordinate transformations. How to use <code>TF2</code>, refer to the TF2 tutorial.</p> </li> </ol>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#tf-tree","title":"TF tree","text":"<p>In Autoware, a common coordinate system structure is shown below:</p> <pre><code>graph TD\n    /earth --&gt; /map\n    /map --&gt; /base_link\n    /base_link --&gt; /imu\n    /base_link --&gt; /lidar\n    /base_link --&gt; /gnss\n    /base_link --&gt; /radar\n    /base_link --&gt; /camera_link\n    /camera_link --&gt; /camera_optical_link</code></pre> <ul> <li>earth: <code>earth</code> coordinate system describe the position of any point on the earth in terms of geodetic longitude, latitude, and altitude. In Autoware, the <code>earth</code> frame is only used in the <code>GnssInsPositionStamped</code> message.</li> </ul> <ul> <li>map: <code>map</code> coordinate system is used to represent the location of points on a local map. Geographical coordinate system are mapped into plane rectangular coordinate system using UTM or MGRS. The <code>map</code> frame`s axes point to the East, North, Up directions as explained in Coordinate Axes Conventions.</li> </ul> <ul> <li>base_link: vehicle coordinate system, the origin of the coordinate system is the center of the rear axle of the vehicle.</li> </ul> <ul> <li>imu, lidar, gnss, radar: these are sensor frames, transfer to vehicle coordinate system through mounting relationship.</li> </ul> <ul> <li>camera_link: <code>camera_link</code> is ROS standard camera coordinate system .</li> </ul> <ul> <li>camera_optical_link: <code>camera_optical_link</code> is image standard camera coordinate system.</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#estimating-the-base_link-frame-by-using-the-other-sensors","title":"Estimating the <code>base_link</code> frame by using the other sensors","text":"<p>Generally we don't have the localization sensors physically at the <code>base_link</code> frame. So various sensors localize with respect to their own frames, let's call it <code>sensor</code> frame.</p> <p>We introduce a new frame naming convention: <code>x_by_y</code>:</p> <pre><code>x: estimated frame name\ny: localization method/source\n</code></pre> <p>We cannot directly get the <code>sensor</code> frame. Because we would need the EKF module to estimate the <code>base_link</code> frame first.</p> <p>Without the EKF module the best we can do is to estimate <code>Map[map] --&gt; sensor_by_sensor --&gt; base_link_by_sensor</code> using this sensor.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#example-by-the-gnssins-sensor","title":"Example by the GNSS/INS sensor","text":"<p>For the integrated GNSS/INS we use the following frames:</p> <pre><code>flowchart LR\n    earth --&gt; Map[map] --&gt; gnss_ins_by_gnss_ins --&gt; base_link_by_gnss_ins</code></pre> <p>The <code>gnss_ins_by_gnss_ins</code> frame is obtained by the coordinates from GNSS/INS sensor. The coordinates are converted to <code>map</code> frame using the <code>gnss_poser</code> node.</p> <p>Finally <code>gnss_ins_by_gnss_ins</code> frame represents the position of the <code>gnss_ins</code> estimated by the <code>gnss_ins</code> sensor in the <code>map</code>.</p> <p>Then by using the static transformation between <code>gnss_ins</code> and the <code>base_link</code> frame, we can obtain the <code>base_link_by_gnss_ins</code> frame. Which represents the <code>base_link</code> estimated by the <code>gnss_ins</code> sensor.</p> <p>References:</p> <ul> <li>https://www.ros.org/reps/rep-0105.html#earth</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#coordinate-axes-conventions","title":"Coordinate Axes Conventions","text":"<p>We are using East, North, Up (ENU) coordinate axes convention by default throughout the stack.</p> <pre><code>X+: East\nY+: North\nZ+: Up\n</code></pre> <p>The position, orientation, velocity, acceleration are all defined in the same axis convention.</p> <p>Position by the GNSS/INS sensor is expected to be in <code>earth</code> frame.</p> <p>Orientation, velocity, acceleration by the GNSS/INS sensor are expected to be in the sensor frame. Axes parallel to the <code>map</code> frame.</p> <p>If roll, pitch, yaw is provided, they correspond to rotation around X, Y, Z axes respectively.</p> <pre><code>Rotation around:\nX+: roll\nY+: pitch\nZ+: yaw\n</code></pre> <p>References:</p> <ul> <li>https://www.ros.org/reps/rep-0103.html#axis-orientation</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/coordinate-system/#how-they-can-be-created","title":"How they can be created","text":"<ol> <li> <p>Calibration of sensor</p> <p>The conversion relationship between every sensor coordinate system and <code>base_link</code> can be obtained through sensor calibration technology. How to calibrating your sensors refer to this link calibrating your sensors.</p> </li> <li> <p>Localization</p> <p>The relationship between the <code>base_link</code> coordinate system and the <code>map</code> coordinate system is determined by the position and orientation of the vehicle, and can be obtained from the vehicle localization result.</p> </li> <li> <p>Geo-referencing of map data</p> <p>The geo-referencing information can get the transformation relationship of <code>earth</code> coordinate system to local <code>map</code> coordinate system.</p> </li> </ol>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/","title":"Directory structure","text":""},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#directory-structure","title":"Directory structure","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#c-package","title":"C++ package","text":"<pre><code>&lt;package_name&gt;\n\u251c\u2500 config\n\u2502   \u251c\u2500 foo_ros.param.yaml\n\u2502   \u2514\u2500 foo_non_ros.yaml\n\u251c\u2500 doc\n\u2502   \u251c\u2500 foo_document.md\n\u2502   \u2514\u2500 foo_diagram.svg\n\u251c\u2500 include\n\u2502   \u2514\u2500 &lt;package_name&gt;\n\u2502       \u2514\u2500 foo_public.hpp\n\u251c\u2500 launch\n\u2502   \u251c\u2500 foo.launch.xml\n\u2502   \u2514\u2500 foo.launch.py\n\u251c\u2500 schema\n\u2502   \u2514\u2500 foo_node.schema.json\n\u251c\u2500 src\n\u2502   \u251c\u2500 foo_node.cpp\n\u2502   \u251c\u2500 foo_node.hpp\n\u2502   \u2514\u2500 foo_private.hpp\n\u251c\u2500 test\n\u2502   \u2514\u2500 test_foo.cpp\n\u251c\u2500 package.xml\n\u251c\u2500 CMakeLists.txt\n\u2514\u2500 README.md\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#directory-descriptions","title":"Directory descriptions","text":""},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#config","title":"<code>config</code>","text":"<p>Place configuration files such as node parameters. For ROS parameters, use the extension <code>.param.yaml</code>. For non-ROS parameters, use the extension <code>.yaml</code>.</p> <p>Rationale: Since ROS parameters files are type-sensitive, they should not be the target of some code formatters and linters. In order to distinguish the file type, we use different file extensions.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#doc","title":"<code>doc</code>","text":"<p>Place document files and link from README.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#include","title":"<code>include</code>","text":"<p>Place header files exposed to other packages. Do not place files directly under the <code>include</code> directory, but place files under the directory with the package name. This directory is used for mostly library headers. Note that many headers do not need to be placed here. It is enough to place the headers under the <code>src</code> directory.</p> <p>Reference: https://docs.ros.org/en/rolling/How-To-Guides/Ament-CMake-Documentation.html#adding-files-and-headers</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#launch","title":"<code>launch</code>","text":"<p>Place launch files (<code>.launch.xml</code> and <code>.launch.py</code>).</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#schema","title":"<code>schema</code>","text":"<p>Place parameter definition files. See parameters for details.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#src","title":"<code>src</code>","text":"<p>Place source files and private header files.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#test","title":"<code>test</code>","text":"<p>Place source files for testing. See unit testing for details.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/directory-structure/#python-package","title":"Python package","text":"<p>T.B.D.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/","title":"Launch files","text":""},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#launch-files","title":"Launch files","text":""},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#overview","title":"Overview","text":"<p>Autoware use ROS2 launch system to startup the software. Please see the official documentation to get a basic understanding about ROS 2 Launch system if you are not familiar with it.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#guideline","title":"Guideline","text":""},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#the-organization-of-launch-files-in-autoware","title":"The organization of launch files in Autoware","text":"<p>Autoware mainly has two repositories related to launch file organization: the autoware.universe and the autoware_launch.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#autowareuniverse","title":"autoware.universe","text":"<p>the <code>autoware.universe</code> contains the code of the main Autoware modules, and its <code>launch</code> directory is responsible for launching the nodes of each module. Autoware software stack is organized based on the architecture, so you may find that we try to match the launch structure similar to the architecture (splitting of files, namespace). For example, the <code>tier4_map_launch</code> subdirectory corresponds to the map module, so do the other <code>tier4_*_launch</code> subdirectories.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#autoware_launch","title":"autoware_launch","text":"<p>The <code>autoware_launch</code> is a repository referring to <code>autoware.universe</code>. The mainly purpose of introducing this repository is to provide the general entrance to start the Autoware software stacks, i.e, calling the launch file of each module.</p> <ul> <li> <p>The <code>autoware.launch.xml</code> is the basic launch file for road driving scenarios.</p> <p>As can be seen from the content, the entire launch file is divided into several different modules, including Vehicle, System, Map, Sensing, Localization, Perception, Planning, Control, etc. By setting the <code>launch_*</code> argument equals to <code>true</code> or <code>false</code> , we can determine which modules to be loaded.</p> </li> </ul> <ul> <li>The <code>logging_simulator.launch.xml</code> is often used together with the recorded ROS bag to debug if the target module (e.g, Sensing, Localization or Perception) functions normally.</li> </ul> <ul> <li>The <code>planning_simulator.launch.xml</code> is based on the Planning Simulator tool, mainly used for testing/validation of Planning module by simulating traffic rules, interactions with dynamic objects and control commands to the ego vehicle.</li> </ul> <ul> <li>The <code>e2e_simulator.launch.xml</code> is the launcher for digital twin simulation environment.</li> </ul> <pre><code>graph LR\nA11[logging_simulator.launch.xml]-.-&gt;A10[autoware.launch.xml]\nA12[planning_simulator.launch.xml]-.-&gt;A10[autoware.launch.xml]\nA13[e2e_simulator.launch.xml]-.-&gt;A10[autoware.launch.xml]\n\nA10--&gt;A21[tier4_map_component.launch.xml]\nA10--&gt;A22[xxx.launch.py]\nA10--&gt;A23[tier4_localization_component.launch.xml]\nA10--&gt;A24[xxx.launch.xml]\nA10--&gt;A25[tier4_sensing_component.launch.xml]\n\nA23--&gt;A30[localization.launch.xml]\nA30--&gt;A31[pose_estimator.launch.xml]\nA30--&gt;A32[util.launch.xml]\nA30--&gt;A33[pose_twist_fusion_filter.launch.xml]\nA30--&gt;A34[xxx.launch.xml]\nA30--&gt;A35[twist_estimator.launch.xml]\n\nA33--&gt;A41[stop_filter.launch.xml]\nA33--&gt;A42[ekf_localizer.launch.xml]\nA33--&gt;A43[twist2accel.launch.xml]</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#add-a-new-package-in-autoware","title":"Add a new package in Autoware","text":"<p>If a newly created package has executable node, we expect sample launch file and configuration within the package, just like the recommended structure shown in previous directory structure page.</p> <p>In order to automatically load the newly added package when starting Autoware, you need to make some necessary changes to the corresponding launch file. For example, if using ICP instead of NDT as the pointcloud registration algorithm, you can modify the <code>autoware.universe/launch/tier4_localization_launch/launch/pose_estimator/pose_estimator.launch.xml</code> file to load the newly added ICP package.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/launch-files/#parameter-management","title":"Parameter management","text":"<p>Another purpose of introducing the <code>autoware_launch</code> repository is to facilitate the parameter management of Autoware. Thinking about this situation: if we want to integrate Autoware to a specific vehicle and modify parameters, we have to fork <code>autoware.universe</code> which also has a lot of code other than parameters and is frequently updated by developers. By intergrating these parameters in <code>autoware_launch</code>, we can customize the Autoware parameters just by forking <code>autoware_launch</code> repository. Taking the localization module as an examples:</p> <ol> <li>all the \u201claunch parameters\u201d for localization component is listed in the files under <code>autoware_launch/autoware_launch/config/localization</code>.</li> <li>the \"launch parameters\" file paths are set in the <code>autoware_launch/autoware_launch/launch/components/tier4_localization_component.launch.xml</code> file.</li> <li>in <code>autoware.universe/launch/tier4_localization_launch/launch</code>, the launch files loads the \u201claunch parameters\u201d if the argument is given in the parameter configuration file. You can still use the default parameters in each packages to launch <code>tier4_localization_launch</code> within <code>autoware.universe</code>.</li> </ol>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/","title":"Message guidelines","text":""},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#message-guidelines","title":"Message guidelines","text":""},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#format","title":"Format","text":"<p>All messages should follow ROS message description specification.</p> <p>The accepted formats are:</p> <ul> <li><code>.msg</code></li> <li><code>.srv</code></li> <li><code>.action</code></li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#naming","title":"Naming","text":"<p>Under Construction</p> <p>Use <code>Array</code> as a suffix when creating a plural type of a message. This suffix is commonly used in common_interfaces.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#default-units","title":"Default units","text":"<p>All the fields by default have the following units depending on their types:</p> type default unit distance meter (m) angle radians (rad) time second (s) speed m/s velocity m/s acceleration m/s\u00b2 angular vel. rad/s angular accel. rad/s\u00b2 <p>If a field in a message has any of these default units, don't add any suffix or prefix denoting the type.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#non-default-units","title":"Non-default units","text":"<p>For non-default units, use following suffixes:</p> type non-default unit suffix distance nanometer <code>_nm</code> distance micrometer <code>_um</code> distance millimeter <code>_mm</code> distance kilometer <code>_km</code> angle degree (deg) <code>_deg</code> time nanosecond <code>_ns</code> time microsecond <code>_us</code> time millisecond <code>_ms</code> time minute <code>_min</code> time hour (h) <code>_hour</code> velocity km/h <code>_kmph</code> <p>If a unit that you'd like to use doesn't exist here, create an issue/PR to add it to this list.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#message-field-types","title":"Message field types","text":"<p>For list of types supported by the ROS interfaces see here.</p> <p>Also copied here for convenience:</p> Message Field Type C++ equivalent <code>bool</code> <code>bool</code> <code>byte</code> <code>uint8_t</code> <code>char</code> <code>char</code> <code>float32</code> <code>float</code> <code>float64</code> <code>double</code> <code>int8</code> <code>int8_t</code> <code>uint8</code> <code>uint8_t</code> <code>int16</code> <code>int16_t</code> <code>uint16</code> <code>uint16_t</code> <code>int32</code> <code>int32_t</code> <code>uint32</code> <code>uint32_t</code> <code>int64</code> <code>int64_t</code> <code>uint64</code> <code>uint64_t</code> <code>string</code> <code>std::string</code> <code>wstring</code> <code>std::u16string</code>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#arrays","title":"Arrays","text":"<p>For arrays, use <code>unbounded dynamic array</code> type.</p> <p>Example:</p> <pre><code>int32[] unbounded_integer_array\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#enumerations","title":"Enumerations","text":"<p>ROS 2 interfaces don't support enumerations directly.</p> <p>It is possible to define integers constants and assign them to a non-constant integer parameter.</p> <p>Constants are written in <code>CONSTANT_CASE</code>.</p> <p>Assign a different value to each element of a constant.</p> <p>Example from shape_msgs/msg/SolidPrimitive.msg</p> <pre><code>uint8 BOX=1\nuint8 SPHERE=2\nuint8 CYLINDER=3\nuint8 CONE=4\nuint8 PRISM=5\n\n# The type of the shape\nuint8 type\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#comments","title":"Comments","text":"<p>On top of the message, briefly explain what the message contains and/or what it is used for. For an example, see sensor_msgs/msg/Imu.msg.</p> <p>If necessary, add line comments before the fields that explain the context and/or meaning.</p> <p>For simple fields like <code>x, y, z, w</code> you might not need to add comments.</p> <p>Even though it is not strictly checked, try not to pass 100 characters in a line.</p> <p>Example:</p> <pre><code># Number of times the vehicle performed an emergency brake\nuint32 count_emergency_brake\n\n# Seconds passed since the last emergency brake\nuint64 duration\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/message-guidelines/#example-usages","title":"Example usages","text":"<ul> <li>Don't use unit suffixes for default types:<ul> <li>Bad: <code>float32 path_length_m</code></li> <li>Good: <code>float32 path_length</code></li> </ul> </li> <li>Don't prefix the units:<ul> <li>Bad: <code>float32 kmph_velocity_vehicle</code></li> <li>Good: <code>float32 velocity_vehicle_kmph</code></li> </ul> </li> <li>Use recommended suffixes if they are available in the table:<ul> <li>Bad: <code>float32 velocity_vehicle_km_h</code></li> <li>Good: <code>float32 velocity_vehicle_kmph</code></li> </ul> </li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/","title":"Parameters","text":""},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#parameters","title":"Parameters","text":"<p>Autoware ROS nodes have declared parameters which values are provided during the node start up in the form of a parameter file. All the expected parameters with corresponding values should exist in the parameter file. Depending on the application, the parameter values might need to be modified.</p> <p>Find more information on parameters from the official ROS documentation:</p> <ul> <li>Understanding ROS 2 Parameters</li> <li>About ROS 2 Parameters</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#workflow","title":"Workflow","text":"<p>A ROS package which uses the declare_parameter(...) function should:</p> <ul> <li>use the declare_parameter(...) with out a default value</li> <li>create a parameter file</li> <li>create a schema file</li> </ul> <p>The rationale behind this workflow is to have a verified single source of truth to pass to the ROS node and to be used in the web documentation. The approach reduces the risk of using invalid parameter values and makes maintenance of documentation easier. This is achieved by:</p> <ul> <li>declare_parameter(...) throws an exception if an expected parameter is missing in the parameter file</li> <li> <p>the schema validates the parameter file in the CI and renders a parameter table, as depicted in the graphics below</p> <pre><code>flowchart TD\n    NodeSchema[Schema file: *.schema.json]\n    ParameterFile[Parameter file: *.param.yaml]\n    WebDocumentation[Web documentation table]\n\n    NodeSchema --&gt;|Validation| ParameterFile\n    NodeSchema --&gt;|Generate| WebDocumentation</code></pre> </li> </ul> <p>Note: a parameter value can still be modified and bypass the validation, as there is no validation during runtime.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#declare-parameter-function","title":"Declare Parameter Function","text":"<p>It is the declare_parameter(...) function which sets the parameter values during a node startup.</p> <pre><code>declare_parameter&lt;INSERT_TYPE&gt;(\"INSERT_PARAMETER_1_NAME\"),\ndeclare_parameter&lt;INSERT_TYPE&gt;(\"INSERT_PARAMETER_N_NAME\")\n</code></pre> <p>As there is no default_value provided, the function throws an exception if a parameter were to be missing in the provided <code>*.param.yaml</code> file. Use a type from the C++ Type column in the table below for the declare_parameter(...) function, replacing INSERT_TYPE.</p> ParameterType Enum C++ Type <code>PARAMETER_BOOL</code> <code>bool</code> <code>PARAMETER_INTEGER</code> <code>int64_t</code> <code>PARAMETER_DOUBLE</code> <code>double</code> <code>PARAMETER_STRING</code> <code>std::string</code> <code>PARAMETER_BYTE_ARRAY</code> <code>std::vector&lt;uint8_t&gt;</code> <code>PARAMETER_BOOL_ARRAY</code> <code>std::vector&lt;bool&gt;</code> <code>PARAMETER_INTEGER_ARRAY</code> <code>std::vector&lt;int64_t&gt;</code> <code>PARAMETER_DOUBLE_ARRAY</code> <code>std::vector&lt;double&gt;</code> <code>PARAMETER_STRING_ARRAY</code> <code>std::vector&lt;std::string&gt;</code> <p>The table has been derived from Parameter Type and Parameter Value.</p> <p>See example: Lidar Apollo Segmentation TVM Nodes declare function</p>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#parameter-file","title":"Parameter File","text":"<p>The parameter file is minimal as there is no need to provide the user with additional information, e.g., description or type. This is because the associated schema file provides the additional information. Use the template below as a starting point for a ROS node.</p> <pre><code>/**:\nros__parameters:\nINSERT_PARAMETER_1_NAME: INSERT_PARAMETER_1_VALUE\nINSERT_PARAMETER_N_NAME: INSERT_PARAMETER_N_VALUE\n</code></pre> <p>The parameter file path is <code>INSERT_PATH_TO_PACKAGE/config/</code> and parameter file name is <code>INSERT_NODE_NAME.param.yaml</code>. To adapt the template to the ROS node, replace each <code>INSERT_PARAMETER_..._NAME</code> and <code>INSERT_PARAMETER_..._VALUE</code> for all parameters. Each declare_parameter(...) takes one parameter as input.</p> <p>See example: Lidar Apollo Segmentation TVM Nodes parameter file</p> <p>Note: <code>/**</code> is used instead of the explicit node namespace, this allows the parameter file to be passed to a ROS node which has been remapped.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#launch-parameter-file","title":"Launch parameter file","text":"<ul> <li>Launch parameter files store the customized parameters for user's vehicle.<ul> <li>For example, the customized parameter of <code>behavior_path_planner</code> stored under <code>autoware_launch</code></li> <li>Launch parameter files are stored under <code>autoware_launch</code>.</li> </ul> </li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#json-schema","title":"JSON Schema","text":"<p>JSON Schema is used the validate the parameter file(s) ensuring that it has the correct structure and content. Using JSON Schema for this purpose is considered best practice for cloud-native development. The schema template below shall be used as a starting point when defining the schema for a ROS node.</p> <pre><code>{\n\"$schema\": \"http://json-schema.org/draft-07/schema#\",\n\"title\": \"INSERT_TITLE\",\n\"type\": \"object\",\n\"definitions\": {\n\"INSERT_ROS_NODE_NAME\": {\n\"type\": \"object\",\n\"properties\": {\n\"INSERT_PARAMETER_1_NAME\": {\n\"type\": \"INSERT_TYPE\",\n\"description\": \"INSERT_DESCRIPTION\",\n\"default\": \"INSERT_DEFAULT\",\n\"INSERT_BOUND_CONDITION(S)\": \"INSERT_BOUND_VALUE(S)\"\n},\n\"INSERT_PARAMETER_N_NAME\": {\n\"type\": \"INSERT_TYPE\",\n\"description\": \"INSERT_DESCRIPTION\",\n\"default\": \"INSERT_DEFAULT\",\n\"INSERT_BOUND_CONDITION(S)\": \"INSERT_BOUND_VALUE(S)\"\n}\n},\n\"required\": [\"INSERT_PARAMETER_1_NAME\", \"INSERT_PARAMETER_N_NAME\"]\n}\n},\n\"properties\": {\n\"/**\": {\n\"type\": \"object\",\n\"properties\": {\n\"ros__parameters\": {\n\"$ref\": \"#/definitions/INSERT_ROS_NODE_NAME\"\n}\n},\n\"required\": [\"ros__parameters\"]\n}\n},\n\"required\": [\"/**\"]\n}\n</code></pre> <p>The schema file path is <code>INSERT_PATH_TO_PACKAGE/schema/</code> and the schema file name is <code>INSERT_NODE_NAME.schema.json</code>. To adapt the template to the ROS node, replace each <code>INSERT_...</code> and add all parameters <code>1..N</code>.</p> <p>See example: Lidar Apollo Segmentation TVM Nodes schema</p>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#attributes","title":"Attributes","text":"<p>Parameters have several attributes, some are required and some optional. The optional attributes are highly encouraged when applicable, as they provide useful information about a parameter and can ensure the value of the parameter is within its bounds.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#required","title":"Required","text":"<ul> <li>name</li> <li>type<ul> <li>see JSON Schema types</li> </ul> </li> <li>description</li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#optional","title":"Optional","text":"<ul> <li>default<ul> <li>a tested and verified value, see JSON Schema default</li> </ul> </li> <li>bound(s)<ul> <li>type dependent, e.g., integer, range and size</li> </ul> </li> </ul>"},{"location":"contributing/coding-guidelines/ros-nodes/parameters/#tips-and-tricks","title":"Tips and Tricks","text":"<p>Using well established standards enables the use of conventional tooling. Below is an example of how to link a schema to the parameter file(s) using VS Code. This enables a developer with convenient features such as auto-complete and parameter bound validation.</p> <p>In the root directory of where the project is hosted, create a <code>.vscode</code> folder with two files; <code>extensions.json</code> containing</p> <pre><code>{\n\"recommendations\": [\"redhat.vscode-yaml\"]\n}\n</code></pre> <p>and <code>settings.json</code> containing</p> <pre><code>{\n\"yaml.schemas\": {\n\"./INSERT_PATH_TO_PACKAGE/schema/INSERT_NODE_NAME.schema.json\": \"**/INSERT_NODE_NAME/config/*.param.yaml\"\n}\n}\n</code></pre> <p>The RedHat YAML extension enables validation of YAML files using JSON Schema and the <code>\"yaml.schemas\"</code> setting associates the <code>*.schema.json</code> file with all <code>*.param.yaml</code> files in the <code>config/</code> folder.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/task-scheduling/","title":"Task scheduling","text":""},{"location":"contributing/coding-guidelines/ros-nodes/task-scheduling/#task-scheduling","title":"Task scheduling","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"contributing/coding-guidelines/ros-nodes/topic-namespaces/","title":"Topic namespaces","text":""},{"location":"contributing/coding-guidelines/ros-nodes/topic-namespaces/#topic-namespaces","title":"Topic namespaces","text":""},{"location":"contributing/coding-guidelines/ros-nodes/topic-namespaces/#overview","title":"Overview","text":"<p>ROS allows topics, parameters and nodes to be namespaced which provides the following benefits:</p> <ul> <li>Multiple instances of the same node type will not cause naming clashes.</li> <li>Topics published by a node can be automatically namespaced with the node's namespace providing a meaningful and easily-visible connection.</li> <li>Keeps from cluttering the root namespace.</li> <li>Helps to maintain separation-of-concerns.</li> </ul> <p>This page focuses on how to use namespaces in Autoware and shows some useful examples. For basic information on topic namespaces, refer to this tutorial.</p>"},{"location":"contributing/coding-guidelines/ros-nodes/topic-namespaces/#how-topics-should-be-named-in-node","title":"How topics should be named in node","text":"<p>Autoware divides the node into the following functional categories, and adds the start namespace for the nodes according to the categories.</p> <ul> <li>localization</li> <li>perception</li> <li>planning</li> <li>control</li> <li>sensing</li> <li>vehicle</li> <li>map</li> <li>system</li> </ul> <p>When a node is run in a namespace, all topics which that node publishes are given that same namespace. All nodes in the Autoware stack must support namespaces by avoiding practices such as publishing topics in the global namespace.</p> <p>In general, topics should be namespaced based on the function of the node which produces them and not the node (or nodes) which consume them.</p> <p>Classify topics as input or output topics based on they are subscribed or published by the node. In the node, input topic is named <code>input/topic_name</code> and output topic is named <code>output/topic_name</code>.</p> <p>Configure the topic in the node's launch file. Take the <code>joy_controller</code> node as an example, in the following example, set the input and output topics and remap topics in the <code>joy_controller.launch.xml</code> file.</p> <pre><code>&lt;launch&gt;\n&lt;arg name=\"input_joy\" default=\"/joy\"/&gt;\n&lt;arg name=\"input_odometry\" default=\"/localization/kinematic_state\"/&gt;\n\n&lt;arg name=\"output_control_command\" default=\"/external/$(var external_cmd_source)/joy/control_cmd\"/&gt;\n&lt;arg name=\"output_external_control_command\" default=\"/api/external/set/command/$(var external_cmd_source)/control\"/&gt;\n&lt;arg name=\"output_shift\" default=\"/api/external/set/command/$(var external_cmd_source)/shift\"/&gt;\n&lt;arg name=\"output_turn_signal\" default=\"/api/external/set/command/$(var external_cmd_source)/turn_signal\"/&gt;\n&lt;arg name=\"output_heartbeat\" default=\"/api/external/set/command/$(var external_cmd_source)/heartbeat\"/&gt;\n&lt;arg name=\"output_gate_mode\" default=\"/control/gate_mode_cmd\"/&gt;\n&lt;arg name=\"output_vehicle_engage\" default=\"/vehicle/engage\"/&gt;\n\n&lt;node pkg=\"joy_controller\" exec=\"joy_controller\" name=\"joy_controller\" output=\"screen\"&gt;\n&lt;remap from=\"input/joy\" to=\"$(var input_joy)\"/&gt;\n&lt;remap from=\"input/odometry\" to=\"$(var input_odometry)\"/&gt;\n\n&lt;remap from=\"output/control_command\" to=\"$(var output_control_command)\"/&gt;\n&lt;remap from=\"output/external_control_command\" to=\"$(var output_external_control_command)\"/&gt;\n&lt;remap from=\"output/shift\" to=\"$(var output_shift)\"/&gt;\n&lt;remap from=\"output/turn_signal\" to=\"$(var output_turn_signal)\"/&gt;\n&lt;remap from=\"output/gate_mode\" to=\"$(var output_gate_mode)\"/&gt;\n&lt;remap from=\"output/heartbeat\" to=\"$(var output_heartbeat)\"/&gt;\n&lt;remap from=\"output/vehicle_engage\" to=\"$(var output_vehicle_engage)\"/&gt;\n&lt;/node&gt;\n&lt;/launch&gt;\n</code></pre>"},{"location":"contributing/coding-guidelines/ros-nodes/topic-namespaces/#topic-names-in-the-code","title":"Topic names in the code","text":"<ol> <li> <p>Have <code>~</code> so that namespace in launch configuration is applied(should not start from root <code>/</code>).</p> </li> <li> <p>Have <code>~/input</code> <code>~/output</code> namespace before topic name used to communicate with other nodes.</p> <p>e.g., In node <code>obstacle_avoidance_planner</code>, using topic names of type <code>~/input/topic_name</code> to subscribe to topics.</p> <pre><code>objects_sub_ = create_subscription&lt;PredictedObjects&gt;(\n\"~/input/objects\", rclcpp::QoS{10},\nstd::bind(&amp;ObstacleAvoidancePlanner::onObjects, this, std::placeholders::_1));\n</code></pre> <p>e.g., In node <code>obstacle_avoidance_planner</code>, using topic names of type <code>~/output/topic_name</code> to publish topic.</p> <pre><code>traj_pub_ = create_publisher&lt;Trajectory&gt;(\"~/output/path\", 1);\n</code></pre> </li> <li> <p>Visualization or debug purpose topics should have <code>~/debug/</code> namespace.</p> <p>e.g., In node <code>obstacle_avoidance_planner</code>, in order to debug or visualizing topics, using topic names of type <code>~/debug/topic_name</code> to publish information.</p> <pre><code>debug_markers_pub_ =\ncreate_publisher&lt;visualization_msgs::msg::MarkerArray&gt;(\"~/debug/marker\", durable_qos);\n\ndebug_msg_pub_ =\ncreate_publisher&lt;tier4_debug_msgs::msg::StringStamped&gt;(\"~/debug/calculation_time\", 1);\n</code></pre> <p>The launch configured namespace will be add the topics before, so the topic names will be as following:</p> <p><code>/planning/scenario_planning/lane_driving/motion_planning/obstacle_avoidance_planner/debug/marker /planning/scenario_planning/lane_driving/motion_planning/obstacle_avoidance_planner/debug/calculation_time</code></p> </li> <li> <p>Rationale: we want to make topic names remapped and configurable from launch files.</p> </li> </ol>"},{"location":"contributing/discussion-guidelines/","title":"Discussion guidelines","text":""},{"location":"contributing/discussion-guidelines/#discussion-guidelines","title":"Discussion guidelines","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://docs.github.com/en/discussions/guides/best-practices-for-community-conversations-on-github</li> <li>https://opensource.guide/how-to-contribute/#communicating-effectively</li> </ul>"},{"location":"contributing/documentation-guidelines/","title":"Documentation guidelines","text":""},{"location":"contributing/documentation-guidelines/#documentation-guidelines","title":"Documentation guidelines","text":""},{"location":"contributing/documentation-guidelines/#workflow","title":"Workflow","text":"<p>Contributions to Autoware's documentation are welcome, and the same principles described in the contribution guidelines should be followed. Small, limited changes can be made by forking this repository and submitting a pull request, but larger changes should be discussed with the community and Autoware maintainers via GitHub Discussion first.</p> <p>Examples of small changes include:</p> <ul> <li>Fixing spelling or grammatical mistakes</li> <li>Fixing broken links</li> <li>Making an addition to an existing, well-defined page, such as the Troubleshooting guide.</li> </ul> <p>Examples of larger changes include:</p> <ul> <li>Adding new pages with a large amount of detail, such as a tutorial</li> <li>Re-organization of the existing documentation structure</li> </ul>"},{"location":"contributing/documentation-guidelines/#style-guide","title":"Style guide","text":"<p>You should refer to the Google developer documentation style guide as much as possible. Reading the Highlights page of that guide is recommended, but if not then the key points below should be noted.</p> <ul> <li>Use standard American English spelling and punctuation.</li> <li>Use sentence case for document titles and section headings.</li> <li>Use descriptive link text.</li> <li>Write short sentences that are easy to understand and translate.</li> </ul>"},{"location":"contributing/documentation-guidelines/#tips","title":"Tips","text":""},{"location":"contributing/documentation-guidelines/#how-to-preview-your-modification","title":"How to preview your modification","text":"<p>There are two ways to preview your modification on a documentation website.</p>"},{"location":"contributing/documentation-guidelines/#1-using-github-actions-workflow","title":"1. Using GitHub Actions workflow","text":"<p>Follow the steps below.</p> <ol> <li>Create a pull request to the repository.</li> <li>Add the <code>deploy-docs</code> label from the sidebar (See below figure).</li> <li>Wait for a couple of minutes, and the <code>github-actions</code> bot will notify the URL for the pull request's preview.</li> </ol> <p></p>"},{"location":"contributing/documentation-guidelines/#2-running-an-mkdocs-server-in-your-local-environment","title":"2. Running an MkDocs server in your local environment","text":"<p>Instead of creating a PR, you can use the <code>mkdocs</code> command to build Autoware's documentation websites on your local computer. Assuming that you are using Ubuntu OS, run the following to install the required libraries.</p> <pre><code>python3 -m pip install -U $(curl -fsSL https://raw.githubusercontent.com/autowarefoundation/autoware-github-actions/main/deploy-docs/mkdocs-requirements.txt)\n</code></pre> <p>Then, run <code>mkdocs serve</code> on your documentation directory.</p> <pre><code>cd /PATH/TO/YOUR-autoware-documentation\nmkdocs serve\n</code></pre> <p>It will launch the MkDocs server. Access http://127.0.0.1:8000/ to see the preview of the website.</p>"},{"location":"contributing/pull-request-guidelines/","title":"Pull request guidelines","text":""},{"location":"contributing/pull-request-guidelines/#pull-request-guidelines","title":"Pull request guidelines","text":""},{"location":"contributing/pull-request-guidelines/#general-pull-request-workflow","title":"General pull request workflow","text":"<p>Autoware uses the fork-and-pull model. For more details about the model, refer to GitHub Docs.</p> <p>The following is a general example of the pull request workflow based on the fork-and-pull model. Use this workflow as a reference when you contribute to Autoware.</p> <ol> <li>Create an issue.<ul> <li>Discuss the approaches to the issue with maintainers.</li> <li>Confirm the support guidelines before creating an issue.</li> <li>Follow the discussion guidelines when you discuss with other contributors.</li> </ul> </li> <li>Create a fork repository. (for the first time only)</li> <li>Write code in your fork repository according to the approach agreed upon in the issue.<ul> <li>Write the tests and documentation as appropriate.</li> <li>Follow the coding guidelines guidelines when you write code.</li> <li>Follow the Testing guidelines guidelines when you write tests.</li> <li>Follow the Documentation guidelines guidelines when you write documentation.</li> <li>Follow the commit guidelines when you commit your changes.</li> </ul> </li> <li>Test the code.<ul> <li>It is recommended that you summarize the test results, because you will need to explain the test results in the later review process.</li> <li>If you are not sure what tests should be done, discuss them with maintainers.</li> </ul> </li> <li>Create a pull request.<ul> <li>Follow the pull request rules when you create a pull request.</li> </ul> </li> <li>Wait for the pull request to be reviewed.<ul> <li>The reviewers will review your code following the review guidelines.<ul> <li>Not only the reviewers, but also the author is encouraged to understand the review guidelines.</li> </ul> </li> <li>If CI checks have failed, fix the errors.</li> </ul> </li> <li>Address the review comments pointed out by the reviewers.<ul> <li>If you don't understand the meaning of a review comment, ask the reviewers until you understand it.<ul> <li>Fixing without understanding the reason is not recommended because the author should be responsible for the final content of their own pull request.</li> </ul> </li> <li>If you don't agree with a review comment, ask the reviewers for a rational reason.<ul> <li>The reviewers are obligated to make the author understand the meanings of each comment.</li> </ul> </li> <li>After you have done with the review comments, re-request a review to the reviewers and back to 6.</li> <li>If there are no more new review comments, the reviewers will approve the pull request and proceed to 8.</li> </ul> </li> <li>Merge the pull request.<ul> <li>Anyone with write access can merge the pull request if there is no special request from maintainers.<ul> <li>The author is encouraged to merge the pull request to feel responsible for their own pull request.</li> <li>If the author does not have write access, ask the reviewers or maintainers.</li> </ul> </li> </ul> </li> </ol>"},{"location":"contributing/pull-request-guidelines/#pull-request-rules","title":"Pull request rules","text":""},{"location":"contributing/pull-request-guidelines/#use-an-appropriate-pull-request-template-required-non-automated","title":"Use an appropriate pull request template (required, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/#rationale","title":"Rationale","text":"<ul> <li>The unified style of descriptions by templates can make reviews efficient.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#example","title":"Example","text":"<p>There are two types of templates. Select one based on the following condition.</p> <ol> <li>Standard change:<ul> <li>Complexity:<ul> <li>New features or significant updates.</li> <li>Requires deeper understanding of the codebase.</li> </ul> </li> <li>Impact:<ul> <li>Affects multiple parts of the system.</li> <li>Basically includes minor features, bug fixes and performance improvement.</li> <li>Needs testing before merging.</li> </ul> </li> </ul> </li> <li>Small change:<ul> <li>Complexity:<ul> <li>Documentation, simple refactoring, or style adjustments.</li> <li>Easy to understand and review.</li> </ul> </li> <li>Impact:<ul> <li>Minimal effect on the system.</li> <li>Quicker merge with less testing needed.</li> </ul> </li> </ul> </li> </ol>"},{"location":"contributing/pull-request-guidelines/#steps-to-use-an-appropriate-pull-request-template","title":"Steps to use an appropriate pull request template","text":"<ol> <li>Select the appropriate template, as shown in this video.</li> <li>Read the selected template carefully and fill the required content.</li> <li>Check the checkboxes during a review.<ul> <li>There are pre-review checklist and post-review checklist for the author.</li> </ul> </li> </ol>"},{"location":"contributing/pull-request-guidelines/#set-appropriate-reviewers-after-creating-a-pull-request-required-partially-automated","title":"Set appropriate reviewers after creating a pull request (required, partially automated)","text":""},{"location":"contributing/pull-request-guidelines/#rationale_1","title":"Rationale","text":"<ul> <li>Pull requests must be reviewed by appropriate reviewers to keep the quality of the codebase.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#example_1","title":"Example","text":"<ul> <li>For most ROS packages, reviewers will be automatically assigned based on the <code>maintainer</code> information in <code>package.xml</code>.</li> <li>If no reviewer is assigned automatically, assign reviewers manually following the instructions in GitHub Docs.<ul> <li>You can find the reviewers by seeing the <code>.github/CODEOWNERS</code> file of the repository.</li> </ul> </li> <li>If you are not sure the appropriate reviewers, ask <code>@autoware-maintainers</code>.</li> <li>If you have no rights to assign reviewers, mention reviewers instead.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#apply-conventional-commits-to-the-pull-request-title-required-automated","title":"Apply Conventional Commits to the pull request title (required, automated)","text":""},{"location":"contributing/pull-request-guidelines/#rationale_2","title":"Rationale","text":"<ul> <li>Conventional Commits can generate categorized changelogs, for example using git-cliff.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#example_2","title":"Example","text":"<pre><code>feat(trajectory_follower): add an awesome feature\n</code></pre> <p>Note</p> <p>You have to start the description part (here <code>add an awesome feature</code>) with a lowercase.</p> <p>If your change breaks some interfaces, use the <code>!</code> (breaking changes) mark as follows:</p> <pre><code>feat(trajectory_follower)!: remove package\nfeat(trajectory_follower)!: change parameter names\nfeat(planning)!: change topic names\nfeat(autoware_utils)!: change function names\n</code></pre> <p>For the repositories that contain code (most repositories), use the definition of conventional-commit-types for the type.</p> <p>For documentation repositories such as autoware-documentation, use the following definition:</p> <ul> <li><code>feat</code><ul> <li>Add new pages.</li> <li>Add contents to the existing pages.</li> </ul> </li> <li><code>fix</code><ul> <li>Fix the contents in the existing pages.</li> </ul> </li> <li><code>refactor</code><ul> <li>Move contents to different pages.</li> </ul> </li> <li><code>docs</code><ul> <li>Update documentation for the documentation repository itself.</li> </ul> </li> <li><code>build</code><ul> <li>Update the settings of the documentation site builder.</li> </ul> </li> <li><code>!</code> (breaking changes)<ul> <li>Remove pages.</li> <li>Change the URL of pages.</li> </ul> </li> </ul> <p><code>perf</code> and <code>test</code> are generally unused. Other types have the same meaning as the code repositories.</p>"},{"location":"contributing/pull-request-guidelines/#add-the-related-component-names-to-the-scope-of-conventional-commits-advisory-non-automated","title":"Add the related component names to the scope of Conventional Commits (advisory, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/#rationale_3","title":"Rationale","text":"<ul> <li>It helps contributors find pull requests that are relevant to them.</li> <li>It makes the changelog clearer.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#example_3","title":"Example","text":"<p>For ROS packages, adding the package name or component name is good.</p> <pre><code>feat(trajectory_follower): add an awesome feature\nrefactor(planning, control): use common utils\n</code></pre>"},{"location":"contributing/pull-request-guidelines/#keep-a-pull-request-small-advisory-non-automated","title":"Keep a pull request small (advisory, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/#rationale_4","title":"Rationale","text":"<ul> <li>Small pull requests are easy to understand for reviewers.</li> <li>Small pull requests are easy to revert for maintainers.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#exception","title":"Exception","text":"<p>It is acceptable if it is agreed with maintainers that there is no other way but to submit a big pull request.</p>"},{"location":"contributing/pull-request-guidelines/#example_4","title":"Example","text":"<ul> <li>Avoid developing two features in one pull request.</li> <li>Avoid mixing different types (<code>feat</code>, <code>fix</code>, <code>refactor</code>, etc.) of changes in the same commit.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#remind-reviewers-if-there-is-no-response-for-more-than-a-week-advisory-non-automated","title":"Remind reviewers if there is no response for more than a week (advisory, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/#rationale_5","title":"Rationale","text":"<ul> <li>It is the author's responsibility to care about their own pull request until it is merged.</li> </ul>"},{"location":"contributing/pull-request-guidelines/#example_5","title":"Example","text":"<pre><code>@{some-of-developers} Would it be possible for you to review this PR?\n@autoware-maintainers friendly ping.\n</code></pre>"},{"location":"contributing/pull-request-guidelines/ci-checks/","title":"CI checks","text":""},{"location":"contributing/pull-request-guidelines/ci-checks/#ci-checks","title":"CI checks","text":"<p>Autoware has several checks for a pull request. The results are shown at the bottom of the pull request page as below.</p> <p></p> <p>If the \u274c mark is shown, click the <code>Details</code> button and investigate the failure reason.</p> <p>If the <code>Required</code> mark is shown, you cannot merge the pull request unless you resolve the error. If not, it is optional, but preferably it should be fixed.</p> <p>The following sections explain about common CI checks in Autoware. Note that some repositories may have different settings.</p>"},{"location":"contributing/pull-request-guidelines/ci-checks/#dco","title":"DCO","text":"<p>The Developer Certificate of Origin (DCO) is a lightweight way for contributors to certify that they wrote or otherwise have the right to submit the code they are contributing to the project.</p> <p>This workflow checks whether the pull request fulfills <code>DCO</code>. You need to confirm the required items and commit with <code>git commit -s</code>.</p> <p>For more information, refer to the GitHub App page.</p>"},{"location":"contributing/pull-request-guidelines/ci-checks/#semantic-pull-request","title":"semantic-pull-request","text":"<p>This workflow checks whether the pull request follows Conventional Commits.</p> <p>For the detailed rules, see the pull request rules.</p>"},{"location":"contributing/pull-request-guidelines/ci-checks/#pre-commit","title":"pre-commit","text":"<p>pre-commit is a tool to run formatters or linters when you commit.</p> <p>This workflow checks whether the pull request has no error with <code>pre-commit</code>.</p> <p>In the workflow <code>pre-commit.ci - pr</code> is enabled in the repository, it will automatically fix errors by pre-commit.ci as many as possible. If there are some errors remain, fix them manually.</p> <p>You can run <code>pre-commit</code> in your local environment by the following command:</p> <pre><code>pre-commit run -a\n</code></pre> <p>Or you can install <code>pre-commit</code> to the repository and automatically run it before committing:</p> <pre><code>pre-commit install\n</code></pre> <p>Since it is difficult to detect errors with no false positives, some jobs are split into another config file and marked as optional. To check them, use the <code>--config</code> option:</p> <pre><code>pre-commit run -a --config .pre-commit-config-optional.yaml\n</code></pre>"},{"location":"contributing/pull-request-guidelines/ci-checks/#spell-check-differential","title":"spell-check-differential","text":"<p>This workflow detects spelling mistakes using CSpell with our dictionary file. You can submit pull requests to tier4/autoware-spell-check-dict to update the dictionary.</p> <p>Since it is difficult to detect errors with no false positives, it is an optional workflow, but it is preferable to remove spelling mistakes as many as possible.</p>"},{"location":"contributing/pull-request-guidelines/ci-checks/#build-and-test-differential","title":"build-and-test-differential","text":"<p>This workflow checks <code>colcon build</code> and <code>colcon test</code> for the pull request. To make the CI faster, it doesn't check all packages but only modified packages and the dependencies.</p>"},{"location":"contributing/pull-request-guidelines/ci-checks/#build-and-test-differential-self-hosted","title":"build-and-test-differential-self-hosted","text":"<p>This workflow is the <code>ARM64</code> version of <code>build-and-test-differential</code>. You need to add the <code>ARM64</code> label to run this workflow.</p> <p>For reference information, since ARM machines are not supported by GitHub-hosted runners, we use self-hosted runners prepared by the AWF. For the details about self-hosted runners, refer to GitHub Docs.</p>"},{"location":"contributing/pull-request-guidelines/ci-checks/#deploy-docs","title":"deploy-docs","text":"<p>This workflow deploys the preview documentation site for the pull request. You need to add the <code>deploy-docs</code> label to run this workflow.</p>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/","title":"Commit guidelines","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#commit-guidelines","title":"Commit guidelines","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#branch-rules","title":"Branch rules","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#start-branch-names-with-the-corresponding-issue-numbers-advisory-non-automated","title":"Start branch names with the corresponding issue numbers (advisory, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#rationale","title":"Rationale","text":"<ul> <li>Developers can quickly find the corresponding issues.</li> <li>It is helpful for tools.</li> <li>It is consistent with GitHub's default behavior.</li> </ul>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#exception","title":"Exception","text":"<p>If there are no corresponding issues, you can ignore this rule.</p>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#example","title":"Example","text":"<pre><code>123-add-feature\n</code></pre>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#reference","title":"Reference","text":"<ul> <li>GitHub Docs</li> </ul>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#use-dash-case-for-the-separator-of-branch-names-advisory-non-automated","title":"Use <code>dash-case</code> for the separator of branch names (advisory, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#rationale_1","title":"Rationale","text":"<ul> <li>It is consistent with GitHub's default behavior.</li> </ul>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#example_1","title":"Example","text":"<pre><code>123-add-feature\n</code></pre>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#reference_1","title":"Reference","text":"<ul> <li>GitHub Docs</li> </ul>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#make-branch-names-descriptive-advisory-non-automated","title":"Make branch names descriptive (advisory, non-automated)","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#rationale_2","title":"Rationale","text":"<ul> <li>It can avoid conflicts of names.</li> <li>Developers can understand the purpose of the branch.</li> </ul>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#exception_1","title":"Exception","text":"<p>If you have already submitted a pull request, you do not have to change the branch name because you need to re-create a pull request, which is noisy and a waste of time. Be careful from the next time.</p>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#example_2","title":"Example","text":"<p>Usually it is good to start with a verb.</p> <pre><code>123-fix-memory-leak-of-trajectory-follower\n</code></pre>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#commit-rules","title":"Commit rules","text":""},{"location":"contributing/pull-request-guidelines/commit-guidelines/#sign-off-your-commits-required-automated","title":"Sign-off your commits (required, automated)","text":"<p>Developers must certify that they wrote or otherwise have the right to submit the code they are contributing to the project.</p>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#rationale_3","title":"Rationale","text":"<p>If not, it will lead to complex license problems.</p>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#example_3","title":"Example","text":"<pre><code>git commit -s\n</code></pre> <pre><code>feat: add a feature\n\nSigned-off-by: Autoware &lt;autoware@example.com&gt;\n</code></pre>"},{"location":"contributing/pull-request-guidelines/commit-guidelines/#reference_2","title":"Reference","text":"<ul> <li>GitHub Apps - DCO</li> </ul>"},{"location":"contributing/pull-request-guidelines/review-guidelines/","title":"Review guidelines","text":""},{"location":"contributing/pull-request-guidelines/review-guidelines/#review-guidelines","title":"Review guidelines","text":"<p>Warning</p> <p>Under Construction</p> <p>Refer to the following links for now:</p> <ul> <li>https://google.github.io/eng-practices/review/</li> <li>https://docs.gitlab.com/ee/development/code_review.html</li> <li>https://www.swarmia.com/blog/a-complete-guide-to-code-reviews/</li> <li>https://rewind.com/blog/best-practices-for-reviewing-pull-requests-in-github/</li> </ul>"},{"location":"contributing/pull-request-guidelines/review-tips/","title":"Review tips","text":""},{"location":"contributing/pull-request-guidelines/review-tips/#review-tips","title":"Review tips","text":""},{"location":"contributing/pull-request-guidelines/review-tips/#toggle-annotations-or-review-comments-in-the-diff-view","title":"Toggle annotations or review comments in the diff view","text":"<p>There might be some annotations or review comments in the diff view during your review.</p> <p>To toggle annotations, press the <code>A</code> key.</p> <p>Before:</p> <p></p> <p>After:</p> <p></p> <p>To toggle review comments, press the <code>I</code> key.</p> <p>For other keyboard shortcuts, refer to GitHub Docs.</p>"},{"location":"contributing/pull-request-guidelines/review-tips/#view-code-in-the-web-based-visual-studio-code","title":"View code in the web-based Visual Studio Code","text":"<p>You can open <code>Visual Studio Code</code> from your browser to view code in a rich UI. To use it, press the <code>.</code> key on any repository or pull request.</p> <p>For more detailed usage, refer to github/dev.</p>"},{"location":"contributing/pull-request-guidelines/review-tips/#check-out-the-branch-of-a-pull-request-quickly","title":"Check out the branch of a pull request quickly","text":"<p>If you want to check out the branch of a pull request, it's generally troublesome with the fork-and-pull model.</p> <pre><code># Copy the user name and the fork URL.\ngit remote add {user-name} {fork-url}\ngit checkout {user-name}/{branch-name}\ngit remote rm {user-name} # To clean up\n</code></pre> <p>Instead, you can use GitHub CLI to simplify the steps, just run <code>gh pr checkout {pr-number}</code>.</p> <p>You can copy the command from the top right of the pull request page.</p> <p></p>"},{"location":"contributing/testing-guidelines/","title":"Testing guidelines","text":""},{"location":"contributing/testing-guidelines/#testing-guidelines","title":"Testing guidelines","text":""},{"location":"contributing/testing-guidelines/#unit-testing","title":"Unit testing","text":"<p>Unit testing is a software testing method that tests individual units of source code to determine whether they satisfy the specification.</p> <p>For details, see the Unit testing guidelines.</p>"},{"location":"contributing/testing-guidelines/#integration-testing","title":"Integration testing","text":"<p>Integration testing combines and tests the individual software modules as a group, and is done after unit testing.</p> <p>While performing integration testing, the following subtypes of tests are written:</p> <ol> <li>Fault injection testing</li> <li>Back-to-back comparison between a model and code</li> <li>Requirements-based testing</li> <li>Anomaly detection during integration testing</li> <li>Random input testing</li> </ol> <p>For details, see the Integration testing guidelines.</p>"},{"location":"contributing/testing-guidelines/integration-testing/","title":"Integration testing","text":""},{"location":"contributing/testing-guidelines/integration-testing/#integration-testing","title":"Integration testing","text":"<p>An integration test is defined as the phase in software testing where individual software modules are combined and tested as a group. Integration tests occur after unit tests, and before validation tests.</p> <p>The input to an integration test is a set of independent modules that have been unit tested. The set of modules is tested against the defined integration test plan, and the output is a set of properly integrated software modules that is ready for system testing.</p>"},{"location":"contributing/testing-guidelines/integration-testing/#value-of-integration-testing","title":"Value of integration testing","text":"<p>Integration tests determine if independently developed software modules work correctly when the modules are connected to each other. In ROS 2, the software modules are called nodes. Testing a single node is a special type of integration test that is commonly referred to as component testing.</p> <p>Integration tests help to find the following types of errors:</p> <ul> <li>Incompatible interactions between nodes, such as non-matching topics, different message types, or incompatible QoS settings.</li> <li>Edge cases that were not touched by unit testing, such as a critical timing issue, network communication delays, disk I/O failures, and other such problems that can occur in production environments.</li> <li>Issues that can occur while the system is under high CPU/memory load, such as <code>malloc</code> failures. This can be tested using tools like <code>stress</code> and <code>udpreplay</code> to test the performance of nodes with real data.</li> </ul> <p>With ROS 2, it is possible to program complex autonomous-driving applications with a large number of nodes. Therefore, a lot of effort has been made to provide an integration-test framework that helps developers test the interaction of ROS 2 nodes.</p>"},{"location":"contributing/testing-guidelines/integration-testing/#integration-test-framework","title":"Integration-test framework","text":"<p>A typical integration-test framework has three parts:</p> <ol> <li>A series of executables with arguments that work together and generate outputs.</li> <li>A series of expected outputs that should match the output of the executables.</li> <li>A launcher that starts the tests, compares the outputs to the expected outputs, and determines if the test passes.</li> </ol> <p>In Autoware, we use the launch_testing framework.</p>"},{"location":"contributing/testing-guidelines/integration-testing/#smoke-tests","title":"Smoke tests","text":"<p>Autoware has a dedicated API for smoke testing. To use this framework, in <code>package.xml</code> add:</p> <pre><code>&lt;test_depend&gt;autoware_testing&lt;/test_depend&gt;\n</code></pre> <p>And in <code>CMakeLists.txt</code> add:</p> <pre><code>if(BUILD_TESTING)\nfind_package(autoware_testing REQUIRED)\nadd_smoke_test(${PROJECT_NAME} ${NODE_NAME})\nendif()\n</code></pre> <p>Doing so adds smoke tests that ensure that a node can be:</p> <ol> <li>Launched with a default parameter file.</li> <li>Terminated with a standard <code>SIGTERM</code> signal.</li> </ol> <p>For the full API documentation, refer to the package design page.</p> <p>Note</p> <p>This API is not suitable for all smoke test cases. It cannot be used when a specific file location (eg: for a map) is required to be passed to the node, or if some preparation needs to be conducted before node launch. In such cases use the manual solution from the component test section below.</p>"},{"location":"contributing/testing-guidelines/integration-testing/#integration-test-with-a-single-node-component-test","title":"Integration test with a single node: component test","text":"<p>The simplest scenario is a single node. In this case, the integration test is commonly referred to as a component test.</p> <p>To add a component test to an existing node, you can follow the example of the <code>lanelet2_map_loader</code> in the <code>map_loader</code> package (added in this PR).</p> <p>In <code>package.xml</code>, add:</p> <pre><code>&lt;test_depend&gt;ros_testing&lt;/test_depend&gt;\n</code></pre> <p>In <code>CMakeLists.txt</code>, add or modify the <code>BUILD_TESTING</code> section:</p> <pre><code>if(BUILD_TESTING)\nadd_ros_test(\ntest/lanelet2_map_loader_launch.test.py\nTIMEOUT \"30\"\n)\ninstall(DIRECTORY\ntest/data/\nDESTINATION share/${PROJECT_NAME}/test/data/\n)\nendif()\n</code></pre> <p>In addition to the command <code>add_ros_test</code>, we also install any data that is required by the test using the <code>install</code> command.</p> <p>Note</p> <ul> <li>The <code>TIMEOUT</code> argument is given in seconds; see the add_ros_test.cmake file for details.</li> <li>The <code>add_ros_test</code> command will run the test in a unique <code>ROS_DOMAIN_ID</code> which avoids interference between tests running in parallel.</li> </ul> <p>To create a test, either read the launch_testing quick-start example, or follow the steps below.</p> <p>Taking <code>test/lanelet2_map_loader_launch.test.py</code> as an example, first dependencies are imported:</p> <pre><code>import os\nimport unittest\n\nfrom ament_index_python import get_package_share_directory\nimport launch\nfrom launch import LaunchDescription\nfrom launch_ros.actions import Node\nimport launch_testing\nimport pytest\n</code></pre> <p>Then a launch description is created to launch the node under test. Note that the <code>test_map.osm</code> file path is found and passed to the node, something that cannot be done with the smoke testing API:</p> <pre><code>@pytest.mark.launch_test\ndef generate_test_description():\n\n    lanelet2_map_path = os.path.join(\n        get_package_share_directory(\"map_loader\"), \"test/data/test_map.osm\"\n    )\n\n    lanelet2_map_loader = Node(\n        package=\"map_loader\",\n        executable=\"lanelet2_map_loader\",\n        parameters=[{\"lanelet2_map_path\": lanelet2_map_path}],\n    )\n\n    context = {}\n\n    return (\n        LaunchDescription(\n            [\n                lanelet2_map_loader,\n                # Start test after 1s - gives time for the map_loader to finish initialization\n                launch.actions.TimerAction(\n                    period=1.0, actions=[launch_testing.actions.ReadyToTest()]\n                ),\n            ]\n        ),\n        context,\n    )\n</code></pre> <p>Note</p> <ul> <li>Since the node need time to process the input lanelet2 map, we use a <code>TimerAction</code> to delay the start of the test by 1s.</li> <li>In the example above, the <code>context</code> is empty but it can be used to pass objects to the test cases.</li> <li>You can find an example of using the <code>context</code> in the ROS 2 context_launch_test.py test example.</li> </ul> <p>Finally, a test is executed after the node executable has been shut down (<code>post_shutdown_test</code>). Here we ensure that the node was launched without error and exited cleanly.</p> <pre><code>@launch_testing.post_shutdown_test()\nclass TestProcessOutput(unittest.TestCase):\n    def test_exit_code(self, proc_info):\n        # Check that process exits with code 0: no error\n        launch_testing.asserts.assertExitCodes(proc_info)\n</code></pre>"},{"location":"contributing/testing-guidelines/integration-testing/#running-the-test","title":"Running the test","text":"<p>Continuing the example from above, first build your package:</p> <pre><code>colcon build --packages-up-to map_loader\nsource install/setup.bash\n</code></pre> <p>Then either execute the component test manually:</p> <pre><code>ros2 test src/universe/autoware.universe/map/map_loader/test/lanelet2_map_loader_launch.test.py\n</code></pre> <p>Or as part of testing the entire package:</p> <pre><code>colcon test --packages-select map_loader\n</code></pre> <p>Verify that the test is executed; e.g.</p> <pre><code>$ colcon test-result --all --verbose\n...\nbuild/map_loader/test_results/map_loader/test_lanelet2_map_loader_launch.test.py.xunit.xml: 1 test, 0 errors, 0 failures, 0 skipped\n</code></pre>"},{"location":"contributing/testing-guidelines/integration-testing/#next-steps","title":"Next steps","text":"<p>The simple test described in Integration test with a single node: component test can be extended in numerous directions, such as testing a node's output.</p>"},{"location":"contributing/testing-guidelines/integration-testing/#testing-the-output-of-a-node","title":"Testing the output of a node","text":"<p>To test while the node is running, create an active test by adding a subclass of Python's <code>unittest.TestCase</code> to <code>*launch.test.py</code>. Some boilerplate code is required to access output by creating a node and a subscription to a particular topic, e.g.</p> <pre><code>import unittest\n\nclass TestRunningDataPublisher(unittest.TestCase):\n\n    @classmethod\n    def setUpClass(cls):\n        cls.context = Context()\n        rclpy.init(context=cls.context)\n        cls.node = rclpy.create_node(\"test_node\", context=cls.context)\n\n    @classmethod\n    def tearDownClass(cls):\n        rclpy.shutdown(context=cls.context)\n\n    def setUp(self):\n        self.msgs = []\n        sub = self.node.create_subscription(\n            msg_type=my_msg_type,\n            topic=\"/info_test\",\n            callback=self._msg_received\n        )\n        self.addCleanup(self.node.destroy_subscription, sub)\n\n    def _msg_received(self, msg):\n        # Callback for ROS 2 subscriber used in the test\n        self.msgs.append(msg)\n\n    def get_message(self):\n        startlen = len(self.msgs)\n\n        executor = rclpy.executors.SingleThreadedExecutor(context=self.context)\n        executor.add_node(self.node)\n\n        try:\n            # Try up to 60 s to receive messages\n            end_time = time.time() + 60.0\n            while time.time() &lt; end_time:\n                executor.spin_once(timeout_sec=0.1)\n                if startlen != len(self.msgs):\n                    break\n\n            self.assertNotEqual(startlen, len(self.msgs))\n            return self.msgs[-1]\n        finally:\n            executor.remove_node(self.node)\n\n    def test_message_content():\n        msg = self.get_message()\n        self.assertEqual(msg, \"Hello, world\")\n</code></pre>"},{"location":"contributing/testing-guidelines/integration-testing/#references","title":"References","text":"<ul> <li>colcon is used to build and run tests.</li> <li>launch testing launches nodes and runs tests.</li> <li>Testing guidelines describes the different types of tests performed in Autoware and links to the corresponding guidelines.</li> </ul>"},{"location":"contributing/testing-guidelines/unit-testing/","title":"Unit testing","text":""},{"location":"contributing/testing-guidelines/unit-testing/#unit-testing","title":"Unit testing","text":"<p>Unit testing is the first phase of testing and is used to validate units of source code such as classes and functions. Typically, a unit of code is tested by validating its output for various inputs. Unit testing helps ensure that the code behaves as intended and prevents accidental changes of behavior.</p> <p>Autoware uses the <code>ament_cmake</code> framework to build and run tests. The same framework is also used to analyze the test results.</p> <p><code>ament_cmake</code> provides several convenience functions to make it easy to register tests in a CMake-based package and to ensure that JUnit-compatible result files are generated. It currently supports a few different testing frameworks like <code>pytest</code>, <code>gtest</code>, and <code>gmock</code>.</p> <p>In order to prevent tests running in parallel from interfering with each other when publishing and subscribing to ROS topics, it is recommended to use commands from <code>ament_cmake_ros</code> to run tests in isolation.</p> <p>See below for an example of using <code>ament_add_ros_isolated_gtest</code> with <code>colcon test</code>. All other tests follow a similar pattern.</p>"},{"location":"contributing/testing-guidelines/unit-testing/#create-a-unit-test-with-gtest","title":"Create a unit test with gtest","text":"<p>In <code>my_cool_pkg/test</code>, create the <code>gtest</code> code file <code>test_my_cool_pkg.cpp</code>:</p> <pre><code>#include \"gtest/gtest.h\"\n#include \"my_cool_pkg/my_cool_pkg.hpp\"\nTEST(TestMyCoolPkg, TestHello) {\nEXPECT_EQ(my_cool_pkg::print_hello(), 0);\n}\n</code></pre> <p>In <code>package.xml</code>, add the following line:</p> <pre><code>&lt;test_depend&gt;ament_cmake_ros&lt;/test_depend&gt;\n</code></pre> <p>Next add an entry under <code>BUILD_TESTING</code> in the <code>CMakeLists.txt</code> to compile the test source files:</p> <pre><code>if(BUILD_TESTING)\n\nament_add_ros_isolated_gtest(test_my_cool_pkg test/test_my_cool_pkg.cpp)\ntarget_link_libraries(test_my_cool_pkg ${PROJECT_NAME})\ntarget_include_directories(test_my_cool_pkg PRIVATE src)  # For private headers.\n...\nendif()\n</code></pre> <p>This automatically links the test with the default main function provided by <code>gtest</code>. The code under test is usually in a different CMake target (<code>${PROJECT_NAME}</code> in the example) and its shared object for linking needs to be added. If the test source files include private headers from the <code>src</code> directory, the directory needs to be added to the include path using <code>target_include_directories()</code> function.</p> <p>To register a new <code>gtest</code> item, wrap the test code with the macro <code>TEST ()</code>. <code>TEST ()</code> is a predefined macro that helps generate the final test code, and also registers a <code>gtest</code> item to be available for execution. The test case name should be in CamelCase, since gtest inserts an underscore between the fixture name and the class case name when creating the test executable.</p> <p><code>gtest/gtest.h</code> also contains predefined macros of <code>gtest</code> like <code>ASSERT_TRUE(condition)</code>, <code>ASSERT_FALSE(condition)</code>, <code>ASSERT_EQ(val1,val2)</code>, <code>ASSERT_STREQ(str1,str2)</code>, <code>EXPECT_EQ()</code>, etc. <code>ASSERT_*</code> will abort the test if the condition is not satisfied, while <code>EXPECT_*</code> will mark the test as failed but continue on to the next test condition.</p> <p>Info</p> <p>More information about <code>gtest</code> and its features can be found in the gtest repo.</p> <p>In the demo <code>CMakeLists.txt</code>, <code>ament_add_ros_isolated_gtest</code> is a predefined macro in <code>ament_cmake_ros</code> that helps simplify adding <code>gtest</code> code. Details can be viewed in ament_add_gtest.cmake.</p>"},{"location":"contributing/testing-guidelines/unit-testing/#build-test","title":"Build test","text":"<p>By default, all necessary test files (<code>ELF</code>, <code>CTestTestfile.cmake</code>, etc.) are compiled by <code>colcon</code>:</p> <pre><code>cd ~/workspace/\ncolcon build --packages-select my_cool_pkg\n</code></pre> <p>Test files are generated under <code>~/workspace/build/my_cool_pkg</code>.</p>"},{"location":"contributing/testing-guidelines/unit-testing/#run-test","title":"Run test","text":"<p>To run all tests for a specific package, call:</p> <pre><code>$ colcon test --packages-select my_cool_pkg\n\nStarting &gt;&gt;&gt; my_cool_pkg\nFinished &lt;&lt;&lt; my_cool_pkg [7.80s]\n\nSummary: 1 package finished [9.27s]\n</code></pre> <p>The test command output contains a brief report of all the test results.</p> <p>To get job-wise information of all executed tests, call:</p> <pre><code>$ colcon test-result --all\n\nbuild/my_cool_pkg/test_results/my_cool_pkg/copyright.xunit.xml: 8 tests, 0 errors, 0 failures, 0 skipped\nbuild/my_cool_pkg/test_results/my_cool_pkg/cppcheck.xunit.xml: 6 tests, 0 errors, 0 failures, 0 skipped\nbuild/my_cool_pkg/test_results/my_cool_pkg/lint_cmake.xunit.xml: 1 test, 0 errors, 0 failures, 0 skipped\nbuild/my_cool_pkg/test_results/my_cool_pkg/my_cool_pkg_exe_integration_test.xunit.xml: 1 test, 0 errors, 0 failures, 0 skipped\nbuild/my_cool_pkg/test_results/my_cool_pkg/test_my_cool_pkg.gtest.xml: 1 test, 0 errors, 0 failures, 0 skipped\nbuild/my_cool_pkg/test_results/my_cool_pkg/xmllint.xunit.xml: 1 test, 0 errors, 0 failures, 0 skipped\n\nSummary: 18 tests, 0 errors, 0 failures, 0 skipped\n</code></pre> <p>Look in the <code>~/workspace/log/test_&lt;date&gt;/&lt;package_name&gt;</code> directory for all the raw test commands, <code>std_out</code>, and <code>std_err</code>. There is also the <code>~/workspace/log/latest_*/</code> directory containing symbolic links to the most recent package-level build and test output.</p> <p>To print the tests' details while the tests are being run, use the <code>--event-handlers console_cohesion+</code> option to print the details directly to the console:</p> <pre><code>$ colcon test --event-handlers console_cohesion+ --packages-select my_cool_pkg\n\n...\ntest 1\n    Start 1: test_my_cool_pkg\n\n1: Test command: /usr/bin/python3 \"-u\" \"~/workspace/install/share/ament_cmake_test/cmake/run_test.py\" \"~/workspace/build/my_cool_pkg/test_results/my_cool_pkg/test_my_cool_pkg.gtest.xml\" \"--package-name\" \"my_cool_pkg\" \"--output-file\" \"~/workspace/build/my_cool_pkg/ament_cmake_gtest/test_my_cool_pkg.txt\" \"--command\" \"~/workspace/build/my_cool_pkg/test_my_cool_pkg\" \"--gtest_output=xml:~/workspace/build/my_cool_pkg/test_results/my_cool_pkg/test_my_cool_pkg.gtest.xml\"\n1: Test timeout computed to be: 60\n1: -- run_test.py: invoking following command in '~/workspace/src/my_cool_pkg':\n1:  - ~/workspace/build/my_cool_pkg/test_my_cool_pkg --gtest_output=xml:~/workspace/build/my_cool_pkg/test_results/my_cool_pkg/test_my_cool_pkg.gtest.xml\n1: [==========] Running 1 test from 1 test case.\n1: [----------] Global test environment set-up.\n1: [----------] 1 test from test_my_cool_pkg\n1: [ RUN      ] test_my_cool_pkg.test_hello\n1: Hello World\n1: [       OK ] test_my_cool_pkg.test_hello (0 ms)\n1: [----------] 1 test from test_my_cool_pkg (0 ms total)\n1:\n1: [----------] Global test environment tear-down\n1: [==========] 1 test from 1 test case ran. (0 ms total)\n1: [  PASSED  ] 1 test.\n1: -- run_test.py: return code 0\n1: -- run_test.py: inject classname prefix into gtest result file '~/workspace/build/my_cool_pkg/test_results/my_cool_pkg/test_my_cool_pkg.gtest.xml'\n1: -- run_test.py: verify result file '~/workspace/build/my_cool_pkg/test_results/my_cool_pkg/test_my_cool_pkg.gtest.xml'\n1/5 Test #1: test_my_cool_pkg ...................   Passed    0.09 sec\n\n...\n\n100% tests passed, 0 tests failed out of 5\n\nLabel Time Summary:\ncopyright     =   0.49 sec*proc (1 test)\ncppcheck      =   0.20 sec*proc (1 test)\ngtest         =   0.05 sec*proc (1 test)\nlint_cmake    =   0.18 sec*proc (1 test)\nlinter        =   1.34 sec*proc (4 tests)\nxmllint       =   0.47 sec*proc (1 test)\n\nTotal Test time (real) =   7.91 sec\n...\n</code></pre>"},{"location":"contributing/testing-guidelines/unit-testing/#code-coverage","title":"Code coverage","text":"<p>Loosely described, a code coverage metric is a measure of how much of the program code has been exercised (covered) during testing.</p> <p>In the Autoware repositories, Codecov is used to automatically calculate coverage of any open pull request.</p> <p>More details about the code coverage metrics can be found in the Codecov documentation.</p>"},{"location":"datasets/","title":"Datasets","text":""},{"location":"datasets/#datasets","title":"Datasets","text":"<p>Autoware partners provide datasets for testing and development. These datasets are available for download here.</p>"},{"location":"datasets/#bus-odd-operational-design-domain-datasets","title":"Bus-ODD (Operational Design Domain) datasets","text":""},{"location":"datasets/#leo-drive-isuzu-sensor-data","title":"Leo Drive - ISUZU sensor data","text":"<p>This dataset contains data from the Isuzu bus used in the Bus ODD project.</p> <p>The data contains data from following sensors:</p> <ul> <li>1 x VLP16</li> <li>2 x VLP32C</li> <li>1 x Applanix POS LV 120 GNSS/INS</li> <li>3 x Lucid Vision Triton 5.4MP cameras (left, right, front)</li> <li>Vehicle status report</li> </ul> <p>It also contains <code>/tf</code> topic for static transformations between sensors.</p>"},{"location":"datasets/#required-message-types","title":"Required message types","text":"<p>The GNSS data is available in <code>sensor_msgs/msg/NavSatFix</code> message type.</p> <p>But also the Applanix raw messages are also included in <code>applanix_msgs/msg/NavigationPerformanceGsof50</code> and <code>applanix_msgs/msg/NavigationSolutionGsof49</code> message types. In order to be able to play back these messages, you need to build and source the <code>applanix_msgs</code> package.</p> <pre><code># Create a workspace and clone the repository\nmkdir -p ~/applanix_ws/src &amp;&amp; cd \"$_\"\ngit clone https://github.com/autowarefoundation/applanix.git\ncd ..\n\n# Build the workspace\ncolcon build --symlink-install --packages-select applanix_msgs\n\n# Source the workspace\nsource ~/applanix_ws/install/setup.bash\n\n# Now you can play back the messages\n</code></pre> <p>Also make sure to source Autoware Universe workspace too.</p>"},{"location":"datasets/#download-instructions","title":"Download instructions","text":"<pre><code># Install awscli\n$ sudo apt update &amp;&amp; sudo apt install awscli -y\n\n# This will download the entire dataset to the current directory.\n# (About 10.9GB of data)\n$ aws s3 sync s3://autoware-files/collected_data/2022-08-22_leo_drive_isuzu_bags/ ./2022-08-22_leo_drive_isuzu_bags  --no-sign-request\n\n# Optionally,\n# If you instead want to download a single bag file, you can get a list of the available files with following:\n$ aws s3 ls s3://autoware-files/collected_data/2022-08-22_leo_drive_isuzu_bags/ --no-sign-request\n   PRE all-sensors-bag1_compressed/\n   PRE all-sensors-bag2_compressed/\n   PRE all-sensors-bag3_compressed/\n   PRE all-sensors-bag4_compressed/\n   PRE all-sensors-bag5_compressed/\n   PRE all-sensors-bag6_compressed/\n   PRE driving_20_kmh_2022_06_10-16_01_55_compressed/\n   PRE driving_30_kmh_2022_06_10-15_47_42_compressed/\n\n# Then you can download a single bag file with the following:\naws s3 sync s3://autoware-files/collected_data/2022-08-22_leo_drive_isuzu_bags/all-sensors-bag1_compressed/ ./all-sensors-bag1_compressed  --no-sign-request\n</code></pre>"},{"location":"datasets/#autocoreai-lidar-ros-2-bag-file-and-pcap","title":"AutoCore.ai - lidar ROS 2 bag file and pcap","text":"<p>This dataset contains pcap files and ros2 bag files from Ouster OS1-64 Lidar. The pcap file and ros2 bag file is recorded in the same time with slight difference in duration.</p> <p>Click here to download (~553MB)</p> <p>Reference Issue</p>"},{"location":"design/","title":"Autoware's Design","text":""},{"location":"design/#autowares-design","title":"Autoware's Design","text":""},{"location":"design/#architecture","title":"Architecture","text":"<p>Core and Universe.</p> <p>Autoware provides the runtimes and technology components by open-source software. The runtimes are based on the Robot Operating System (ROS). The technology components are provided by contributors, which include, but are not limited to:</p> <ul> <li>Sensing<ul> <li>Camera Component</li> <li>LiDAR Component</li> <li>RADAR Component</li> <li>GNSS Component</li> </ul> </li> <li>Computing<ul> <li>Localization Component</li> <li>Perception Component</li> <li>Planning Component</li> <li>Control Component</li> <li>Logging Component</li> <li>System Monitoring Component</li> </ul> </li> <li>Actuation<ul> <li>DBW Component</li> </ul> </li> <li>Tools<ul> <li>Simulator Component</li> <li>Mapping Component</li> <li>Remote Component</li> <li>ML Component</li> <li>Annotation Component</li> <li>Calibration Component</li> </ul> </li> </ul>"},{"location":"design/#concern-assumption-and-limitation","title":"Concern, Assumption, and Limitation","text":"<p>The downside of the microautonomy architecture is that the computational performance of end applications is sacrificed due to its data path overhead attributed to functional modularity. In other words, the trade-off characteristic of the microautonomy architecture exists between computational performance and functional modularity. This trade-off problem can be solved technically by introducing real-time capability. This is because autonomous driving systems are not really designed to be real-fast, that is, low-latency computing is nice-to-have but not must-have. The must-have feature for autonomous driving systems is that the latency of computing is predictable, that is, the systems are real-time. As a whole, we can compromise computational performance to an extent that is predictable enough to meet the given timing constraints of autonomous driving systems, often referred to as deadlines of computation.</p>"},{"location":"design/#design","title":"Design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/#autoware-concepts","title":"Autoware concepts","text":"<p>The Autoware concepts page describes the design philosophy of Autoware. Readers (service providers and all Autoware users) will learn the basic concepts underlying Autoware development, such as microautonomy and the Core/Universe architecture.</p>"},{"location":"design/#autoware-architecture","title":"Autoware architecture","text":"<p>The Autoware architecture page describes an overview of each module that makes up Autoware. Readers (all Autoware users) will gain a high-level picture of how each module that composes Autoware works.</p>"},{"location":"design/#autoware-interfaces","title":"Autoware interfaces","text":"<p>The Autoware interfaces page describes in detail the interface of each module that makes up Autoware. Readers (intermediate developers) will learn how to add new functionality to Autoware and how to integrate their own modules with Autoware.</p>"},{"location":"design/#configuration-management","title":"Configuration management","text":""},{"location":"design/#conclusion","title":"Conclusion","text":""},{"location":"design/autoware-architecture/","title":"Architecture overview","text":""},{"location":"design/autoware-architecture/#architecture-overview","title":"Architecture overview","text":"<p>This page describes the architecture of Autoware.</p>"},{"location":"design/autoware-architecture/#introduction","title":"Introduction","text":"<p>The current Autoware is defined to be a layered architecture that clarifies each module's role and simplifies the interface between them. By doing so:</p> <ul> <li>Autoware's internal processing becomes more transparent.</li> <li>Collaborative development is made easier because of the reduced interdependency between modules.</li> <li>Users can easily replace an existing module (e.g. localization) with their own software component by simply wrapping their software to fit in with Autoware's interface.</li> </ul> <p>Note that the initial focus of this architecture design was solely on driving capability, and so the following features were left as future work:</p> <ul> <li>Fail safe</li> <li>Human Machine Interface</li> <li>Real-time processing</li> <li>Redundant system</li> <li>State monitoring system</li> </ul>"},{"location":"design/autoware-architecture/#high-level-architecture-design","title":"High-level architecture design","text":"<p>Autoware's architecture consists of the following six stacks. Each linked page contains a more detailed set of requirements and use cases specific to that stack:</p> <ul> <li>Sensing design</li> <li>Map design</li> <li>Localization design</li> <li>Perception design</li> <li>Planning design</li> <li>Control design</li> <li>Vehicle Interface design</li> </ul>"},{"location":"design/autoware-architecture/#node-diagram","title":"Node diagram","text":"<p>A diagram showing Autoware's nodes in the default configuration can be found on the Node diagram page. Detailed documents for each node are available in the Autoware Universe docs.</p> <p>Note that Autoware configurations are scalable / selectable and will vary depending on the environment and required use cases.</p>"},{"location":"design/autoware-architecture/#references","title":"References","text":"<ul> <li>The architecture presentation given to the AWF Technical Steering Committee, March 2020</li> </ul>"},{"location":"design/autoware-architecture/control/","title":"Control component design","text":""},{"location":"design/autoware-architecture/control/#control-component-design","title":"Control component design","text":""},{"location":"design/autoware-architecture/control/#abstract","title":"Abstract","text":"<p>This document presents the design concept of the Control Component. The content is as follows:</p> <ul> <li>Autoware Control Design<ul> <li>Outlining the policy for Autoware's control, which deals with only general information for autonomous driving systems and provides generic control commands to the vehicle.</li> </ul> </li> <li>Vehicle Adaptation Design<ul> <li>Describing the policy for vehicle adaptation, which utilizes adapter mechanisms to standardize the characteristics of the vehicle's drive system and integrate it with Autoware.</li> </ul> </li> <li>Control Feature Design<ul> <li>Demonstrating the features provided by Autoware's control.</li> <li>Presenting the approach towards the functions installed in the vehicle such as ABS.</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/control/#autoware-control-design","title":"Autoware Control Design","text":"<p>The Control Component generates the control signal to which the Vehicle Component subscribes. The generated control signals are computed based on the reference trajectories from the Planning Component.</p> <p></p> <p>The Control Component consists of two modules. The <code>trajectory_follower</code> module generates a vehicle control command to follow the reference trajectory received from the planning module. The command includes, for example, the desired steering angle and target speed. The <code>vehicle_command_gate</code> is responsible for filtering the control command to prevent abnormal values and then sending it to the vehicle. This gate also allows switching between multiple sources such as the MRM (minimal risk maneuver) module or some remote control module, in addition to the trajectory follower.</p> <p>The Autoware control system is designed as a platform for automated driving systems that can be compatible with a diverse range of vehicles.</p> <p>The control process in Autoware uses general information (such as target acceleration and deceleration) and no vehicle-specific information (such as brake pressure) is used. Hence it can be adjusted independently of the vehicle's drive interface enabling easy integration or performance tuning.</p> <p>Furthermore, significant differences that affect vehicle motion constraints, such as two-wheel steering or four-wheel steering, are addressed by switching the control vehicle model, achieving control specialized for each characteristic.</p> <p>Autoware's control module outputs the necessary information to control the vehicle as a substitute for a human driver. For example, the control command from the control module looks like the following:</p> <pre><code>- Target steering angle\n- Target steering torque\n- Target speed\n- Target acceleration\n</code></pre> <p>Note that vehicle-specific values such as pedal positions and low-level information such as individual wheel rotation speeds are excluded from the command.</p>"},{"location":"design/autoware-architecture/control/#vehicle-adaptation-design","title":"Vehicle Adaptation Design","text":""},{"location":"design/autoware-architecture/control/#vehicle-interface-adapter","title":"Vehicle interface adapter","text":"<p>Autoware is designed to be an autonomous driving platform able to accommodate vehicles with various drivetrain types.</p> <p>This is an explanation of how Autoware handles the standardization of systems with different vehicle drivetrains. The interfaces for vehicle drivetrains are diverse, including steering angle, steering angular velocity, steering torque, speed, accel/brake pedals, and brake pressure. To accommodate these differences, Autoware adds an adapter module between the control component and the vehicle interface. This module performs the conversion between the proprietary message types used by the vehicle (such as brake pressure) and the generic types used by Autoware (such as desired acceleration). By providing this conversion information, the differences in vehicle drivetrain can be accommodated.</p> <p>If the information is not known in advance, an automatic calibration tool can be used. Calibration will occur within limited degrees of freedom, generating the information necessary for the drivetrain conversion automatically.</p> <p>This configuration is summarized in the following diagram.</p> <p></p>"},{"location":"design/autoware-architecture/control/#examples-of-several-vehicle-interfaces","title":"Examples of several vehicle interfaces","text":"<p>This is an example of the several drivetrain types in the vehicle interface.</p> Vehicle Lateral interface Longitudinal interface Note Lexus Steering angle Accel/brake pedal position Acceleration lookup table conversion for longitudinal JPN TAXI Steering angle Accel/brake pedal position Acceleration lookup table conversion for longitudinal GSM8 Steering EPS voltage Acceleration motor voltage, Deceleration brake hydraulic pressure lookup table and PID conversion for lateral and longitudinal YMC Golfcart Steering angle Velocity Logiees yaw rate Velocity F1 TENTH Steering angle Motor RPM interface code"},{"location":"design/autoware-architecture/control/#control-feature-design","title":"Control Feature Design","text":"<p>The following lists the features provided by Autoware's Control/Vehicle component, as well as the conditions and assumptions required to utilize them effectively.</p> <p>The proper operation of the ODD is limited by factors such as whether the functions are enabled, delay time, calibration accuracy and degradation rate, and sensor accuracy.</p> Feature Description\u3000 Requirements/Assumptions Note \u3000Limitation for now Lateral Control Control the drivetrain system related to lateral vehicle motion Trying to increase the number of vehicle types that can be supported in the future. Only front-steering type is supported. Longitudinal Control Control the drivetrain system related to longitudinal vehicle motion Slope Compensation Supports precise vehicle motion control on slopes Gradient information can be obtained from maps or sensors attached to the chassis If gradient information is not available, the gradient is estimated from the vehicle's pitch angle. Delay Compensation Controls the drivetrain system appropriately in the presence of time delays The drivetrain delay information is provided in advance If there is no delay information, the drivetrain delay is estimated automatically (automatic calibration). However, the effect of delay cannot be completely eliminated, especially in scenarios with sudden changes in speed. Only fixed delay times can be set for longitudinal and lateral drivetrain systems separately. It does not accommodate different delay times for the accelerator and brake. Drivetrain IF Conversion (Lateral Control) Converts the drivetrain-specific information of the vehicle into the drivetrain information used by Autoware (e.g., target steering angular velocity \u2192 steering torque) The conversion information is provided in advance If there is no conversion information, the conversion map is estimated automatically (automatic calibration). The degree of freedom for conversion is limited (2D lookup table + PID FB). Drivetrain IF Conversion (Longitudinal Control) Converts the drivetrain-specific information of the vehicle into the drivetrain information used by Autoware (e.g., target acceleration \u2192 accelerator/brake pedal value) The conversion information is provided in advance If there is no conversion information, the conversion map is estimated automatically (automatic calibration). The degree of freedom for conversion is limited (2D lookup table + PID FB). Automatic Calibration Automatically estimates and applies values such as drivetrain IF conversion map and delay time. The drivetrain status can be obtained (must) Anomaly Detection Notifies when there is a discrepancy in the calibration or unexpected drivetrain behavior The drivetrain status can be obtained (must) Steering Zero Point Correction Corrects the midpoint of the steering to achieve appropriate steering control The drivetrain status can be obtained (must) Steering Deadzone Correction Corrects the deadzone of the steering to achieve appropriate steering control The steering deadzone parameter is provided in advance If the parameter is unknown, the deadzone parameter is estimated from driving information Not available now Steering Deadzone Estimation Dynamically estimates the steering deadzone from driving data Not available now Weight Compensation Performs appropriate vehicle control according to weight Weight information can be obtained from sensors If there is no weight sensor, estimate the weight from driving information. Currently not available Weight Estimation Dynamically estimates weight from driving data Currently not available <p>The list above does not cover wheel control systems such as ABS commonly used in vehicles. Regarding these features, the following considerations are taken into account.</p>"},{"location":"design/autoware-architecture/control/#integration-with-vehicle-side-functions","title":"Integration with vehicle-side functions","text":"<p>ABS (Anti-lock Brake System) and ESC (Electric Stability Control) are two functions that may be pre-installed on a vehicle, directly impacting its controllability. The control modules of Autoware assume that both ABS and ESC are installed on the vehicle and their absence may cause unreliable controls depending on the target ODD. For example, with low-velocity driving in a controlled environment, these functions are not necessary.</p> <p>Also, note that this statement does not negate the development of ABS functionality in autonomous driving systems.</p>"},{"location":"design/autoware-architecture/control/#autoware-capabilities-and-vehicle-requirements","title":"Autoware Capabilities and Vehicle Requirements","text":"<p>As an alternative to human driving, autonomous driving systems essentially aim to handle tasks that humans can perform. This includes not only controlling the steering wheel, accel, and brake, but also automatically detecting issues such as poor brake response or a misaligned steering angle. However, this is a trade-off, as better vehicle performance will lead to superior system behavior, ultimately affecting the design of ODD.</p> <p>On the other hand, for tasks that are not typically anticipated or cannot be handled by a human driver, processing in the vehicle ECU is expected. Examples of such scenarios include cases where the brake response is clearly delayed or when the vehicle rotates due to a single-side tire slipping. These tasks are typically handled by ABS or ESC.</p>"},{"location":"design/autoware-architecture/localization/","title":"Index","text":"<p>LOCALIZATION COMPONENT DESIGN DOC</p>"},{"location":"design/autoware-architecture/localization/#abstract","title":"Abstract","text":""},{"location":"design/autoware-architecture/localization/#1-requirements","title":"1. Requirements","text":"<p>Localization aims to estimate vehicle pose, velocity, and acceleration.</p> <p>Goals:</p> <ul> <li>Propose a system that can estimate vehicle pose, velocity, and acceleration for as long as possible.</li> <li>Propose a system that can diagnose the stability of estimation and send a warning message to the error-monitoring system if the estimation result is unreliable.</li> <li>Design a vehicle localization function that can work with various sensor configurations.</li> </ul> <p>Non-goals:</p> <ul> <li>This design document does not aim to develop a localization system that<ul> <li>is infallible in all environments</li> <li>works outside of the pre-defined ODD (Operational Design Domain)</li> <li>has better performance than is required for autonomous driving</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/localization/#2-sensor-configuration-examples","title":"2. Sensor Configuration Examples","text":"<p>This section shows example sensor configurations and their expected performances. Each sensor has its own advantages and disadvantages, but overall performance can be improved by fusing multiple sensors.</p>"},{"location":"design/autoware-architecture/localization/#3d-lidar-pointcloud-map","title":"3D-LiDAR + PointCloud Map","text":""},{"location":"design/autoware-architecture/localization/#expected-situation","title":"Expected situation","text":"<ul> <li>The vehicle is located in a structure-rich environment, such as an urban area</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-that-can-make-the-system-unstable","title":"Situations that can make the system unstable","text":"<ul> <li>The vehicle is placed in a structure-less environment, such as a rural landscape, highway, or tunnel</li> <li>Environmental changes have occurred since the map was created, such as snow cover or the construction/destruction of buildings.</li> <li>Surrounding objects are occluded</li> <li>The car is surrounded by objects undetectable by LiDAR, e.g., glass windows, reflections, or absorption (dark objects)</li> <li>The environment contains laser beams at the same frequency as the car's LiDAR sensor(s)</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality","title":"Functionality","text":"<ul> <li>The system can estimate the vehicle location on the point cloud map with the error of ~10cm.</li> <li>The system is operable at night.</li> </ul>"},{"location":"design/autoware-architecture/localization/#3d-lidar-or-camera-vector-map","title":"3D-LiDAR or Camera + Vector Map","text":""},{"location":"design/autoware-architecture/localization/#expected-situation_1","title":"Expected situation","text":"<ul> <li>Road with clear white lines and loose curvatures, such as a highway or an ordinary local road.</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-that-can-make-the-system-unstable_1","title":"Situations that can make the system unstable","text":"<ul> <li>White lines are scratchy or covered by rain or snow</li> <li>Tight curvature such as intersections</li> <li>Large reflection change of the road surface caused by rain or paint</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionalities","title":"Functionalities","text":"<ul> <li>Correct vehicle positions along the lateral direction.</li> <li>Pose correction along the longitudinal can be inaccurate, but can be resolved by fusing with GNSS.</li> </ul>"},{"location":"design/autoware-architecture/localization/#gnss","title":"GNSS","text":""},{"location":"design/autoware-architecture/localization/#expected-situation_2","title":"Expected situation","text":"<ul> <li>The vehicle is placed in an open environment with few to no surrounding objects, such as a rural landscape.</li> </ul>"},{"location":"design/autoware-architecture/localization/#situation-that-can-make-the-system-unstable","title":"Situation that can make the system unstable","text":"<ul> <li>GNSS signals are blocked by surrounding objects, e.g., tunnels or buildings.</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality_1","title":"Functionality","text":"<ul> <li>The system can estimate vehicle position in the world coordinate within an error of ~10m.</li> <li>With a RKT-GNSS (Real Time Kinematic Global Navigation Satellite System) attached, the accuracy can be improved to ~10cm.</li> <li>A system with this configuration can work without environment maps (both point cloud and vector map types).</li> </ul>"},{"location":"design/autoware-architecture/localization/#camera-visual-odometry-visual-slam","title":"Camera (Visual Odometry, Visual SLAM)","text":""},{"location":"design/autoware-architecture/localization/#expected-situation_3","title":"Expected situation","text":"<ul> <li>The vehicle is placed in an environment with rich visual features, such as an urban area.</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-that-can-make-the-system-unstable_2","title":"Situations that can make the system unstable","text":"<ul> <li>The vehicle is placed in a texture-less environment.</li> <li>The vehicle is surrounded by other objects.</li> <li>The camera observes significant illumination changes, such as those caused by sunshine, headlights from other vehicles or when approaching the exit of a tunnel.</li> <li>The vehicle is placed in a dark environment.</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality_2","title":"Functionality","text":"<ul> <li>The system can estimate odometry by tracking visual features.</li> </ul>"},{"location":"design/autoware-architecture/localization/#wheel-speed-sensor","title":"Wheel speed sensor","text":""},{"location":"design/autoware-architecture/localization/#expected-situation_4","title":"Expected situation","text":"<ul> <li>The vehicle is running on a flat and smooth road.</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-that-can-make-the-system-unstable_3","title":"Situations that can make the system unstable","text":"<ul> <li>The vehicle is running on a slippery or bumpy road, which can cause incorrect observations of wheel speed.</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality_3","title":"Functionality","text":"<ul> <li>The system can acquire the vehicle velocity and estimate distance traveled.</li> </ul>"},{"location":"design/autoware-architecture/localization/#imu","title":"IMU","text":""},{"location":"design/autoware-architecture/localization/#expected-environments","title":"Expected environments","text":"<ul> <li>Flat, smooth roads</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-that-can-make-the-system-unstable_4","title":"Situations that can make the system unstable","text":"<ul> <li>IMUs have a bias1 that is dependent on the surrounding temperature, and can cause incorrect sensor observation or odometry drift.</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality_4","title":"Functionality","text":"<ul> <li>The system can observe acceleration and angular velocity.</li> <li>By integrating these observations, the system can estimate the local pose change and realize dead-reckoning</li> </ul>"},{"location":"design/autoware-architecture/localization/#geomagnetic-sensor","title":"Geomagnetic sensor","text":""},{"location":"design/autoware-architecture/localization/#expected-situation_5","title":"Expected situation","text":"<ul> <li>The vehicle is placed in an environment with low magnetic noise</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-that-can-make-the-system-unstable_5","title":"Situations that can make the system unstable","text":"<ul> <li>The vehicle is placed in an environment with high magnetic noise, such as one containing buildings or structures with reinforced steel or other materials that generate electromagnetic waves.</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality_5","title":"Functionality","text":"<ul> <li>The system can estimate the vehicle's direction in the world coordinate system.</li> </ul>"},{"location":"design/autoware-architecture/localization/#magnetic-markers","title":"Magnetic markers","text":""},{"location":"design/autoware-architecture/localization/#expected-situation_6","title":"Expected situation","text":"<ul> <li>The car is placed in an environment with magnetic markers installed.</li> </ul>"},{"location":"design/autoware-architecture/localization/#situations-where-the-system-becomes-unstable","title":"Situations where the system becomes unstable","text":"<ul> <li>The markers are not maintained.</li> </ul>"},{"location":"design/autoware-architecture/localization/#functionality_6","title":"Functionality","text":"<ul> <li>Vehicle location can be obtained on the world coordinate by detecting the magnetic markers.</li> <li>The system can work even if the road is covered with snow.</li> </ul>"},{"location":"design/autoware-architecture/localization/#3-requirements","title":"3. Requirements","text":"<ul> <li>By implementing different modules, various sensor configurations and algorithms can be used.</li> <li>The localization system can start pose estimation from an ambiguous initial location.</li> <li>The system can produce a reliable initial location estimation.</li> <li>The system can manage the state of the initial location estimation (uninitialized, initializable, or non-initializable) and can report to the error monitor.</li> </ul>"},{"location":"design/autoware-architecture/localization/#4-architecture","title":"4. Architecture","text":""},{"location":"design/autoware-architecture/localization/#abstract_1","title":"Abstract","text":"<p>Two architectures are defined, \"Required\" and \"Recommended\". However, the \"Required\" architecture only contains the inputs and outputs necessary to accept various localization algorithms. To improve the reusability of each module, the required components are defined in the \"Recommended\" architecture section along with a more detailed explanation.</p>"},{"location":"design/autoware-architecture/localization/#required-architecture","title":"Required Architecture","text":""},{"location":"design/autoware-architecture/localization/#input","title":"Input","text":"<ul> <li>Sensor message<ul> <li>e.g., LiDAR, camera, GNSS, IMU, CAN Bus, etc.</li> <li>Data types should be ROS primitives for reusability</li> </ul> </li> <li>Map data<ul> <li>e.g., point cloud map, lanelet2 map, feature map, etc.</li> <li>The map format should be chosen based on use case and sensor configuration</li> <li>Note that map data is not required for some specific cases (e.g., GNSS-only localization)</li> </ul> </li> <li>tf, static_tf<ul> <li>map frame</li> <li>base_link frame</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/localization/#output","title":"Output","text":"<ul> <li>Pose with covariance stamped<ul> <li>Vehicle pose, covariance, and timestamp on the map coordinate</li> <li>50Hz~ frequency (depending on the requirements of the Planning and Control components)</li> </ul> </li> <li>Twist with covariance stamped<ul> <li>Vehicle velocity, covariance, and timestamp on the base_link coordinate</li> <li>50Hz~ frequency</li> </ul> </li> <li>Accel with covariance stamped<ul> <li>Acceleration, covariance, and timestamp on the base_link coordinate</li> <li>50Hz~ frequency</li> </ul> </li> <li>Diagnostics<ul> <li>Diagnostics information that indicates if the localization module works properly</li> </ul> </li> <li>tf<ul> <li>tf of map to base_link</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/localization/#recommended-architecture","title":"Recommended Architecture","text":""},{"location":"design/autoware-architecture/localization/#pose-estimator","title":"Pose Estimator","text":"<ul> <li>Estimates the vehicle pose on the map coordinate by matching external sensor observation to the map</li> <li>Provides the obtained pose and its covariance to <code>PoseTwistFusionFilter</code></li> </ul>"},{"location":"design/autoware-architecture/localization/#twist-accel-estimator","title":"Twist-Accel Estimator","text":"<ul> <li>Produces the vehicle velocity, angular velocity, acceleration, angular acceleration, and their covariances<ul> <li>It is possible to create a single module for both twist and acceleration or to create two separate modules - the choice of architecture is up to the developer</li> </ul> </li> <li>The twist estimator produces velocity and angular velocity from internal sensor observation</li> <li>The accel estimator produces acceleration and angular acceleration from internal sensor observations</li> </ul>"},{"location":"design/autoware-architecture/localization/#kinematics-fusion-filter","title":"Kinematics Fusion Filter","text":"<ul> <li>Produces the likeliest pose, velocity, acceleration, and their covariances, computed by fusing two kinds of information:<ul> <li>The pose obtained from the pose estimator.</li> <li>The velocity and acceleration obtained from the twist-accel estimator</li> </ul> </li> <li>Produces tf of map to base_link according to the pose estimation result</li> </ul>"},{"location":"design/autoware-architecture/localization/#localization-diagnostics","title":"Localization Diagnostics","text":"<ul> <li>Monitors and guarantees the stability and reliability of pose estimation by fusing information obtained from multiple localization modules</li> <li>Reports error status to the error monitor</li> </ul>"},{"location":"design/autoware-architecture/localization/#tf-tree","title":"TF tree","text":"frame meaning earth ECEF (Earth Centered Earth Fixed\uff09 map Origin of the map coordinate (ex. MGRS origin) viewer User-defined frame for rviz base_link Reference pose of the ego-vehicle (projection of the rear-axle center onto the ground surface) sensor Reference pose of each sensor <p>Developers can optionally add other frames such as odom or base_footprint as long as the tf structure above is maintained.</p>"},{"location":"design/autoware-architecture/localization/#the-localization-modules-ideal-functionality","title":"The localization module's ideal functionality","text":"<ul> <li>The localization module should provide pose, velocity, and acceleration for control, planning, and perception.</li> <li>Latency and stagger should be sufficiently small or adjustable such that the estimated values can be used for control within the ODD (Operational Design Domain).</li> <li>The localization module should produce the pose on a fixed coordinate frame.</li> <li>Sensors should be independent of each other so that they can be easily replaced.</li> <li>The localization module should provide a status indicating whether or not the autonomous vehicle can operate with the self-contained function or map information.</li> <li>Tools or manuals should describe how to set proper parameters for the localization module</li> <li>Valid calibration parameters should be provided to align different frame or pose coordinates and sensor timestamps.</li> </ul>"},{"location":"design/autoware-architecture/localization/#kpi","title":"KPI","text":"<p>To maintain sufficient pose estimation performance for safe operation, the following metrics are considered:</p> <ul> <li>Safety<ul> <li>The distance traveled within the ODD where pose estimation met the required accuracy, divided by the overall distance traveled within the ODD, as a percentage.</li> <li>The anomaly detection rate for situations where the localization module cannot estimate pose within the ODD</li> <li>The accuracy of detecting when the vehicle goes outside of the ODD, as a percentage.</li> </ul> </li> <li>Computational load</li> <li>Latency</li> </ul>"},{"location":"design/autoware-architecture/localization/#5-interface-and-data-structure","title":"5. Interface and Data Structure","text":""},{"location":"design/autoware-architecture/localization/#6-concerns-assumptions-and-limitations","title":"6. Concerns, Assumptions, and Limitations","text":""},{"location":"design/autoware-architecture/localization/#prerequisites-of-sensors-and-inputs","title":"Prerequisites of sensors and inputs","text":""},{"location":"design/autoware-architecture/localization/#sensor-prerequisites","title":"Sensor prerequisites","text":"<ul> <li>Input data is not defective.<ul> <li>Internal sensor observation such as IMU continuously keeps the proper frequency.</li> </ul> </li> <li>Input data has correct and exact time stamps.<ul> <li>Estimated poses can be inaccurate or unstable if the timestamps are not exact.</li> </ul> </li> <li>Sensors are correctly mounted with exact positioning and accessible from TF.<ul> <li>If the sensor positions are inaccurate, estimation results may be incorrect or unstable.</li> <li>A sensor calibration framework is required to properly obtain the sensor positions.</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/localization/#map-prerequisites","title":"Map prerequisites","text":"<ul> <li>Sufficient information is contained within the map.<ul> <li>Pose estimation might be unstable if there is insufficient information in the map.</li> <li>A testing framework is necessary to check if the map has adequate information for pose estimation.</li> </ul> </li> <li>Map does not differ greatly from the actual environment.<ul> <li>Pose estimation might be unstable if the actual environment has different objects from the map.</li> <li>Maps need updates according to new objects and seasonal changes.</li> </ul> </li> <li>Maps must be aligned to a uniform coordinate, or an alignment framework is in place.<ul> <li>If multiple maps with different coordinate systems are used, the misalignment between them can affect the localization performance.</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/localization/#computational-resources","title":"Computational resources","text":"<ul> <li>Sufficient computational resources should be provided to maintain accuracy and computation speed.</li> </ul> <ol> <li> <p>For more details about bias, refer to the VectorNav IMU specifications page.\u00a0\u21a9</p> </li> </ol>"},{"location":"design/autoware-architecture/map/","title":"Map component design","text":""},{"location":"design/autoware-architecture/map/#map-component-design","title":"Map component design","text":""},{"location":"design/autoware-architecture/map/#1-overview","title":"1. Overview","text":"<p>Autoware relies on high-definition point cloud maps and vector maps of the driving environment to perform various tasks such as localization, route planning, traffic light detection, and predicting the trajectories of pedestrians and other vehicles.</p> <p>This document describes the design of map component of Autoware, including its requirements, architecture design, features, data formats, and interface to distribute map information to the rest of autonomous driving stack.</p>"},{"location":"design/autoware-architecture/map/#2-requirements","title":"2. Requirements","text":"<p>Map should provide two types of information to the rest of the stack:</p> <ul> <li>Semantic information about roads as a vector map</li> <li>Geometric information about the environment as a point cloud map (optional)</li> </ul> <p>A vector map contains highly accurate information about a road network, lane geometry, and traffic lights. It is required for route planning, traffic light detection, and predicting the trajectories of other vehicles and pedestrians.</p> <p>A 3D point cloud map is primarily used for LiDAR-based localization and part of perception in Autoware. In order to determine the current position and orientation of the vehicle, a live scan captured from one or more LiDAR units is matched against a pre-generated 3D point cloud map. Therefore, an accurate point cloud map is crucial for good localization results. However, if the vehicle has an alternate localization method with enough accuracy, for example using camera-based localization, point cloud map may not be required to use Autoware.</p>"},{"location":"design/autoware-architecture/map/#3-architecture","title":"3. Architecture","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/map/#4-features","title":"4. Features","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/map/#5-map-specification","title":"5. Map Specification","text":""},{"location":"design/autoware-architecture/map/#point-cloud-map","title":"Point Cloud Map","text":"<p>The point cloud map must be supplied as a file with the following requirements:</p> <ul> <li>It must be in the PCD (Point Cloud Data) file format, but can be a single PCD file or divided into multiple PCD files.</li> <li>Each point in the map must contain X, Y, and Z coordinates.</li> <li>An intensity or RGB value for each point may be optionally included.</li> <li>It must cover the entire operational area of the vehicle. It is also recommended to include an additional buffer zone according to the detection range of sensors attached to the vehicle.</li> <li>Its resolution should be at least 0.2 m to yield reliable localization results.</li> <li>It can be in either local or global coordinates, but must be in global coordinates (georeferenced) to use GNSS data for localization.</li> </ul> <p>Note</p> <p>Three global coordinate systems are currently supported by Autoware, including Military Grid Reference System (MGRS), Universal Transverse Mercator (UTM), and Japan Rectangular Coordinate System. However, MGRS is a preferred coordinate system for georeferenced maps. In a map with MGRS coordinate system, the X and Y coordinates of each point represent the point's location within the 100,000-meter square, while the Z coordinate represents the point's elevation.</p> <p>If it is split into a single file, Autoware assumes the following directory structure by default.</p> <pre><code>sample-map-rosbag\n\u251c\u2500\u2500 lanelet2_map.osm\n\u251c\u2500\u2500 pointcloud_map.pcd\n</code></pre> <p>If it is split into multiple files, Autoware assumes the following directory structure by default.</p> <pre><code>sample-map-rosbag\n\u251c\u2500\u2500 lanelet2_map.osm\n\u251c\u2500\u2500 pointcloud_map\n\u251c\u2500\u2500 pcd_00.pcd\n\u251c\u2500\u2500 pcd_01.pcd\n\u251c\u2500\u2500 pcd_02.pcd\n\u251c\u2500\u2500 ...\n\u2514\u2500\u2500 pointcloud_map_metadata.yaml\n</code></pre> <p>Note that, if you split the map into multiple files, you must meet the following additional conditions:</p> <ul> <li>It must be split by lines parallel to the x-y axis.</li> <li>Additional metadata must be provided as well.</li> </ul> <p>Metadata should look like as follows:</p> <pre><code>x_resolution: 100.0\ny_resolution: 150.0\nA.pcd: [1200, 2500] # -&gt; 1200 &lt; x &lt; 1300, 2500 &lt; y &lt; 2650\nB.pcd: [1300, 2500] # -&gt; 1300 &lt; x &lt; 1400, 2500 &lt; y &lt; 2650\nC.pcd: [1200, 2650] # -&gt; 1200 &lt; x &lt; 1300, 2650 &lt; y &lt; 2800\nD.pcd: [1400, 2650] # -&gt; 1400 &lt; x &lt; 1500, 2650 &lt; y &lt; 2800\n</code></pre> <p>You may use pointcloud_divider from MAP IV for dividing pointcloud map as well as generating the compatible metadata.yaml.</p>"},{"location":"design/autoware-architecture/map/#vector-map","title":"Vector Map","text":"<p>The vector cloud map must be supplied as a file with the following requirements:</p> <ul> <li>It must be in Lanelet2 format, with additional modifications required by Autoware.</li> <li>It must contain the shape and position information of lanes, traffic lights, stop lines, crosswalks, parking spaces, and parking lots.</li> <li>Except at the beginning or end of a road, each lanelet in the map must be correctly connected to its predecessor, successors, left neighbor, and right neighbor.</li> <li>Each lanelet in the map must contain traffic rule information including its speed limit, right of way, traffic direction, associated traffic lights, stop lines, and traffic signs.</li> <li>It must cover the entire operational area of the vehicle.</li> </ul> <p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/node-diagram/","title":"Node diagram","text":""},{"location":"design/autoware-architecture/node-diagram/#node-diagram","title":"Node diagram","text":"<p>This page depicts the node diagram designs for Autoware Core/Universe architecture.</p>"},{"location":"design/autoware-architecture/node-diagram/#autoware-core","title":"Autoware Core","text":"<p>TBD.</p>"},{"location":"design/autoware-architecture/node-diagram/#autoware-universe","title":"Autoware Universe","text":"<p>Open in draw.io for fullscreen</p> <p>Note that the diagram is for reference. We are planning to update this diagram every release and may have old information between the releases. If you wish to check the latest node diagram use rqt_graph after launching the Autoware.</p>"},{"location":"design/autoware-architecture/perception/","title":"Perception component design","text":""},{"location":"design/autoware-architecture/perception/#perception-component-design","title":"Perception component design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/planning/","title":"Planning component design","text":""},{"location":"design/autoware-architecture/planning/#planning-component-design","title":"Planning component design","text":""},{"location":"design/autoware-architecture/planning/#overview","title":"Overview","text":"<p>The Planning component generates the trajectory message that will be subscribed to by the Control component based on the environmental state obtained from the Localization and the Perception components.</p>"},{"location":"design/autoware-architecture/planning/#requirements","title":"Requirements","text":"<p>The goal of the Planning component is to generate a trajectory (path and velocity) of the ego vehicle that is safe and well-regulated while satisfying the given mission.</p> <p>Goals:</p> <ul> <li>The basic functions are provided so that a simple ODD can be defined.</li> <li>The functionality is modularized to accommodate the third-party components. That is, a complicated or realistic ODD needs not be defined by the basic functions provided by default.</li> <li>The capability is extensible with the third-party components or the decision of human operators.</li> <li>The mechanism and policy are separated to allow the system or operators to change the behavior of the ego vehicle. Ultimately speaking, the policy can be set to crash an obstacle and the mechanism always follows. Otherwise, the system is not safe from the design point of view.</li> </ul> <p>Non-goals:</p> <ul> <li>The Planning component is not self-contained but can be extended with third parties.</li> <li>The Planning component is not aimed at the complete functionality and capability.</li> <li>The Planning component is not designed to always outperform human drivers.</li> <li>The Planning component is not capable of \u201cnever crashes\u201d.</li> </ul>"},{"location":"design/autoware-architecture/planning/#high-level-architecture","title":"High-level architecture","text":"<p>This diagram describes the high-level architecture of the Planning Component.</p> <p></p> <p>The Planning component consists of the following sub-components:</p> <ul> <li>Mission Planning: Calculates the route based on the given goal and map information.</li> <li>Scenario Planning: Determines the trajectory based on the current scenario, such as Lane Driving or Parking.<ul> <li>Lane Driving: Calculates the trajectory for driving within constructed lanes.<ul> <li>Behavior Planner: Calculates suitable trajectory based on safety considerations and traffic rules.</li> <li>Motion Planner: Calculates suitable trajectory for the vehicle by taking into account safety factors, vehicle motion considerations, and instructions from the behavior planner.</li> </ul> </li> <li>Parking: Calculates the trajectory for parking in unstructured areas.</li> </ul> </li> <li>Validation: Verifies the safety of the trajectory.</li> </ul> <p>Each component contains some modules that can be dynamically loaded and unloaded based on the situation. For instance, the Behavior Planning component includes modules such as lane change, intersection, and crosswalk modules.</p> <p>Our planning components are built based on the microautonomy architecture with Autoware. We adopt a modular system framework where the tasks are implemented as modules that can be dynamically loaded and unloaded to achieve different features depending on the given use cases.</p>"},{"location":"design/autoware-architecture/planning/#component-interface","title":"Component interface","text":"<p>This section describes the inputs and outputs of the Planning Component and of its internal modules. See the Planning Component Interface page for the current implementation.</p>"},{"location":"design/autoware-architecture/planning/#input-to-the-planning-component","title":"Input to the planning component","text":"<ul> <li>From Map<ul> <li>Vector map: Contains all static information about the environment, including lane connection information for route planning, lane geometry for generating a reference path, and traffic rule-related information.</li> </ul> </li> <li>From Perception<ul> <li>Detected object information: Provides real-time information about objects that cannot be known in advance, such as pedestrians and other vehicles. The Planning Component plans maneuvers to avoid collisions with these objects.</li> <li>Detected obstacle information: Supplies real-time information about the location of obstacles, which is more primitive than Detected Object and used for emergency stops and other safety measures.</li> <li>Occupancy map information: Offers real-time information about the presence of pedestrians and other vehicles and occluded area information.</li> <li>Traffic light recognition result: Provides the current state of each traffic light in real time. The Planning Component extracts relevant information for the planned path and determines whether to stop at intersections.</li> </ul> </li> <li>From Localization<ul> <li>Vehicle motion information: Includes the ego vehicle's position, velocity, acceleration, and other motion-related data.</li> </ul> </li> <li>From System<ul> <li>Operation mode: Indicates whether the vehicle is operating in Autonomous mode.</li> </ul> </li> <li>From Human Machine Interface (HMI)<ul> <li>Feature execution: Allows for executing/authorizing autonomous driving operations, such as lane changes or entering intersections, by human operators.</li> </ul> </li> <li>From API Layer<ul> <li>Goal: Represents the final position that the Planning Component aims to reach.</li> <li>Checkpoint: Represents a midpoint along the route to the destination. This is used during route calculation.</li> <li>Velocity limit: Sets the maximum speed limit for the vehicle.</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/planning/#output-from-the-planning-component","title":"Output from the planning component","text":"<ul> <li>To Control<ul> <li>Trajectory: Provides a smooth sequence of pose, twist, and acceleration that the Control Component must follow. The trajectory is typically 10 seconds long with a 0.1-second resolution.</li> <li>Turn Signals: Controls the vehicle's turn indicators, such as right, left, hazard, etc. based on the planned maneuvers.</li> </ul> </li> <li>To System<ul> <li>Diagnostics: Reports the state of the Planning Component, indicating whether the processing is running correctly and whether a safe plan is being generated.</li> </ul> </li> <li>To Human Machine Interface (HMI)<ul> <li>Feature execution availability: Indicates the status of operations that can be executed or are required, such as lane changes or entering intersections.</li> <li>Trajectory candidate: Shows the potential trajectory that will be executed after the user's execution.</li> </ul> </li> <li>To API Layer<ul> <li>Planning factors: Provides information about the reasoning behind the current planning behavior. This may include the position of target objects to avoid, obstacles that led to the decision to stop, and other relevant information.</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/planning/#internal-interface-in-the-planning-component","title":"Internal interface in the planning component","text":"<ul> <li>Mission Planning to Scenario Planning<ul> <li>Route: Offers guidance for the path that needs to be followed from the starting point to the destination. This path is determined based on information such as lane IDs defined on the map. At the route level, it doesn't explicitly indicate which specific lanes to take, and the route can contain multiple lanes.</li> </ul> </li> <li>Behavior Planning to Motion Planning<ul> <li>Path: Provides a rough position and velocity to be followed by the vehicle. These path points are usually defined with an interval of about 1 meter. Although other interval distances are possible, it may impact the precision or performance of the planning component.</li> <li>Drivable area: Defines regions where the vehicle can drive, such as within lanes or physically drivable areas. It assumes that the motion planner will calculate the final trajectory within this defined area.</li> </ul> </li> <li>Scenario Planning to Validation<ul> <li>Trajectory: Defines the desired positions, velocities, and accelerations which the Control Component will try to follow. Trajectory points are defined at intervals of approximately 0.1 seconds based on the trajectory velocities.</li> </ul> </li> <li>Validation to Control Component<ul> <li>Trajectory: Same as above but with some additional safety considerations.</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/planning/#how-to-add-new-modules-wip","title":"How to add new modules (WIP)","text":"<p>As mentioned in the goal session, this planning module is designed to be extensible by third-party components. For specific instructions on how to add new modules and expand its functionality, please refer to the provided documentation or guidelines (WIP).</p>"},{"location":"design/autoware-architecture/planning/#supported-functions","title":"Supported Functions","text":"Feature Description Requirements Figure Route Planning Plan route from the ego vehicle position to the destination.  Reference implementation is in Mission Planner, enabled by launching the <code>mission_planner</code> node. - Lanelet map (driving lanelets) Path Planning from Route Plan path to be followed from the given route.   Reference implementation is in Behavior Path Planner. - Lanelet map (driving lanelets) Obstacle Avoidance Plan path to avoid obstacles by steering operation.   Reference implementation is in Avoidance, Obstacle Avoidance Planner. Enable flag in parameter: <code>launch obstacle_avoidance_planner true</code> - objects information Path Smoothing Plan path to achieve smooth steering.   Reference implementation is in Obstacle Avoidance Planner. - Lanelet map (driving lanelet) Narrow Space Driving Plan path to drive within the drivable area. Furthermore, when it is not possible to drive within the drivable area, stop the vehicle to avoid exiting the drivable area.   Reference implementation is in Obstacle Avoidance Planner. - Lanelet map (high-precision lane boundaries) Lane Change Plan path for lane change to reach the destination.   Reference implementation is in Lane Change. Enable flag in both parameters: - Lanelet map (driving lanelets) Pull Over Plan path for pull over to park at the road shoulder.   Reference implementation is in Goal Planner. - Lanelet map (shoulder lane) Pull Out Plan path for pull over to start from the road shoulder.   Reference implementation is in Pull Out Module. - Lanelet map (shoulder lane) Path Shift Plan path in lateral direction in response to external instructions.   Reference implementation is in Side Shift Module. - None Obstacle Stop Plan velocity to stop for an obstacle on the path.   Reference implementation is in Obstacle Stop Planner, Obstacle Cruise Planner. <code>launch obstacle_stop_planner</code> and enable flag: <code>TODO</code>, <code>launch obstacle_cruise_planner</code> and enable flag: <code>TODO</code> - objects information Obstacle Deceleration Plan velocity to decelerate for an obstacle located around the path.   Reference implementation is in Obstacle Stop Planner, Obstacle Cruise Planner. - objects information Adaptive Cruise Control Plan velocity to follow the vehicle driving in front of the ego vehicle.   Reference implementation is in Obstacle Stop Planner, Obstacle Cruise Planner. - objects information Decelerate for cut-in vehicles Plan velocity to avoid a risk for cutting-in vehicle to ego lane.   Reference implementation is in Obstacle Cruise Planner. - objects information Surround Check at starting Plan velocity to prevent moving when an obstacle exists around the vehicle.   Reference implementation is in Surround Obstacle Checker. Enable flag in parameter: <code>use_surround_obstacle_check true</code> in tier4_planning_component.launch.xml - objects information Curve Deceleration Plan velocity to decelerate the speed on a curve.   Reference implementation is in Motion Velocity Smoother. - None Curve Deceleration for Obstacle Plan velocity to decelerate the speed on a curve for a risk of obstacle collision around the path.   Reference implementation is in Obstacle Velocity Limiter. - objects information  - Lanelet map (static obstacle) Crosswalk Plan velocity to stop or decelerate for pedestrians approaching or walking on a crosswalk.   Reference implementation is in Crosswalk Module. - objects information  - Lanelet map (pedestrian crossing) Intersection Oncoming Vehicle Check Plan velocity for turning right/left at intersection to avoid a risk with oncoming other vehicles.   Reference implementation is in Intersection Module. - objects information  - Lanelet map (intersection lane and yield lane) Intersection Blind Spot Check Plan velocity for turning right/left at intersection to avoid a risk with other vehicles or motorcycles coming from behind blind spot.   Reference implementation is in Blind Spot Module. - objects information  - Lanelet map (intersection lane) Intersection Occlusion Check Plan velocity for turning right/left at intersection to avoid a risk with the possibility of coming vehicles from occlusion area.   Reference implementation is in Intersection Module. - objects information  - Lanelet map (intersection lane) Intersection Traffic Jam Detection Plan velocity for intersection not to enter the intersection when a vehicle is stopped ahead for a traffic jam.   Reference implementation is in Intersection Module. - objects information  - Lanelet map (intersection lane) Traffic Light Plan velocity for intersection according to a traffic light signal.   Reference implementation is in Traffic Light Module. - Traffic light color information Run-out Check Plan velocity to decelerate for the possibility of nearby objects running out into the path.   Reference implementation is in Run Out Module. - objects information Stop Line Plan velocity to stop at a stop line.   Reference implementation is in Stop Line Module. - Lanelet map (stop line) Occlusion Spot Check Plan velocity to decelerate for objects running out from occlusion area, for example, from behind a large vehicle.   Reference implementation is in Occlusion Spot Module. - objects information  - Lanelet map (private/public lane) No Stop Area Plan velocity not to stop in areas where stopping is prohibited, such as in front of the fire station entrance.   Reference implementation is in No Stopping Area Module. - Lanelet map (no stopping area) Merge from Private Area to Public Road Plan velocity for entering the public road from a private driveway to avoid a risk of collision with pedestrians or other vehicles.   Reference implementation is in Merge from Private Area Module. - objects information  - Lanelet map (private/public lane) WIP Speed Bump Plan velocity to decelerate for speed bumps.   Reference implementation is in Speed Bump Module. - Lanelet map (speed bump) Detection Area Plan velocity to stop at the corresponding stop when an object exist in the designated detection area.   Reference implementation is in Detection Area Module. - Lanelet map (detection area) No Drivable Lane Plan velocity to stop before exiting the area designated by ODD (Operational Design Domain) or stop the vehicle if autonomous mode started in out of ODD lane.   Reference implementation is in No Drivable Lane Module. - Lanelet map (no drivable lane) Collision Detection when deviating from lane Plan velocity to avoid conflict with other vehicles driving in the another lane when the ego vehicle is deviating from own lane.   Reference implementation is in Out of Lane Module. - objects information  - Lanelet map (driving lane) WIP Parking Plan path and velocity for given goal in parking area.   Reference implementation is in Free Space Planner. - objects information  - Lanelet map (parking area) Autonomous Emergency Braking (AEB) Perform an emergency stop if a collision with an object ahead is anticipated. It is noted that this function is expected as a final safety layer, and this should work even in the event of failures in the Localization or Perception system.   Reference implementation is in Out of Lane Module. - Primitive objects Minimum Risk Maneuver (MRM) Provide appropriate MRM (Minimum Risk Maneuver) instructions when a hazardous event occurs. For example, when a sensor trouble found, send an instruction for emergency braking, moderate stop, or pulling over to the shoulder, depending on the severity of the situation.   Reference implementation is in TODO - TODO WIP Trajectory Validation Check the planned trajectory is safe. If it is unsafe, take appropriate action, such as modify the trajectory, stop sending the trajectory or report to the autonomous driving system.   Reference implementation is in Planning Validator. - None Running Lane Map Generation Generate lane map from localization data recorded in manual driving.   Reference implementation is in WIP - None WIP Running Lane Optimization Optimize the centerline (reference path) of the map to make it smooth considering the vehicle kinematics.   Reference implementation is in Static Centerline Optimizer. - Lanelet map (driving lanes) WIP"},{"location":"design/autoware-architecture/planning/#reference-implementation","title":"Reference Implementation","text":"<p>The following diagram describes the reference implementation of the Planning component. By adding new modules or extending the functionalities, various ODDs can be supported.</p> <p>Note that some implementation does not adhere to the high-level architecture design and require updating.</p> <p></p> <p>For more details, please refer to the design documents in each package.</p> <ul> <li>mission_planner: calculate route from start to goal based on the map information.</li> <li>behavior_path_planner: calculates path and drivable area based on the traffic rules.<ul> <li>lane_following</li> <li>lane_change</li> <li>avoidance</li> <li>pull_over</li> <li>pull_out</li> <li>side_shift</li> </ul> </li> <li>behavior_velocity_planner: calculates max speed based on the traffic rules.<ul> <li>detection_area</li> <li>blind_spot</li> <li>cross_walk</li> <li>stop_line</li> <li>traffic_light</li> <li>intersection</li> <li>no_stopping_area</li> <li>virtual_traffic_light</li> <li>occlusion_spot</li> <li>run_out</li> <li>no_drivable_lane</li> </ul> </li> <li>obstacle_avoidance_planner: calculate path shape under obstacle and drivable area constraints</li> <li>surround_obstacle_checker: keeps the vehicle being stopped when there are obstacles around the ego-vehicle. It works only when the vehicle is stopped.</li> <li>obstacle_stop_planner: When there are obstacles on or near the trajectory, it calculates the maximum velocity of the trajectory points depending on the situation: stopping, slowing down, or adaptive cruise (following the car).<ul> <li>stop</li> <li>slow_down</li> <li>adaptive_cruise</li> </ul> </li> <li>costmap_generator: generates a costmap for path generation from dynamic objects and lane information.</li> <li>freespace_planner: calculates trajectory considering the feasibility (e.g. curvature) for the freespace scene. Algorithms are described here.</li> <li>scenario_selector : chooses a trajectory according to the current scenario.</li> <li>external_velocity_limit_selector: takes an appropriate velocity limit from multiple candidates.</li> <li>motion_velocity_smoother: calculates final velocity considering velocity, acceleration, and jerk constraints.</li> </ul>"},{"location":"design/autoware-architecture/planning/#important-parameters","title":"Important Parameters","text":"Package Parameter Type Description <code>obstacle_stop_planner</code> <code>stop_planner.stop_position.max_longitudinal_margin</code> double distance between the ego and the front vehicle when stopping (when <code>cruise_planner_type:=obstacle_stop_planner</code>) <code>obstacle_cruise_planner</code> <code>common.safe_distance_margin</code> double distance between the ego and the front vehicle when stopping (when <code>cruise_planner_type:=obstacle_cruise_planner</code>) <code>behavior_path_planner</code> <code>avoidance.avoidance.lateral.lateral_collision_margin</code> double minimum lateral margin to obstacle on avoidance <code>behavior_path_planner</code> <code>avoidance.avoidance.lateral.lateral_collision_safety_buffer</code> double additional lateral margin to obstacle if possible on avoidance <code>obstacle_avoidance_planner</code> <code>option.enable_outside_drivable_area_stop</code> bool If set true, a stop point will be inserted before the path footprint is outside the drivable area."},{"location":"design/autoware-architecture/planning/#notation","title":"Notation","text":""},{"location":"design/autoware-architecture/planning/#1-self-crossing-road-and-overlapped","title":"[1] self-crossing road and overlapped","text":"<p>To support the self-crossing road and overlapped road in the opposite direction, each planning module has to meet the specifications</p> <p>Currently, the supported modules are as follows.</p> <ul> <li>lane_following (in behavior_path_planner)</li> <li>detection_area (in behavior_velocity_planner)</li> <li>stop_line (in behavior_velocity_planner)</li> <li>virtual_traffic_light (in behavior_velocity_planner)</li> <li>obstacle_avoidance_planner</li> <li>obstacle_stop_planner</li> <li>motion_velocity_smoother</li> </ul>"},{"location":"design/autoware-architecture/planning/#2-size-of-path-points","title":"[2] Size of Path Points","text":"<p>Some functions do not support paths with only one point. Therefore, each modules should generate the path with more than two path points.</p>"},{"location":"design/autoware-architecture/sensing/","title":"Sensing component design","text":""},{"location":"design/autoware-architecture/sensing/#sensing-component-design","title":"Sensing component design","text":""},{"location":"design/autoware-architecture/sensing/#overview","title":"Overview","text":"<p>Sensing component is a collection of modules that apply some primitive pre-processing to the raw sensor data.</p> <p>The sensor input formats are defined in this component.</p>"},{"location":"design/autoware-architecture/sensing/#role","title":"Role","text":"<ul> <li>Abstraction of data formats to enable usage of sensors from various vendors</li> <li>Perform common/primitive sensor data processing required by each component</li> </ul>"},{"location":"design/autoware-architecture/sensing/#inputs","title":"Inputs","text":""},{"location":"design/autoware-architecture/sensing/#input-types","title":"Input types","text":"Sensor Data Message Type Point cloud (Lidars, depth cameras, etc.) sensor_msgs/msg/PointCloud2.msg Image (RGB, monochrome, depth, etc. cameras) sensor_msgs/msg/Image.msg Radar scan radar_msgs/msg/RadarScan.msg Radar tracks radar_msgs/msg/RadarTracks.msg GNSS-INS position sensor_msgs/msg/NavSatFix.msg GNSS-INS orientation autoware_sensing_msgs/GnssInsOrientationStamped.msg GNSS-INS velocity geometry_msgs/msg/TwistWithCovarianceStamped.msg GNSS-INS acceleration geometry_msgs/msg/AccelWithCovarianceStamped.msg Ultrasonics sensor_msgs/msg/Range.msg"},{"location":"design/autoware-architecture/sensing/#design-by-data-types","title":"Design by data-types","text":"<ul> <li>GNSS/INS data pre-processing design</li> <li>Image pre-processing design</li> <li>Point cloud pre-processing design</li> <li>Radar data pre-processing design</li> <li>Ultrasonics data pre-processing design</li> </ul>"},{"location":"design/autoware-architecture/sensing/data-types/gnss-ins-data/","title":"GNSS/INS data pre-processing design","text":""},{"location":"design/autoware-architecture/sensing/data-types/gnss-ins-data/#gnssins-data-pre-processing-design","title":"GNSS/INS data pre-processing design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/sensing/data-types/image/","title":"Image pre-processing design","text":""},{"location":"design/autoware-architecture/sensing/data-types/image/#image-pre-processing-design","title":"Image pre-processing design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/","title":"Point cloud pre-processing design","text":""},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#point-cloud-pre-processing-design","title":"Point cloud pre-processing design","text":""},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#overview","title":"Overview","text":"<p>Point cloud pre-processing is a collection of modules that apply some primitive pre-processing to the raw sensor data.</p> <p>This pipeline covers the flow of data from drivers to the perception stack.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#recommended-processing-pipeline","title":"Recommended processing pipeline","text":"<pre><code>graph TD\n    Driver[\"Lidar Driver\"] --&gt;|\"Cloud XYZIRCADT\"| FilterPR[\"Polygon Remover Filter / CropBox Filter\"]\n\n    subgraph \"sensing\"\n    FilterPR --&gt;|\"Cloud XYZIRCADT\"| FilterDC[\"Motion Distortion Corrector Filter\"]\n    FilterDC --&gt;|\"Cloud XYZIRCAD\"| FilterOF[\"Outlier Remover Filter\"]\n    FilterOF --&gt;|\"Cloud XYZIRC\"| FilterDS[\"Downsampler Filter\"]\n    FilterDS --&gt;|\"Cloud XYZIRC\"| FilterTrans[\"Cloud Transformer\"]\n    FilterTrans --&gt;|\"Cloud XYZIRC\"| FilterC\n\n    FilterX[\"...\"] --&gt;|\"Cloud XYZIRC (i)\"| FilterC[\"Cloud Concatenator\"]\n    end\n\n    FilterC --&gt;|\"Cloud XYZIRC\"| SegGr[\"Ground Segmentation\"]</code></pre>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#list-of-modules","title":"List of modules","text":"<p>The modules used here are from pointcloud_preprocessor package.</p> <p>For details about the modules, see the following table.</p> <p>It is recommended that these modules are used in a single container as components. For details see ROS 2 Composition</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#point-cloud-fields","title":"Point cloud fields","text":"<p>In the ideal case, the driver is expected to output a point cloud with the <code>PointXYZIRCADT</code> point type.</p> name datatype derived description <code>X</code> <code>FLOAT32</code> <code>false</code> X position <code>Y</code> <code>FLOAT32</code> <code>false</code> Y position <code>Z</code> <code>FLOAT32</code> <code>false</code> Z position <code>I</code> (intensity) <code>UINT8</code> <code>false</code> Measured reflectivity, intensity of the point <code>R</code> (return type) <code>UINT8</code> <code>false</code> Laser return type for dual return lidars <code>C</code> (channel) <code>UINT16</code> <code>false</code> Vertical channel id of the laser that measured the point <code>A</code> (azimuth) <code>FLOAT32</code> <code>true</code> <code>atan2(Y, X)</code>, Horizontal angle from the front of the lidar to the point <code>D</code> (distance) <code>FLOAT32</code> <code>true</code> <code>hypot(X, Y, Z)</code>, Euclidean distance of the point to lidar <code>T</code> (time) <code>UINT32</code> <code>false</code> Nanoseconds passed since the time of the header when this point was measured <p>Note</p> <p><code>A (azimuth)</code> and <code>D (distance)</code> fields are derived fields. They are provided by the driver to reduce the computational load on some parts of the perception stack.</p> <p>Note</p> <p>If the <code>Motion Distortion Corrector Filter</code> won't be used, the <code>T (time)</code> field can be omitted, <code>PointXYZIRCAD</code> point type can be used.</p> <p>Warning</p> <p>Autoware will support conversion from <code>PointXYZI</code> to <code>PointXYZIRC</code> or <code>PointXYZIRCAD</code> (with channel and return is set to 0) for prototyping purposes. However, this conversion is not recommended for production use since it's not efficient.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#intensity","title":"Intensity","text":"<p>We will use following ranges for intensity, compatible with the VLP16 User Manual:</p> <p>Quoting from the VLP-16 User Manual:</p> <p>For each laser measurement, a reflectivity byte is returned in addition to distance. Reflectivity byte values are segmented into two ranges, allowing software to distinguish diffuse reflectors (e.g. tree trunks, clothing) in the low range from retroreflectors (e.g. road signs, license plates) in the high range. A retroreflector reflects light back to its source with a minimum of scattering. The VLP-16 provides its own light, with negligible separation between transmitting laser and receiving detector, so retroreflecting surfaces pop with reflected IR light compared to diffuse reflectors that tend to scatter reflected energy.</p> <ul> <li>Diffuse reflectors report values from 0 to 100 for reflectivities from 0% to 100%.</li> <li>Retroreflectors report values from 101 to 255, where 255 represents an ideal reflection.</li> </ul> <p>In a typical point cloud without retroreflectors, all intensity points will be between 0 and 100.</p> <p></p> <p>Retroreflective Gradient road sign, Image Source</p> <p>But in a point cloud with retroreflectors, the intensity points will be between 0 and 255.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#intensity-mapping-for-other-lidar-brands","title":"Intensity mapping for other lidar brands","text":""},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#hesai-pandarxt16","title":"Hesai PandarXT16","text":"<p>Hesai Pandar XT16 User Manual</p> <p>This lidar has 2 modes for reporting reflectivity:</p> <ul> <li>Linear mapping</li> <li>Non-linear mapping</li> </ul> <p>If you are using linear mapping mode, you should map from [0, 255] to [0, 100] when constructing the point cloud.</p> <p>If you are using non-linear mapping mode, you should map (hesai to autoware)</p> <ul> <li>[0, 251] to [0, 100] and</li> <li>[252, 254] to [101, 255]</li> </ul> <p>when constructing the point cloud.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#livox-mid-70","title":"Livox Mid-70","text":"<p>Livox Mid-70 User Manual</p> <p>This lidar has 2 modes for reporting reflectivity similar to Velodyne VLP-16, only the ranges are slightly different.</p> <p>You should map (livox to autoware)</p> <ul> <li>[0, 150] to [0, 100] and</li> <li>[151, 255] to [101, 255]</li> </ul> <p>when constructing the point cloud.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#robosense-rs-lidar-16","title":"RoboSense RS-LiDAR-16","text":"<p>RoboSense RS-LiDAR-16 User Manual</p> <p>No mapping required, same as Velodyne VLP-16.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#ouster-os-1-64","title":"Ouster OS-1-64","text":"<p>Software User Manual v2.0.0 for all Ouster sensors</p> <p>In the manual it is stated:</p> <p>Reflectivity [16 bit unsigned int] - sensor Signal Photons measurements are scaled based on measured range and sensor sensitivity at that range, providing an indication of target reflectivity. Calibration of this measurement has not currently been rigorously implemented, but this will be updated in a future firmware release.</p> <p>So it is advised to map the 16 bit reflectivity to [0, 100] range.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#leishen-ch64w","title":"Leishen CH64W","text":"<p>I couldn't get the english user manual, link of website</p> <p>In a user manual I was able to find it says:</p> <p>Byte 7 represents echo strength, and the value range is 0-255. (Echo strength can reflect the energy reflection characteristics of the measured object in the actual measurement environment. Therefore, the echo strength can be used to distinguish objects with different reflection characteristics.)</p> <p>So it is advised to map the [0, 255] to [0, 100] range.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#return-type","title":"Return type","text":"<p>Various lidars support multiple return modes. Velodyne lidars support Strongest and Last return modes.</p> <p>In the <code>PointXYZIRCT</code> and <code>PointXYZIRC</code> types, <code>R</code> field represents return mode with an <code>UINT8</code>.</p> R (return type) Description <code>0</code> Unknown / Not Marked <code>1</code> Strongest <code>2</code> Last"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#channel","title":"Channel","text":"<p>The channel field is used to identify the vertical channel of the laser that measured the point. In various lidar manuals or literature, it can also be called laser id, ring, laser line.</p> <p>For Velodyne VLP-16, there are 16 channels. Default order of channels in drivers are generally in firing order.</p> <p>In the <code>PointXYZIRCT</code> and <code>PointXYZIRC</code> types, <code>C</code> field represents the vertical channel id with an <code>UINT16</code>.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#solid-state-and-petal-pattern-lidars","title":"Solid state and petal pattern lidars","text":"<p>Warning</p> <p>This section is subject to change. Following are suggestions and open for discussion.</p> <p>For solid state lidars that have lines, assign row number as the channel id.</p> <p>For petal pattern lidars, you can keep channel 0.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#time","title":"Time","text":"<p>In lidar point clouds, each point measurement can have its individual time stamp. This information can be used to eliminate the motion blur that is caused by the movement of the lidar during the scan.</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#point-cloud-header-time","title":"Point cloud header time","text":"<p>The header contains a Time field. The time field has 2 components:</p> Field Type Description <code>sec</code> <code>int32</code> Unix time (seconds elapsed since January 1, 1970) <code>nanosec</code> <code>uint32</code> Nanoseconds elapsed since the <code>sec</code> field <p>The header of the point cloud message is expected to have the time of the earliest point it has.</p> <p>Note</p> <p>The <code>sec</code> field is <code>int32</code> in ROS 2 humble. The largest value it can represent is 2^31 seconds, it is subject to year 2038 problems. We will wait for actions on ROS 2 community side.</p> <p>More info at: https://github.com/ros2/rcl_interfaces/issues/85</p>"},{"location":"design/autoware-architecture/sensing/data-types/point-cloud/#individual-point-time","title":"Individual point time","text":"<p>Each <code>PointXYZIRCT</code> point type has the <code>T</code> field for representing the nanoseconds passed since the first-shot point of the point cloud.</p> <p>To calculate exact time each point was shot, the <code>T</code> nanoseconds are added to the header time.</p> <p>Note</p> <p>The <code>T</code> field is <code>uint32</code> type. The largest value it can represent is 2^32 nanoseconds, which equates to roughly 4.29 seconds. Usual point clouds don't last more than 100ms for full cycle. So this field should be enough.</p>"},{"location":"design/autoware-architecture/sensing/data-types/radar-data/","title":"Radar data pre-processing design","text":""},{"location":"design/autoware-architecture/sensing/data-types/radar-data/#radar-data-pre-processing-design","title":"Radar data pre-processing design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/sensing/data-types/ultrasonics-data/","title":"Ultrasonics data pre-processing design","text":""},{"location":"design/autoware-architecture/sensing/data-types/ultrasonics-data/#ultrasonics-data-pre-processing-design","title":"Ultrasonics data pre-processing design","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/autoware-architecture/vehicle/","title":"Vehicle Interface design","text":""},{"location":"design/autoware-architecture/vehicle/#vehicle-interface-design","title":"Vehicle Interface design","text":""},{"location":"design/autoware-architecture/vehicle/#abstract","title":"Abstract","text":"<p>The Vehicle Interface component provides an interface between Autoware and a vehicle that passes control signals to the vehicle\u2019s drive-by-wire system and receives vehicle information that is passed back to Autoware.</p>"},{"location":"design/autoware-architecture/vehicle/#1-requirements","title":"1. Requirements","text":"<p>Goals:</p> <ul> <li>The Vehicle Interface component converts Autoware commands to a vehicle-specific format and converts vehicle status in a vehicle-specific format to Autoware messages.</li> <li>The interface between Autoware and the Vehicle component is abstracted and independent of hardware.</li> <li>The interface is extensible such that additional vehicle-specific commands can be easily added. For example, headlight control.</li> </ul> <p>Non-goals:</p> <ul> <li>Accuracy of responses from the vehicle will not be defined, but example accuracy requirements from reference designs are provided as examples.</li> <li>Response speed will not be defined.</li> </ul>"},{"location":"design/autoware-architecture/vehicle/#2-architecture","title":"2. Architecture","text":"<p>The Vehicle Interface component consists of the following components:</p> <ul> <li>A Raw Vehicle Command Converter component that will pass through vehicle commands from the Control component if velocity/acceleration control is supported by the drive-by-wire system. Otherwise, the Control commands will be modified according to the control method (eg: converting a target acceleration from the Control component to a vehicle specific accel/brake pedal value through the use of an acceleration map)</li> <li>A Vehicle Interface component (vehicle specific) that acts as an interface between Autoware and a vehicle to communicate control signals and to obtain information about the vehicle (steer output, tyre angle etc)</li> </ul> <p>Each component contains static nodes of Autoware, while each module can be dynamically loaded and unloaded (corresponding to C++ classes). The mechanism of the Vehicle Interface component is depicted by the following figures:</p> <p></p> <p></p>"},{"location":"design/autoware-architecture/vehicle/#3-features","title":"3. Features","text":"<p>The Vehicle Interface component can provide the following features in functionality and capability:</p> <ul> <li> <p>Basic functions</p> <ul> <li>Converting Autoware control commands to vehicle specific command</li> <li>Converting vehicle specific status information (velocity, steering) to Autoware status message</li> </ul> </li> </ul> <ul> <li>Diagnostics<ul> <li>List available features</li> <li>Provide a warning if the Control component tries to use a feature that is not available in the Vehicle Interface component</li> </ul> </li> </ul> <p>Additional functionality and capability features may be added, depending on the vehicle hardware. Some example features are listed below:</p> <ul> <li>Safety features<ul> <li>Disengage autonomous driving via manual intervention.<ul> <li>This can be done through the use of an emergency disengage button, or by a safety driver manually turning the steering wheel or pressing the brake</li> </ul> </li> </ul> </li> <li>Optional controls<ul> <li>Turn indicator</li> <li>Handbrake</li> <li>Headlights</li> <li>Hazard lights</li> <li>Doors</li> <li>Horn</li> <li>Wipers</li> </ul> </li> </ul>"},{"location":"design/autoware-architecture/vehicle/#4-interface-and-data-structure","title":"4. Interface and Data Structure","text":"<p>The interface of the Vehicle Interface component for other components running in the same process space to access the functionality and capability of the Vehicle Interface component is defined as follows.</p> <p>From Control</p> <ul> <li>Actuation Command<ul> <li>target acceleration, braking, and steering angle</li> </ul> </li> </ul> <p>From Planning</p> <ul> <li>Vehicle Specific Commands (optional and a separate message for each type)<ul> <li>Shift</li> <li>Door</li> <li>Wiper</li> <li>etc</li> </ul> </li> </ul> <p>From the vehicle</p> <ul> <li>Vehicle status messages<ul> <li>Vehicle-specific format messages for conversion into Autoware-specific format messages<ul> <li>Velocity status</li> <li>Steering status (optional)</li> <li>Shift status (optional)</li> <li>Turn signal status (optional)</li> <li>Actuation status (optional)</li> </ul> </li> </ul> </li> </ul> <p>The output interface of the Vehicle Interface component:</p> <ul> <li>Vehicle control messages to the vehicle<ul> <li>Control signals to drive the vehicle</li> <li>Depends on the vehicle type/protocol, but should include steering and velocity commands at a minimum</li> </ul> </li> <li>Vehicle status messages to Autoware</li> <li>Actuation Status<ul> <li>Acceleration, brake, steering status</li> </ul> </li> <li>Vehicle odometry (output to Localization)<ul> <li>Vehicle twist information</li> </ul> </li> <li>Control mode<ul> <li>Information about whether the vehicle is under autonomous control or manual control</li> </ul> </li> <li>Shift status (optional)<ul> <li>Vehicle shift status</li> </ul> </li> <li>Turn signal status (optional)<ul> <li>Vehicle turn signal status</li> </ul> </li> </ul> <p>The data structure for the internal representation of semantics for the objects and trajectories used in the Vehicle Interface component is defined as follows:</p>"},{"location":"design/autoware-architecture/vehicle/#5-concerns-assumptions-and-limitations","title":"5. Concerns, Assumptions, and Limitations","text":"<p>Concerns</p> <ul> <li>Architectural trade-offs and scalability</li> </ul> <p>Assumptions</p> <p>-</p> <p>Limitations</p>"},{"location":"design/autoware-architecture/vehicle/#6-examples-of-accuracy-requirements-by-odd","title":"6. Examples of accuracy requirements by ODD","text":""},{"location":"design/autoware-concepts/","title":"Autoware concepts","text":""},{"location":"design/autoware-concepts/#autoware-concepts","title":"Autoware concepts","text":"<p>Autoware is the world\u2019s first open-source software for autonomous driving systems. Autoware provides value for both The technology developers of autonomous driving systems can create new components based on Autoware. The service operators of autonomous driving systems, on the other hand, can select appropriate technology components with Autoware. This is enabled by the microautonomy architecture that modularizes its software stack into the core and universe subsystems (modules).</p>"},{"location":"design/autoware-concepts/#microautonomy-architecture","title":"Microautonomy architecture","text":"<p>Autoware uses a pipeline architecture to enable the development of autonomous driving systems. The pipeline architecture used in Autoware consists of components similar to three-layer-architecture. And they run in parallel. There are 2 main modules: the Core and the Universe. The components in these modules are designed to be extensible and reusable. And we call it microautonomy architecture.</p> <p></p>"},{"location":"design/autoware-concepts/#the-core-module","title":"The Core module","text":"<p>The Core module contains basic runtimes and technology components that satisfy the basic functionality and capability of sensing, computing, and actuation required for autonomous driving systems. AWF develops and maintains the Core module with their architects and leading members through their working groups. Anyone can contribute to the Core but the PR(Pull Request) acceptance criteria is more strict compared to the Universe.</p>"},{"location":"design/autoware-concepts/#the-universe-module","title":"The Universe module","text":"<p>The Universe modules are extensions to the Core module that can be provided by the technology developers to enhance the functionality and capability of sensing, computing, and actuation. AWF provides the base Universe module to extend from. A key feature of the microautonomy architecture is that the Universe modules can be contributed to by any organization and individual. That is, you can even create your Universe and make it available for the Autoware community and ecosystem. AWF is responsible for quality control of the Universe modules through their development process. As a result, there are multiple types of the Universe modules - some are verified and validated by AWF and others are not. It is up to the users of Autoware which Universe modules are selected and integrated to build their end applications.</p>"},{"location":"design/autoware-concepts/#interface-design","title":"Interface design","text":"<p>The interface design is the most essential piece of the microautonomy architecture, which is classified into internal and external interfaces. The component interface is designed for the components in a Universe module to communicate with those in other modules, including the Core module, within Autoware internally. The AD(Autonomous Driving) API, on the other hand, is designed for the applications of Autoware to access the technology components in the Core and Universe modules of Autoware externally. Designing solid interfaces, the microautonomy architecture is made possible with AWF's partners, and at the same time is made feasible for the partners.</p>"},{"location":"design/autoware-concepts/#challenges","title":"Challenges","text":"<p>A grand challenge of the microautonomy architecture is to achieve real-time capability, which guarantees all the technology components activated in the system to predictably meet timing constraints (given deadlines). In general, it is difficult, if not impossible, to tightly estimate the worst-case execution times (WCETs) of components.</p> <p>In addition, it is also difficult, if not impossible, to tightly estimate the end-to-end latency of components connected by a DAG. Autonomous driving systems based on the microautonomy architecture, therefore, must be designed to be fail-safe but not never-fail. We accept that the timing constraints may be violated (the given deadlines may be missed) as far as the overrun is taken into account. The overrun handlers are two-fold: (i) platform-defined and (ii) user-defined. The platform-defined handler is implemented as part of the platform by default, while the user-defined handler can overwrite it or add a new handler to the system. This is what we call \u201cfail-safe\u201d on a timely basis.</p>"},{"location":"design/autoware-concepts/#requirements-and-roadmap","title":"Requirements and roadmap","text":"<p>Goals:</p> <ul> <li>All open-source</li> <li>Use case driven</li> <li>Real-time (predictable) framework with overrun handling</li> <li>Code quality</li> </ul>"},{"location":"design/autoware-concepts/difference-from-ai-and-auto/","title":"How is Autoware Core/Universe different from Autoware.AI and Autoware.Auto?","text":""},{"location":"design/autoware-concepts/difference-from-ai-and-auto/#how-is-autoware-coreuniverse-different-from-autowareai-and-autowareauto","title":"How is Autoware Core/Universe different from Autoware.AI and Autoware.Auto?","text":"<p>Autoware is the world's first \"all-in-one\" open-source software for self-driving vehicles. Since it was first released in 2015, there have been multiple releases made with differing underlying concepts, each one aimed at improving the software.</p>"},{"location":"design/autoware-concepts/difference-from-ai-and-auto/#autowareai","title":"Autoware.AI","text":"<p>Autoware.AI is the first distribution of Autoware that was released based on ROS 1. The repository contains a variety of packages covering different aspects of autonomous driving technologies - sensing, actuation, localization, mapping, perception and planning.</p> <p>While it was successful in attracting many developers and contributions, it was difficult to improve Autoware.AI's capabilities for a number of reasons:</p> <ul> <li>A lack of concrete architecture design leading to a lot of built-up technical debt, such as tight coupling between modules and unclear module responsibility.</li> <li>Differing coding standards for each package, with very low test coverage.</li> </ul> <p>Furthermore, there was no clear definition of the conditions under which an Autoware-enabled autonomous vehicle could operate, nor of the use cases or situations supported (eg: the ability to overtake a stationary vehicle).</p> <p>From the lessons learned from Autoware.AI development, a different development process was taken for Autoware.Auto to develop a ROS 2 version of Autoware.</p> <p>Warning</p> <p>Autoware.AI is currently in maintenance mode and will reach end-of-life at the end of 2022.</p>"},{"location":"design/autoware-concepts/difference-from-ai-and-auto/#autowareauto","title":"Autoware.Auto","text":"<p>Autoware.Auto is the second distribution of Autoware that was released based on ROS 2. As part of the transition to ROS 2, it was decided to avoid simply porting Autoware.AI from ROS 1 to ROS 2. Instead, the codebase was rewritten from scratch with proper engineering practices, including defining target use cases and ODDs (eg: Autonomous Valet Parking [AVP], Cargo Delivery, etc.), designing a proper architecture, writing design documents and test code.</p> <p>Autoware.Auto development seemed to work fine initially, but after completing the AVP and and Cargo Delivery ODD projects, we started to see the following issues:</p> <ul> <li>The barrier to new engineers was too high.<ul> <li>A lot of work was required to merge new features into Autoware.Auto, and so it was difficult for researchers and students to contribute to development.</li> <li>As a consequence, most Autoware.Auto developers were from companies in the Autoware Foundation and so there were very few people who were able to add state-of-the-art features from research papers.</li> </ul> </li> <li>Making large-scale architecture changes was too difficult.<ul> <li>To try out experimental architecture, there was a very large overhead involved in keeping the main branch stable whilst also making sure that every change satisfied the continuous integration requirements.</li> </ul> </li> </ul>"},{"location":"design/autoware-concepts/difference-from-ai-and-auto/#autoware-coreuniverse","title":"Autoware Core/Universe","text":"<p>In order to address the issues with Autoware.Auto development, the Autoware Foundation decided to create a new architecture called Autoware Core/Universe.</p> <p>Autoware Core carries over the original policy of Autoware.Auto to be a stable and well-tested codebase. Alongside Autoware Core is a new concept called Autoware Universe, which acts as an extension of Autoware Core with the following benefits:</p> <ul> <li>Users can easily replace a Core component with a Universe equivalent in order to use more advanced features, such as a new Localization or Perception algorithm.</li> <li>Code quality requirements for Universe are more relaxed to make it easier for new developers, students and researchers to contribute, but will still be stricter than the requirements for Autoware.AI.</li> <li>Any advanced features added to Universe that are useful to the wider Autoware community will be reviewed and considered for potential inclusion in the main Autoware Core codebase.</li> </ul> <p>This way, the primary requirement of having a stable and safe autonomous driving system can be achieved, whilst simultaneously enabling access to state-of-the-art features created by third-party contributors. For more details about the design of Autoware Core/Universe, refer to the Autoware concepts documentation page.</p>"},{"location":"design/autoware-interfaces/","title":"Autoware interface design","text":""},{"location":"design/autoware-interfaces/#autoware-interface-design","title":"Autoware interface design","text":""},{"location":"design/autoware-interfaces/#abstract","title":"Abstract","text":"<p>Autoware defines three categories of interfaces. The first one is Autoware AD API for operating the vehicle from outside the autonomous driving system such as the Fleet Management System (FMS) and Human Machine Interface (HMI) for operators or passengers. The second one is Autoware component interface for components to communicate with each other. The last one is the local interface used inside the component.</p>"},{"location":"design/autoware-interfaces/#concept","title":"Concept","text":"<ul> <li> <p>Applications can operate multiple and various vehicles in a common way.</p> <p></p> </li> </ul> <ul> <li> <p>Applications are not affected by version updates and implementation changes.</p> <p></p> </li> </ul> <ul> <li> <p>Developers only need to know the interface to add new features and hardware.</p> <p></p> </li> </ul>"},{"location":"design/autoware-interfaces/#requirements","title":"Requirements","text":"<p>Goals:</p> <ul> <li>AD API provides functionality to create the following applications:<ul> <li>Drive the vehicle on the route or drive to the requested positions in order.</li> <li>Operate vehicle behavior such as starting and stopping.</li> <li>Display or announce the vehicle status to operators, passengers, and people around.</li> <li>Control vehicle devices such as doors.</li> <li>Monitor the vehicle or drive it manually.</li> </ul> </li> <li>AD API provides stable and long-term specifications. This enables unified access to all vehicles.</li> <li>AD API hides differences in version and implementation and absorbs the impact of changes.</li> <li>AD API has a default implementation and can be applied to some simple ODDs with options.</li> <li>The AD API implementation is extensible with the third-party components as long as it meets the specifications.</li> <li>The component interface provides stable and medium-term specifications. This makes it easier to add components.</li> <li>The component interface clarifies the public and private parts of a component and improves maintainability.</li> <li>The component interface is extensible with the third-party design to improve the sub-components' reusability.</li> </ul> <p>Non-goals:</p> <ul> <li>AD API does not cover security. Use it with other reliable methods.</li> <li>The component interface is just a specification, it does not include an implementation.</li> </ul>"},{"location":"design/autoware-interfaces/#architecture","title":"Architecture","text":"<p>The components of Autoware are connected via the component interface. Each component uses the interface to provide functionality and to access other components. AD API implementation is also a component. Since the functional elements required for AD API are defined as the component interface, other components do not need to consider AD API directly. Tools for evaluation and debugging, such as simulators, access both AD API and the component interface.</p> <p></p> <p>The component interface has a hierarchical specification. The top-level architecture consists of some components. Each component has some options of the next-level architecture. Developers select one of them when implementing the component. The simplest next-level architecture is monolithic. This is an all-in-one and black box implementation, and is suitable for small group development, prototyping, and very complex functions. Others are arbitrary architecture consists of sub-components and have advantages for large group development. A sub-component can be combined with others that adopt the same architecture. Third parties can define and publish their own architecture and interface for open source development. It is desirable to propose them for standardization if they are sufficiently evaluated.</p> <p></p>"},{"location":"design/autoware-interfaces/#features","title":"Features","text":""},{"location":"design/autoware-interfaces/#communication-methods","title":"Communication methods","text":"<p>As shown in the table below, interfaces are classified into four communication methods to define their behavior. Function Call is a request-response communication and is used for processing that requires immediate results. The others are publish-subscribe communication. Notification is used to process data that changes with some event, typically a callback. Streams handle continuously changing data. Reliable Stream expects all data to arrive without loss, Realtime Stream expects the latest data to arrive with low delay.</p> Communication Method ROS Implementation Optional Implementation Function Call Service HTTP Notification Topic (reliable, transient_local) MQTT (QoS=2, retain) Reliable Stream Topic (reliable, volatile) MQTT (QoS=2) Realtime Stream Topic (best_effort, volatile) MQTT (QoS=0) <p>These methods are provided as services or topics of ROS since Autoware is developed using ROS and mainly communicates with its packages. On the other hand, FMS and HMI are often implemented without ROS, Autoware is also expected to communicate with applications that do not use ROS. It is wasteful for each of these applications to have an adapter for Autoware, and a more suitable means of communication is required. HTTP and MQTT are suggested as additional options because these protocols are widely used and can substitute the behavior of services and topics. In that case, text formats such as JSON where field names are repeated in an array of objects, are inefficient and it is necessary to consider the serialization.</p>"},{"location":"design/autoware-interfaces/#naming-convention","title":"Naming convention","text":"<p>The name of the interface must be <code>/&lt;component name&gt;/api/&lt;interface name&gt;</code>, where <code>&lt;component name&gt;</code> is the name of the component. For an AD API component, omit this part and start with <code>/api</code>. The <code>&lt;interface name&gt;</code> is an arbitrary string separated by slashes. Note that this rule causes a restriction that the namespace <code>api</code> must not be used as a name other than AD API and the component interface.</p> <p>The following are examples of correct interface names for AD API and the component interface:</p> <ul> <li>/api/autoware/state</li> <li>/api/autoware/engage</li> <li>/planning/api/route/set</li> <li>/vehicle/api/status</li> </ul> <p>The following are examples of incorrect interface names for AD API and the component interface:</p> <ul> <li>/ad_api/autoware/state</li> <li>/autoware/engage</li> <li>/planning/route/set/api</li> <li>/vehicle/my_api/status</li> </ul>"},{"location":"design/autoware-interfaces/#logging","title":"Logging","text":"<p>It is recommended to log the interface for analysis of vehicle behavior. If logging is needed, rosbag is available for topics, and use logger in rclcpp or rclpy for services. Typically, create a wrapper for service and client classes that logs when a service is called.</p>"},{"location":"design/autoware-interfaces/#restrictions","title":"Restrictions","text":"<p>For each API, consider the restrictions such as following and describe them if necessary.</p> <p>Services:</p> <ul> <li>response time</li> <li>pre-condition</li> <li>post-condition</li> <li>execution order</li> <li>concurrent execution</li> </ul> <p>Topics:</p> <ul> <li>recommended delay range</li> <li>maximum delay</li> <li>recommended frequency range</li> <li>minimum frequency</li> <li>default frequency</li> </ul>"},{"location":"design/autoware-interfaces/#data-structure","title":"Data structure","text":""},{"location":"design/autoware-interfaces/#data-type-definition","title":"Data type definition","text":"<p>Do not share the types in AD API unless they are obviously the same to avoid changes in one API affecting another. Also, implementation-dependent types, including the component interface, should not be used in AD API for the same reason. Use the type in AD API in implementation, or create the same type and copy the data to convert the type.</p>"},{"location":"design/autoware-interfaces/#constants-and-enumeration","title":"Constants and enumeration","text":"<p>Since ROS don't support enumeration, use constants instead. The default value of type such as zero and empty string should not be used to detect that a variable is unassigned. Alternatively, assign it a dedicated name to indicate that it is undefined. If one type has multiple enumerations, comment on the correspondence between constants and variables. Do not use enumeration values directly, as assignments are subject to change when the version is updated.</p>"},{"location":"design/autoware-interfaces/#time-stamp","title":"Time stamp","text":"<p>Clarify what the timestamp indicates. for example, send time, measurement time, update time, etc. Consider having multiple timestamps if necessary. Use <code>std_msgs/msg/Header</code> when using ROS transform. Also consider whether the header is common to all data, independent for each data, or additional timestamp is required.</p>"},{"location":"design/autoware-interfaces/#request-header","title":"Request header","text":"<p>Currently, there is no required header.</p>"},{"location":"design/autoware-interfaces/#response-status","title":"Response status","text":"<p>The interfaces whose communication method is Function Call use a common response status to unify the error format. These interfaces should include a variable of ResponseStatus with the name status in the response. See autoware_adapi_v1_msgs/msg/ResponseStatus for details.</p>"},{"location":"design/autoware-interfaces/#concerns-assumptions-and-limitations","title":"Concerns, assumptions and limitations","text":"<ul> <li>The applications use the version information provided by AD API to check compatibility.   Unknown versions are also treated as available as long as the major versions match (excluding major version 0).   Compatibility between AD API and the component interface is assumed to be maintained by the version management system.</li> <li>If an unintended behavior of AD API is detected, the application should take appropriate action.   Autoware tries to keep working as long as possible, but it is not guaranteed to be safe.   Safety should be considered for the entire system, including the applications.</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/","title":"Autoware AD API","text":""},{"location":"design/autoware-interfaces/ad-api/#autoware-ad-api","title":"Autoware AD API","text":""},{"location":"design/autoware-interfaces/ad-api/#overview","title":"Overview","text":"<p>Autoware AD API is the interface for operating the vehicle from outside the autonomous driving system. See here for the overall interface design of Autoware.</p>"},{"location":"design/autoware-interfaces/ad-api/#user-stories","title":"User stories","text":"<p>The user stories are service scenarios that AD API assumes. AD API is designed based on these scenarios. Each scenario is realized by a combination of use cases described later. If there are scenarios that cannot be covered, please discuss adding a user story.</p> <ul> <li>Bus service</li> <li>Taxi service</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/#use-cases","title":"Use cases","text":"<p>Use cases are partial scenarios derived from the user story and generically designed. Service providers can combine these use cases to define user stories and check if AD API can be applied to their own scenarios.</p> <ul> <li>Launch and terminate</li> <li>Initialize the pose</li> <li>Change the operation mode</li> <li>Drive to the designated position</li> <li>Get on and get off</li> <li>Vehicle monitoring</li> <li>Request to cooperate</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/#features","title":"Features","text":"<ul> <li>Interface</li> <li>Operation Mode</li> <li>Routing</li> <li>Localization</li> <li>Motion</li> <li>Planning</li> <li>Fail-safe</li> <li>Vehicle status</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/fail-safe/","title":"Fail-safe","text":""},{"location":"design/autoware-interfaces/ad-api/features/fail-safe/#fail-safe","title":"Fail-safe","text":""},{"location":"design/autoware-interfaces/ad-api/features/fail-safe/#related-api","title":"Related API","text":"<ul> <li>/api/fail_safe/mrm_state</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/fail-safe/#description","title":"Description","text":"<p>This API manages the behavior related to the abnormality of the vehicle. It provides the state of Request to Intervene (RTI), Minimal Risk Maneuver (MRM) and Minimal Risk Condition (MRC). As shown below, Autoware has the gate to switch between the command during normal operation and the command during abnormal operation. For safety, Autoware switches the operation to MRM when an abnormality is detected. Since the required behavior differs depending on the situation, MRM is implemented in various places as a specific mode in a normal module or as an independent module. The fail-safe module selects the behavior of MRM according to the abnormality and switches the gate output to that command.</p> <p></p>"},{"location":"design/autoware-interfaces/ad-api/features/fail-safe/#states","title":"States","text":"<p>The MRM state indicates whether MRM is operating. This state also provides success or failure. Generally, MRM will switch to another behavior if it fails.</p> <p></p> State Description NONE MRM is not operating. OPERATING MRM is operating because an abnormality has been detected. SUCCEEDED MRM succeeded. The vehicle is in a safe condition. FAILED MRM failed. The vehicle is still in an unsafe condition."},{"location":"design/autoware-interfaces/ad-api/features/fail-safe/#behavior","title":"Behavior","text":"<p>There is a dependency between MRM behaviors. For example, it switches from a comfortable stop to a emergency stop, but not the other way around. This is service dependent. Autoware supports the following transitions by default.</p> <p></p> State Description NONE MRM is not operating or is operating but no special behavior is required. COMFORTABLE_STOP The vehicle will stop quickly with a comfortable deceleration. EMERGENCY_STOP The vehicle will stop immediately with as much deceleration as possible."},{"location":"design/autoware-interfaces/ad-api/features/interface/","title":"Interface","text":""},{"location":"design/autoware-interfaces/ad-api/features/interface/#interface","title":"Interface","text":""},{"location":"design/autoware-interfaces/ad-api/features/interface/#related-api","title":"Related API","text":"<ul> <li>/api/interface/version</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/interface/#description","title":"Description","text":"<p>This API provides the interface version of the set of AD APIs. It follows Semantic Versioning in order to provide an intuitive understanding of the changes between versions.</p>"},{"location":"design/autoware-interfaces/ad-api/features/localization/","title":"Localization","text":""},{"location":"design/autoware-interfaces/ad-api/features/localization/#localization","title":"Localization","text":""},{"location":"design/autoware-interfaces/ad-api/features/localization/#related-api","title":"Related API","text":"<ul> <li>/api/localization/initialization_state</li> <li>/api/localization/initialize</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/localization/#description","title":"Description","text":"<p>This API manages the initialization of localization. Autoware requires a global pose as the initial guess for localization.</p>"},{"location":"design/autoware-interfaces/ad-api/features/localization/#states","title":"States","text":"State Description UNINITIALIZED Localization is not initialized. Waiting for a global pose as the initial guess. INITIALIZING Localization is initializing. INITIALIZED Localization is initialized. Initialization can be requested again if necessary."},{"location":"design/autoware-interfaces/ad-api/features/motion/","title":"Motion","text":""},{"location":"design/autoware-interfaces/ad-api/features/motion/#motion","title":"Motion","text":""},{"location":"design/autoware-interfaces/ad-api/features/motion/#related-api","title":"Related API","text":"<ul> <li>/api/motion/state</li> <li>/api/motion/accept_start</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/motion/#description","title":"Description","text":"<p>This API manages the current behavior of the vehicle. Applications can notify the vehicle behavior to the people around and visualize it for operator and passengers.</p>"},{"location":"design/autoware-interfaces/ad-api/features/motion/#states","title":"States","text":"<p>The motion state manages the stop and start of the vehicle. Once the vehicle has stopped, the state will be STOPPED. After this, when the vehicle tries to start (is still stopped), the state will be STARTING. In this state, calling the start API changes the state to MOVING and the vehicle starts. This mechanism can add processing such as announcements before the vehicle starts. Depending on the configuration, the state may transition directly from STOPPED to MOVING.</p> <p></p> State Description STOPPED The vehicle is stopped. STARTING The vehicle is stopped, but is trying to start. MOVING The vehicle is moving. BRAKING (T.B.D.) The vehicle is decelerating strongly."},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/","title":"Operation mode","text":""},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#operation-mode","title":"Operation mode","text":""},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#related-api","title":"Related API","text":"<ul> <li>/api/operation_mode/state</li> <li>/api/operation_mode/change_to_autonomous</li> <li>/api/operation_mode/change_to_stop</li> <li>/api/operation_mode/change_to_local</li> <li>/api/operation_mode/change_to_remote</li> <li>/api/operation_mode/enable_autoware_control</li> <li>/api/operation_mode/disable_autoware_control</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#description","title":"Description","text":"<p>As shown below, Autoware assumes that the vehicle interface has two modes, Autoware control and direct control. In direct control mode, the vehicle is operated using devices such as steering and pedals. If the vehicle does not support direct control mode, it is always treated as Autoware control mode. Autoware control mode has four operation modes.</p> Mode Description Stop Keep the vehicle stopped. Autonomous Autonomously control the vehicle. Local Manually control the vehicle from nearby with some device such as a joystick. Remote Manually control the vehicle from a web application on the cloud. <p></p>"},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#states","title":"States","text":""},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#autoware-control-flag","title":"Autoware control flag","text":"<p>The flag <code>is_autoware_control_enabled</code> indicates if the vehicle is controlled by Autoware. The enable and disable APIs can be used if the control can be switched by software. These APIs will always fail if the vehicle does not support mode switching or is switched by hardware.</p>"},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#operation-mode-and-change-flags","title":"Operation mode and change flags","text":"<p>The state <code>operation_mode</code> indicates what command is used when Autoware control is enabled. The flags <code>change_to_*</code> can be used to check if it is possible to transition to each mode.</p>"},{"location":"design/autoware-interfaces/ad-api/features/operation_mode/#transition-flag","title":"Transition flag","text":"<p>Since Autoware may not be able to guarantee safety, such as switching to autonomous mode during overspeed. There is the flag <code>is_in_transition</code> for this situation and it will be true when changing modes. The operator who changed the mode should ensure safety while this flag is true. The flag will be false when the mode change is complete.</p>"},{"location":"design/autoware-interfaces/ad-api/features/planning-factors/","title":"Planning factors","text":""},{"location":"design/autoware-interfaces/ad-api/features/planning-factors/#planning-factors","title":"Planning factors","text":""},{"location":"design/autoware-interfaces/ad-api/features/planning-factors/#related-api","title":"Related API","text":"<ul> <li>/api/planning/velocity_factors</li> <li>/api/planning/steering_factors</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/planning-factors/#description","title":"Description","text":"<p>This API manages the planned behavior of the vehicle. Applications can notify the vehicle behavior to the people around and visualize it for operator and passengers.</p>"},{"location":"design/autoware-interfaces/ad-api/features/planning-factors/#velocity-factors","title":"Velocity factors","text":"<p>The velocity factors is an array of information on the behavior that the vehicle stops (or slows down). Each factor has a type shown below, pose in the base link, distance, status, and detailed data depending on its type. As the vehicle approaches the stop position, this factor appears with a status of APPROACHING. And when the vehicle reaches that position and stops, the status will be STOPPED. The pose indicates the stop position or the base link if the stop position cannot be calculated.</p> <p></p> Factor Type Description SURROUNDING_OBSTACLE There are obstacles immediately around the vehicle. ROUTE_OBSTACLE There are obstacles along the route ahead. INTERSECTION There are obstacles in other lanes in the path. CROSSWALK There are obstacles on the crosswalk. REAR_CHECK There are obstacles behind that would be in a human driver's blind spot. USER_DEFINED_DETECTION_AREA There are obstacles in the predefined detection area. NO_STOPPING_AREA There is not enough space beyond the no stopping area. STOP_SIGN A stop by a stop sign. TRAFFIC_SIGNAL A stop by a traffic signal. V2I_GATE_CONTROL_ENTER A stop by a V2I gate entering. V2I_GATE_CONTROL_LEAVE A stop by a V2I gate leaving. MERGE A stop before merging lanes. SIDEWALK A stop before crossing the sidewalk. LANE_CHANGE A lane change. AVOIDANCE A path change to avoid an obstacle in the current lane. EMERGENCY_OPERATION A stop by emergency instruction from the operator."},{"location":"design/autoware-interfaces/ad-api/features/planning-factors/#steering-factors","title":"Steering factors","text":"<p>The steering factors is an array of information on the maneuver that requires use of turn indicators, such as turning left or right. Each factor has a type shown below, pose in the base link, distance, status, and detailed data depending on its type. As the vehicle approaches the position to start steering, this factor appears with a status of APPROACHING. And when the vehicle reaches that position, the status will be TURNING. The pose indicates the start position when APPROACHING and the end position when TURNING.</p> <p></p> <p>In cases such as lane change and avoidance, the vehicle will start steering at any position in the range depending on the situation. As the vehicle approaches the start position of the range, this factor appears with a status of APPROACHING. And when the vehicle reaches that position, the status will be TRYING. Then, when it is possible, the vehicle will start steering and the status will be TURNING. The pose indicates the start of the range (A) when APPROACHING and the end of the range (B) when TRYING. The position to end steering (C to D) for TURNING depends on the position to start steering.</p> <p></p> Factor Type Description INTERSECTION A turning left or right at an intersection. LANE_CHANGE A lane change. AVOIDANCE_PATH_CHANGE A path change to avoid an obstacle in the current lane. AVOIDANCE_PATH_RETURN A path change to return to the original lane after avoiding an obstacle. STATION T.B.D. (bus stop) PULL_OUT T.B.D. PULL_OVER T.B.D. EMERGENCY_OPERATION A path change by emergency instruction from the operator."},{"location":"design/autoware-interfaces/ad-api/features/routing/","title":"Routing","text":""},{"location":"design/autoware-interfaces/ad-api/features/routing/#routing","title":"Routing","text":""},{"location":"design/autoware-interfaces/ad-api/features/routing/#related-api","title":"Related API","text":"<ul> <li>/api/routing/state</li> <li>/api/routing/route</li> <li>/api/routing/set_route_points</li> <li>/api/routing/set_route</li> <li>/api/routing/clear_route</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/routing/#description","title":"Description","text":"<p>This API manages destination and waypoints. Note that waypoints are not like stops and just points passing through. In other words, Autoware does not support the route with multiple stops, the application needs to split it up and switch them. There are two ways to set the route. The one is a generic method that uses pose, another is a map-dependent.</p>"},{"location":"design/autoware-interfaces/ad-api/features/routing/#states","title":"States","text":"State Description UNSET The route is not set. Waiting for a route request. SET The route is set. ARRIVED The vehicle has arrived at the destination. CHANGING Trying to change the route. Not implemented yet."},{"location":"design/autoware-interfaces/ad-api/features/routing/#goal-modification","title":"Goal modification","text":"<p>Autoware tries to look for an alternate goal when goal is unreachable (e.g., when there is an obstacle on the given goal). When setting a route from the API, applications can choose whether they allow Autoware to adjust goal pose in such situation. When set false, Autoware may get stuck until the given goal becomes reachable.</p> Option Description allow_goal_modification If true, allow goal modification."},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/","title":"Vehicle status","text":""},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/#vehicle-status","title":"Vehicle status","text":""},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/#related-api","title":"Related API","text":"<ul> <li>/api/vehicle/kinematics</li> <li>/api/vehicle/status</li> <li>/api/vehicle/dimensions</li> <li>/api/vehicle/doors/layout</li> <li>/api/vehicle/doors/status</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/#kinematics","title":"Kinematics","text":"<p>This is an estimate of the vehicle kinematics. The vehicle position is necessary for applications to schedule dispatches. Also, using velocity and acceleration, applications can find vehicles that need operator assistance, such as stuck or brake suddenly.</p>"},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/#status","title":"Status","text":"<p>This is the status provided by the vehicle. The indicators and steering are mainly used for visualization and remote control. The remaining energy can be also used for vehicle scheduling.</p>"},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/#doors","title":"Doors","text":"<p>This feature is available if the vehicle provides a software interface for the doors. It can be used to create user interfaces for passengers or to control sequences at bus stops.</p>"},{"location":"design/autoware-interfaces/ad-api/features/vehicle-status/#dimensions","title":"Dimensions","text":"<p>The vehicle dimensions are used to know the actual distance between the vehicle and objects because the vehicle position in kinematics is the coordinates of the base link. This is necessary for visualization when supporting vehicles remotely.</p>"},{"location":"design/autoware-interfaces/ad-api/list/","title":"List of Autoware AD API","text":""},{"location":"design/autoware-interfaces/ad-api/list/#list-of-autoware-ad-api","title":"List of Autoware AD API","text":"<ul> <li>/api/fail_safe/mrm_state</li> <li>/api/interface/version</li> <li>/api/localization/initialization_state</li> <li>/api/localization/initialize</li> <li>/api/motion/accept_start</li> <li>/api/motion/state</li> <li>/api/operation_mode/change_to_autonomous</li> <li>/api/operation_mode/change_to_local</li> <li>/api/operation_mode/change_to_remote</li> <li>/api/operation_mode/change_to_stop</li> <li>/api/operation_mode/disable_autoware_control</li> <li>/api/operation_mode/enable_autoware_control</li> <li>/api/operation_mode/state</li> <li>/api/planning/steering_factors</li> <li>/api/planning/velocity_factors</li> <li>/api/routing/clear_route</li> <li>/api/routing/route</li> <li>/api/routing/set_route</li> <li>/api/routing/set_route_points</li> <li>/api/routing/state</li> <li>/api/vehicle/dimensions</li> <li>/api/vehicle/doors/layout</li> <li>/api/vehicle/doors/status</li> <li>/api/vehicle/kinematics</li> <li>/api/vehicle/status</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/fail_safe/mrm_state/","title":"/api/fail_safe/mrm_state","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/fail_safe/mrm_state/#apifail_safemrm_state","title":"/api/fail_safe/mrm_state","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/MrmState</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/fail_safe/mrm_state/#description","title":"Description","text":"<p>Get the MRM state. For details, see the fail-safe.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/fail_safe/mrm_state/#message","title":"Message","text":"Name Type Description state uint16 The state of MRM operation. behavior uint16 The currently selected behavior of MRM."},{"location":"design/autoware-interfaces/ad-api/list/api/interface/version/","title":"/api/interface/version","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/interface/version/#apiinterfaceversion","title":"/api/interface/version","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_version_msgs/srv/InterfaceVersion</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/interface/version/#description","title":"Description","text":"<p>Get the interface version. The version follows Semantic Versioning.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/interface/version/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/interface/version/#response","title":"Response","text":"Name Type Description major uint16 major version minor uint16 minor version patch uint16 patch version"},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialization_state/","title":"/api/localization/initialization_state","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialization_state/#apilocalizationinitialization_state","title":"/api/localization/initialization_state","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/LocalizationInitializationState</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialization_state/#description","title":"Description","text":"<p>Get the initialization state of localization. For details, see the localization.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialization_state/#message","title":"Message","text":"Name Type Description state uint16 A value of the localization initialization state."},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialize/","title":"/api/localization/initialize","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialize/#apilocalizationinitialize","title":"/api/localization/initialize","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/InitializeLocalization</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialize/#description","title":"Description","text":"<p>Request to initialize localization. For details, see the localization.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialize/#request","title":"Request","text":"Name Type Description pose geometry_msgs/msg/PoseWithCovarianceStamped[&lt;=1] A global pose as the initial guess. If omitted, the GNSS pose will be used."},{"location":"design/autoware-interfaces/ad-api/list/api/localization/initialize/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/accept_start/","title":"/api/motion/accept_start","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/motion/accept_start/#apimotionaccept_start","title":"/api/motion/accept_start","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/AcceptStart</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/accept_start/#description","title":"Description","text":"<p>Accept the vehicle to start. This API can be used when the motion state is STARTING.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/accept_start/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/accept_start/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/state/","title":"/api/motion/state","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/motion/state/#apimotionstate","title":"/api/motion/state","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/MotionState</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/state/#description","title":"Description","text":"<p>Get the motion state. For details, see the motion state.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/motion/state/#message","title":"Message","text":"Name Type Description state uint16 A value of the motion state."},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_autonomous/","title":"/api/operation_mode/change_to_autonomous","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_autonomous/#apioperation_modechange_to_autonomous","title":"/api/operation_mode/change_to_autonomous","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_autonomous/#description","title":"Description","text":"<p>Change the operation mode to autonomous. For details, see the operation mode.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_autonomous/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_autonomous/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_local/","title":"/api/operation_mode/change_to_local","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_local/#apioperation_modechange_to_local","title":"/api/operation_mode/change_to_local","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_local/#description","title":"Description","text":"<p>Change the operation mode to local. For details, see the operation mode.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_local/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_local/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_remote/","title":"/api/operation_mode/change_to_remote","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_remote/#apioperation_modechange_to_remote","title":"/api/operation_mode/change_to_remote","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_remote/#description","title":"Description","text":"<p>Change the operation mode to remote. For details, see the operation mode.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_remote/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_remote/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_stop/","title":"/api/operation_mode/change_to_stop","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_stop/#apioperation_modechange_to_stop","title":"/api/operation_mode/change_to_stop","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_stop/#description","title":"Description","text":"<p>Change the operation mode to stop. For details, see the operation mode.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_stop/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/change_to_stop/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/disable_autoware_control/","title":"/api/operation_mode/disable_autoware_control","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/disable_autoware_control/#apioperation_modedisable_autoware_control","title":"/api/operation_mode/disable_autoware_control","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/disable_autoware_control/#description","title":"Description","text":"<p>Disable vehicle control by Autoware. For details, see the operation mode. This API fails if the vehicle does not support mode change by software.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/disable_autoware_control/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/disable_autoware_control/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/enable_autoware_control/","title":"/api/operation_mode/enable_autoware_control","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/enable_autoware_control/#apioperation_modeenable_autoware_control","title":"/api/operation_mode/enable_autoware_control","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/enable_autoware_control/#description","title":"Description","text":"<p>Enable vehicle control by Autoware. For details, see the operation mode. This API fails if the vehicle does not support mode change by software.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/enable_autoware_control/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/enable_autoware_control/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/state/","title":"/api/operation_mode/state","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/state/#apioperation_modestate","title":"/api/operation_mode/state","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/OperationModeState</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/state/#description","title":"Description","text":"<p>Get the operation mode state. For details, see the operation mode.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/operation_mode/state/#message","title":"Message","text":"Name Type Description mode uint8 The selected command for Autoware control. is_autoware_control_enabled bool True if vehicle control by Autoware is enabled. is_in_transition bool True if the operation mode is in transition. is_stop_mode_available bool True if the operation mode can be changed to stop. is_autonomous_mode_available bool True if the operation mode can be changed to autonomous. is_local_mode_available bool True if the operation mode can be changed to local. is_remote_mode_available bool True if the operation mode can be changed to remote."},{"location":"design/autoware-interfaces/ad-api/list/api/planning/steering_factors/","title":"/api/planning/steering_factors","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/planning/steering_factors/#apiplanningsteering_factors","title":"/api/planning/steering_factors","text":"<ul> <li>Method: realtime stream</li> <li>Type: autoware_adapi_v1_msgs/msg/SteeringFactorArray</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/planning/steering_factors/#description","title":"Description","text":"<p>Get the steering factors, sorted in ascending order of distance. For details, see the planning factors.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/planning/steering_factors/#message","title":"Message","text":"Name Type Description factors.pose geometry_msgs/msg/Pose[2] The base link pose related to the steering factor. factors.distance float32[2] The distance from the base link to the above pose. factors.type uint16 The type of the steering factor. factors.direction uint16 The direction of the steering factor. factors.status uint16 The status of the steering factor. factors.detail string The additional information of the steering factor."},{"location":"design/autoware-interfaces/ad-api/list/api/planning/velocity_factors/","title":"/api/planning/velocity_factors","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/planning/velocity_factors/#apiplanningvelocity_factors","title":"/api/planning/velocity_factors","text":"<ul> <li>Method: realtime stream</li> <li>Type: autoware_adapi_v1_msgs/msg/VelocityFactorArray</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/planning/velocity_factors/#description","title":"Description","text":"<p>Get the velocity factors, sorted in ascending order of distance. For details, see the planning factors.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/planning/velocity_factors/#message","title":"Message","text":"Name Type Description factors.pose geometry_msgs/msg/Pose The base link pose related to the velocity factor. factors.distance float32 The distance from the base link to the above pose. factors.type uint16 The type of the velocity factor. factors.status uint16 The status of the velocity factor. factors.detail string The additional information of the velocity factor."},{"location":"design/autoware-interfaces/ad-api/list/api/routing/clear_route/","title":"/api/routing/clear_route","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/routing/clear_route/#apiroutingclear_route","title":"/api/routing/clear_route","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/ClearRoute</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/clear_route/#description","title":"Description","text":"<p>Clear the route.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/clear_route/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/clear_route/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/route/","title":"/api/routing/route","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/routing/route/#apiroutingroute","title":"/api/routing/route","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/Route</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/route/#description","title":"Description","text":"<p>Get the route with the waypoint segments in lanelet format. It is empty if route is not set.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/route/#message","title":"Message","text":"Name Type Description header std_msgs/msg/Header header for pose transformation data autoware_adapi_v1_msgs/msg/RouteData[&lt;=1] The route in lanelet format"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route/","title":"/api/routing/set_route","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route/#apiroutingset_route","title":"/api/routing/set_route","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/SetRoute</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route/#description","title":"Description","text":"<p>Set the route with the waypoint segments in lanelet format. If start pose is not specified, the current pose will be used.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route/#request","title":"Request","text":"Name Type Description header std_msgs/msg/Header header for pose transformation goal geometry_msgs/msg/Pose goal pose segments autoware_adapi_v1_msgs/msg/RouteSegment[] waypoint segments in lanelet format"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route_points/","title":"/api/routing/set_route_points","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route_points/#apiroutingset_route_points","title":"/api/routing/set_route_points","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/SetRoutePoints</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route_points/#description","title":"Description","text":"<p>Set the route with the waypoint poses. If start pose is not specified, the current pose will be used.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route_points/#request","title":"Request","text":"Name Type Description header std_msgs/msg/Header header for pose transformation goal geometry_msgs/msg/Pose goal pose waypoints geometry_msgs/msg/Pose[] waypoint poses"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/set_route_points/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/state/","title":"/api/routing/state","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/routing/state/#apiroutingstate","title":"/api/routing/state","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/RouteState</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/state/#description","title":"Description","text":"<p>Get the route state. For details, see the routing.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/routing/state/#message","title":"Message","text":"Name Type Description state uint16 A value of the route state."},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/dimensions/","title":"/api/vehicle/dimensions","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/dimensions/#apivehicledimensions","title":"/api/vehicle/dimensions","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/GetVehicleDimensions</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/dimensions/#description","title":"Description","text":"<p>Get the vehicle dimensions. See here for the definition of each value.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/dimensions/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/dimensions/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status dimensions autoware_adapi_v1_msgs/msg/VehicleDimensions vehicle dimensions"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/kinematics/","title":"/api/vehicle/kinematics","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/kinematics/#apivehiclekinematics","title":"/api/vehicle/kinematics","text":"<ul> <li>Method: realtime stream</li> <li>Type: autoware_adapi_v1_msgs/msg/VehicleKinematics</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/kinematics/#description","title":"Description","text":"<p>Publish vehicle kinematics.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/kinematics/#message","title":"Message","text":"Name Type Description geographic_pose geographic_msgs/msg/GeoPointStamped The longitude and latitude of the vehicle. If the map uses local coordinates, it will not be available. pose geometry_msgs/msg/PoseWithCovarianceStamped The pose with covariance from the base link. twist geometry_msgs/msg/TwistWithCovarianceStamped Vehicle current twist with covariance. accel geometry_msgs/msg/AccelWithCovarianceStamped Vehicle current acceleration with covariance."},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/status/","title":"/api/vehicle/status","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/status/#apivehiclestatus","title":"/api/vehicle/status","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/VehicleStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/status/#description","title":"Description","text":"<p>Publish vehicle state information.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/status/#message","title":"Message","text":"Name Type Description gear autoware_adapi_v1_msgs/msg/Gear Gear status. turn_indicators autoware_adapi_v1_msgs/msg/TurnIndicators Turn indicators status, only either left or right will be enabled. hazard_lights autoware_adapi_v1_msgs/msg/HazardLights Hazard lights status. steering_tire_angle float64 Vehicle current tire angle in radian. energy_percentage float32 Battery percentage or fuel percentage, it will depends on the vehicle."},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/layout/","title":"/api/vehicle/doors/layout","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/layout/#apivehicledoorslayout","title":"/api/vehicle/doors/layout","text":"<ul> <li>Method: function call</li> <li>Type: autoware_adapi_v1_msgs/srv/GetDoorLayout</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/layout/#description","title":"Description","text":"<p>Get the door layout. It is an array of pose for each door. The array index corresponds to the door status.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/layout/#request","title":"Request","text":"<p>None</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/layout/#response","title":"Response","text":"Name Type Description status autoware_adapi_v1_msgs/msg/ResponseStatus response status doors.roles uint8[] The roles of the door in the service the vehicle provides. doors.description string The description of the door for display in the interface."},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/status/","title":"/api/vehicle/doors/status","text":""},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/status/#apivehicledoorsstatus","title":"/api/vehicle/doors/status","text":"<ul> <li>Method: notification</li> <li>Type: autoware_adapi_v1_msgs/msg/DoorStatusArray</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/status/#description","title":"Description","text":"<p>Publish door status in array according to the door location information that received from vehicle info service.</p>"},{"location":"design/autoware-interfaces/ad-api/list/api/vehicle/doors/status/#message","title":"Message","text":"Name Type Description doors.status uint8 current door status"},{"location":"design/autoware-interfaces/ad-api/stories/bus-service/","title":"User story of bus service","text":""},{"location":"design/autoware-interfaces/ad-api/stories/bus-service/#user-story-of-bus-service","title":"User story of bus service","text":""},{"location":"design/autoware-interfaces/ad-api/stories/bus-service/#overview","title":"Overview","text":"<p>This user story is a bus service that goes around the designated stops.</p>"},{"location":"design/autoware-interfaces/ad-api/stories/bus-service/#scenario","title":"Scenario","text":"Step Operation Use Case 1 Startup the autonomous driving system. Launch and terminate 2 Drive the vehicle from the garage to the waiting position. Change the operation mode 3 Enable autonomous control. Change the operation mode 4 Drive the vehicle to the next bus stop. Drive to the designated position 5 Get on and off the vehicle. Get on and get off 6 Return to step 4 unless it's the last bus stop. 7 Drive the vehicle to the waiting position. Drive to the designated position 8 Drive the vehicle from the waiting position to the garage. Change the operation mode 9 Shutdown the autonomous driving system. Launch and terminate"},{"location":"design/autoware-interfaces/ad-api/stories/taxi-service/","title":"User story of bus service","text":""},{"location":"design/autoware-interfaces/ad-api/stories/taxi-service/#user-story-of-bus-service","title":"User story of bus service","text":""},{"location":"design/autoware-interfaces/ad-api/stories/taxi-service/#overview","title":"Overview","text":"<p>This user story is a taxi service that picks up passengers and drives them to their destination.</p>"},{"location":"design/autoware-interfaces/ad-api/stories/taxi-service/#scenario","title":"Scenario","text":"Step Operation Use Case 1 Startup the autonomous driving system. Launch and terminate 2 Drive the vehicle from the garage to the waiting position. Change the operation mode 3 Enable autonomous control. Change the operation mode 4 Drive the vehicle to the position to pick up. Drive to the designated position 5 Get on the vehicle. Get on and get off 6 Drive the vehicle to the destination. Drive to the designated position 7 Get off the vehicle. Get on and get off 8 Drive the vehicle to the waiting position. Drive to the designated position 9 Return to step 4 if there is another request. 10 Drive the vehicle from the waiting position to the garage. Change the operation mode 11 Shutdown the autonomous driving system. Launch and terminate"},{"location":"design/autoware-interfaces/ad-api/types/","title":"Types of Autoware AD API","text":""},{"location":"design/autoware-interfaces/ad-api/types/#types-of-autoware-ad-api","title":"Types of Autoware AD API","text":"<ul> <li>autoware_adapi_v1_msgs/msg/DoorLayout</li> <li>autoware_adapi_v1_msgs/msg/DoorStatus</li> <li>autoware_adapi_v1_msgs/msg/DoorStatusArray</li> <li>autoware_adapi_v1_msgs/msg/Gear</li> <li>autoware_adapi_v1_msgs/msg/HazardLights</li> <li>autoware_adapi_v1_msgs/msg/LocalizationInitializationState</li> <li>autoware_adapi_v1_msgs/msg/MotionState</li> <li>autoware_adapi_v1_msgs/msg/MrmState</li> <li>autoware_adapi_v1_msgs/msg/OperationModeState</li> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> <li>autoware_adapi_v1_msgs/msg/Route</li> <li>autoware_adapi_v1_msgs/msg/RouteData</li> <li>autoware_adapi_v1_msgs/msg/RouteOption</li> <li>autoware_adapi_v1_msgs/msg/RoutePrimitive</li> <li>autoware_adapi_v1_msgs/msg/RouteSegment</li> <li>autoware_adapi_v1_msgs/msg/RouteState</li> <li>autoware_adapi_v1_msgs/msg/SteeringFactor</li> <li>autoware_adapi_v1_msgs/msg/SteeringFactorArray</li> <li>autoware_adapi_v1_msgs/msg/TurnIndicators</li> <li>autoware_adapi_v1_msgs/msg/VehicleDimensions</li> <li>autoware_adapi_v1_msgs/msg/VehicleKinematics</li> <li>autoware_adapi_v1_msgs/msg/VehicleStatus</li> <li>autoware_adapi_v1_msgs/msg/VelocityFactor</li> <li>autoware_adapi_v1_msgs/msg/VelocityFactorArray</li> <li>autoware_adapi_v1_msgs/srv/AcceptStart</li> <li>autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> <li>autoware_adapi_v1_msgs/srv/ClearRoute</li> <li>autoware_adapi_v1_msgs/srv/GetDoorLayout</li> <li>autoware_adapi_v1_msgs/srv/GetVehicleDimensions</li> <li>autoware_adapi_v1_msgs/srv/InitializeLocalization</li> <li>autoware_adapi_v1_msgs/srv/SetRoute</li> <li>autoware_adapi_v1_msgs/srv/SetRoutePoints</li> <li>autoware_adapi_version_msgs/srv/InterfaceVersion</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorLayout/","title":"autoware_adapi_v1_msgs/msg/DoorLayout","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorLayout/#autoware_adapi_v1_msgsmsgdoorlayout","title":"autoware_adapi_v1_msgs/msg/DoorLayout","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorLayout/#definition","title":"Definition","text":"<pre><code>uint8 GET_ON = 1\nuint8 GET_OFF = 2\n\nuint8[] roles\nstring description\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorLayout/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorLayout/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/srv/GetDoorLayout</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatus/","title":"autoware_adapi_v1_msgs/msg/DoorStatus","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatus/#autoware_adapi_v1_msgsmsgdoorstatus","title":"autoware_adapi_v1_msgs/msg/DoorStatus","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatus/#definition","title":"Definition","text":"<pre><code># constants for door status\nuint8 UNKNOWN = 0\nuint8 NOT_AVAILABLE = 1\nuint8 OPENED = 2\nuint8 CLOSED = 3\nuint8 OPENING = 4\nuint8 CLOSING = 5\n\nuint8 status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatus/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatus/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/DoorStatusArray</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatusArray/","title":"autoware_adapi_v1_msgs/msg/DoorStatusArray","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatusArray/#autoware_adapi_v1_msgsmsgdoorstatusarray","title":"autoware_adapi_v1_msgs/msg/DoorStatusArray","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatusArray/#definition","title":"Definition","text":"<pre><code>builtin_interfaces/Time stamp\nautoware_adapi_v1_msgs/DoorStatus[] doors\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatusArray/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/DoorStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/DoorStatusArray/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Gear/","title":"autoware_adapi_v1_msgs/msg/Gear","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Gear/#autoware_adapi_v1_msgsmsggear","title":"autoware_adapi_v1_msgs/msg/Gear","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Gear/#definition","title":"Definition","text":"<pre><code># constants\nuint8 UNKNOWN = 0\nuint8 NEUTRAL = 1\nuint8 DRIVE = 2\nuint8 REVERSE = 3\nuint8 PARK = 4\nuint8 LOW = 5\n\nuint8 status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Gear/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Gear/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/VehicleStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/HazardLights/","title":"autoware_adapi_v1_msgs/msg/HazardLights","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/HazardLights/#autoware_adapi_v1_msgsmsghazardlights","title":"autoware_adapi_v1_msgs/msg/HazardLights","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/HazardLights/#definition","title":"Definition","text":"<pre><code># constants\nuint8 UNKNOWN = 0\nuint8 DISABLE = 1\nuint8 ENABLE = 2\n\nuint8 status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/HazardLights/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/HazardLights/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/VehicleStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/LocalizationInitializationState/","title":"autoware_adapi_v1_msgs/msg/LocalizationInitializationState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/LocalizationInitializationState/#autoware_adapi_v1_msgsmsglocalizationinitializationstate","title":"autoware_adapi_v1_msgs/msg/LocalizationInitializationState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/LocalizationInitializationState/#definition","title":"Definition","text":"<pre><code>uint16 UNKNOWN = 0\nuint16 UNINITIALIZED = 1\nuint16 INITIALIZING = 2\nuint16 INITIALIZED = 3\n\nbuiltin_interfaces/Time stamp\nuint16 state\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/LocalizationInitializationState/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/LocalizationInitializationState/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MotionState/","title":"autoware_adapi_v1_msgs/msg/MotionState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MotionState/#autoware_adapi_v1_msgsmsgmotionstate","title":"autoware_adapi_v1_msgs/msg/MotionState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MotionState/#definition","title":"Definition","text":"<pre><code>uint16 UNKNOWN = 0\nuint16 STOPPED = 1\nuint16 STARTING = 2\nuint16 MOVING = 3\n\nbuiltin_interfaces/Time stamp\nuint16 state\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MotionState/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MotionState/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MrmState/","title":"autoware_adapi_v1_msgs/msg/MrmState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MrmState/#autoware_adapi_v1_msgsmsgmrmstate","title":"autoware_adapi_v1_msgs/msg/MrmState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MrmState/#definition","title":"Definition","text":"<pre><code>builtin_interfaces/Time stamp\n\n# For common use\nuint16 UNKNOWN = 0\n\n# For state\nuint16 NORMAL = 1\nuint16 MRM_OPERATING = 2\nuint16 MRM_SUCCEEDED = 3\nuint16 MRM_FAILED = 4\n\n# For behavior\nuint16 NONE = 1\nuint16 EMERGENCY_STOP = 2\nuint16 COMFORTABLE_STOP = 3\n\nuint16 state\nuint16 behavior\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MrmState/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/MrmState/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/OperationModeState/","title":"autoware_adapi_v1_msgs/msg/OperationModeState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/OperationModeState/#autoware_adapi_v1_msgsmsgoperationmodestate","title":"autoware_adapi_v1_msgs/msg/OperationModeState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/OperationModeState/#definition","title":"Definition","text":"<pre><code># constants for mode\nuint8 UNKNOWN = 0\nuint8 STOP = 1\nuint8 AUTONOMOUS = 2\nuint8 LOCAL = 3\nuint8 REMOTE = 4\n\n# variables\nbuiltin_interfaces/Time stamp\nuint8 mode\nbool is_autoware_control_enabled\nbool is_in_transition\nbool is_stop_mode_available\nbool is_autonomous_mode_available\nbool is_local_mode_available\nbool is_remote_mode_available\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/OperationModeState/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/OperationModeState/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/ResponseStatus/","title":"autoware_adapi_v1_msgs/msg/ResponseStatus","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/ResponseStatus/#autoware_adapi_v1_msgsmsgresponsestatus","title":"autoware_adapi_v1_msgs/msg/ResponseStatus","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/ResponseStatus/#definition","title":"Definition","text":"<pre><code># error code\nuint16 UNKNOWN = 50000\nuint16 SERVICE_UNREADY = 50001\nuint16 SERVICE_TIMEOUT = 50002\nuint16 TRANSFORM_ERROR = 50003\nuint16 PARAMETER_ERROR = 50004\n\n# warning code\nuint16 DEPRECATED = 60000\nuint16 NO_EFFECT = 60001\n\n# variables\nbool   success\nuint16 code\nstring message\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/ResponseStatus/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/ResponseStatus/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/srv/AcceptStart</li> <li>autoware_adapi_v1_msgs/srv/ChangeOperationMode</li> <li>autoware_adapi_v1_msgs/srv/ClearRoute</li> <li>autoware_adapi_v1_msgs/srv/GetDoorLayout</li> <li>autoware_adapi_v1_msgs/srv/GetVehicleDimensions</li> <li>autoware_adapi_v1_msgs/srv/InitializeLocalization</li> <li>autoware_adapi_v1_msgs/srv/SetRoute</li> <li>autoware_adapi_v1_msgs/srv/SetRoutePoints</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Route/","title":"autoware_adapi_v1_msgs/msg/Route","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Route/#autoware_adapi_v1_msgsmsgroute","title":"autoware_adapi_v1_msgs/msg/Route","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Route/#definition","title":"Definition","text":"<pre><code>std_msgs/Header header\nautoware_adapi_v1_msgs/RouteData[&lt;=1] data\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Route/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/RouteData</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/Route/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteData/","title":"autoware_adapi_v1_msgs/msg/RouteData","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteData/#autoware_adapi_v1_msgsmsgroutedata","title":"autoware_adapi_v1_msgs/msg/RouteData","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteData/#definition","title":"Definition","text":"<pre><code>geometry_msgs/Pose start\ngeometry_msgs/Pose goal\nautoware_adapi_v1_msgs/RouteSegment[] segments\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteData/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/RouteSegment</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteData/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/Route</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteOption/","title":"autoware_adapi_v1_msgs/msg/RouteOption","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteOption/#autoware_adapi_v1_msgsmsgrouteoption","title":"autoware_adapi_v1_msgs/msg/RouteOption","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteOption/#definition","title":"Definition","text":"<pre><code>bool allow_goal_modification\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteOption/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteOption/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/srv/SetRoute</li> <li>autoware_adapi_v1_msgs/srv/SetRoutePoints</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RoutePrimitive/","title":"autoware_adapi_v1_msgs/msg/RoutePrimitive","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RoutePrimitive/#autoware_adapi_v1_msgsmsgrouteprimitive","title":"autoware_adapi_v1_msgs/msg/RoutePrimitive","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RoutePrimitive/#definition","title":"Definition","text":"<pre><code>int64 id\nstring type  # The same id may be used for each type.\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RoutePrimitive/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RoutePrimitive/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/RouteSegment</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteSegment/","title":"autoware_adapi_v1_msgs/msg/RouteSegment","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteSegment/#autoware_adapi_v1_msgsmsgroutesegment","title":"autoware_adapi_v1_msgs/msg/RouteSegment","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteSegment/#definition","title":"Definition","text":"<pre><code>autoware_adapi_v1_msgs/RoutePrimitive   preferred\nautoware_adapi_v1_msgs/RoutePrimitive[] alternatives  # Does not include the preferred primitive.\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteSegment/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/RoutePrimitive</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteSegment/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/RouteData</li> <li>autoware_adapi_v1_msgs/srv/SetRoute</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteState/","title":"autoware_adapi_v1_msgs/msg/RouteState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteState/#autoware_adapi_v1_msgsmsgroutestate","title":"autoware_adapi_v1_msgs/msg/RouteState","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteState/#definition","title":"Definition","text":"<pre><code>uint16 UNKNOWN = 0\nuint16 UNSET = 1\nuint16 SET = 2\nuint16 ARRIVED = 3\nuint16 CHANGING = 4\n\nbuiltin_interfaces/Time stamp\nuint16 state\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteState/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/RouteState/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactor/","title":"autoware_adapi_v1_msgs/msg/SteeringFactor","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactor/#autoware_adapi_v1_msgsmsgsteeringfactor","title":"autoware_adapi_v1_msgs/msg/SteeringFactor","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactor/#definition","title":"Definition","text":"<pre><code># constants for common use\nuint16 UNKNOWN = 0\n\n# constants for type\nuint16 INTERSECTION = 1\nuint16 LANE_CHANGE = 2\nuint16 AVOIDANCE_PATH_CHANGE = 3\nuint16 AVOIDANCE_PATH_RETURN = 4\nuint16 STATION = 5\nuint16 PULL_OUT = 6 # Deprecated. Use START_PLANNER.\nuint16 START_PLANNER = 6\nuint16 PULL_OVER = 7  # Deprecated. Use GOAL_PLANNER.\nuint16 GOAL_PLANNER = 7\nuint16 EMERGENCY_OPERATION = 8\n\n# constants for direction\nuint16 LEFT = 1\nuint16 RIGHT = 2\nuint16 STRAIGHT = 3\n\n# constants for status\nuint16 APPROACHING = 1\nuint16 TRYING = 2\nuint16 TURNING = 3\n\n# variables\ngeometry_msgs/Pose[2] pose\nfloat32[2] distance\nuint16 type\nuint16 direction\nuint16 status\nstring detail\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactor/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactor/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/SteeringFactorArray</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactorArray/","title":"autoware_adapi_v1_msgs/msg/SteeringFactorArray","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactorArray/#autoware_adapi_v1_msgsmsgsteeringfactorarray","title":"autoware_adapi_v1_msgs/msg/SteeringFactorArray","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactorArray/#definition","title":"Definition","text":"<pre><code>std_msgs/Header header\nautoware_adapi_v1_msgs/SteeringFactor[] factors\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactorArray/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/SteeringFactor</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/SteeringFactorArray/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/TurnIndicators/","title":"autoware_adapi_v1_msgs/msg/TurnIndicators","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/TurnIndicators/#autoware_adapi_v1_msgsmsgturnindicators","title":"autoware_adapi_v1_msgs/msg/TurnIndicators","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/TurnIndicators/#definition","title":"Definition","text":"<pre><code># constants\nuint8 UNKNOWN = 0\nuint8 DISABLE = 1\nuint8 LEFT = 2\nuint8 RIGHT = 3\n\nuint8 status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/TurnIndicators/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/TurnIndicators/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/VehicleStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleDimensions/","title":"autoware_adapi_v1_msgs/msg/VehicleDimensions","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleDimensions/#autoware_adapi_v1_msgsmsgvehicledimensions","title":"autoware_adapi_v1_msgs/msg/VehicleDimensions","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleDimensions/#definition","title":"Definition","text":"<pre><code>float32 wheel_radius\nfloat32 wheel_width\nfloat32 wheel_base\nfloat32 wheel_tread\nfloat32 front_overhang\nfloat32 rear_overhang\nfloat32 left_overhang\nfloat32 right_overhang\nfloat32 height\ngeometry_msgs/Polygon footprint\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleDimensions/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleDimensions/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/srv/GetVehicleDimensions</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleKinematics/","title":"autoware_adapi_v1_msgs/msg/VehicleKinematics","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleKinematics/#autoware_adapi_v1_msgsmsgvehiclekinematics","title":"autoware_adapi_v1_msgs/msg/VehicleKinematics","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleKinematics/#definition","title":"Definition","text":"<pre><code># Geographic point, using the WGS 84 reference ellipsoid.\n# This data will be invalid If Autoware does not provide projection information between geographic coordinates and local coordinates.\ngeographic_msgs/GeoPointStamped geographic_pose\n\n# Local coordinate from the autoware\ngeometry_msgs/PoseWithCovarianceStamped pose\ngeometry_msgs/TwistWithCovarianceStamped twist\ngeometry_msgs/AccelWithCovarianceStamped accel\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleKinematics/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleKinematics/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleStatus/","title":"autoware_adapi_v1_msgs/msg/VehicleStatus","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleStatus/#autoware_adapi_v1_msgsmsgvehiclestatus","title":"autoware_adapi_v1_msgs/msg/VehicleStatus","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleStatus/#definition","title":"Definition","text":"<pre><code>builtin_interfaces/Time stamp\nautoware_adapi_v1_msgs/Gear gear\nautoware_adapi_v1_msgs/TurnIndicators turn_indicators\nautoware_adapi_v1_msgs/HazardLights hazard_lights\nfloat64 steering_tire_angle\nfloat32 energy_percentage  # Battery percentage or fuel percentage, it will depends on the vehicle.\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleStatus/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/Gear</li> <li>autoware_adapi_v1_msgs/msg/HazardLights</li> <li>autoware_adapi_v1_msgs/msg/TurnIndicators</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VehicleStatus/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactor/","title":"autoware_adapi_v1_msgs/msg/VelocityFactor","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactor/#autoware_adapi_v1_msgsmsgvelocityfactor","title":"autoware_adapi_v1_msgs/msg/VelocityFactor","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactor/#definition","title":"Definition","text":"<pre><code># constants for common use\nuint16 UNKNOWN = 0\n\n# constants for type\nuint16 SURROUNDING_OBSTACLE = 1\nuint16 ROUTE_OBSTACLE = 2\nuint16 INTERSECTION = 3\nuint16 CROSSWALK = 4\nuint16 REAR_CHECK = 5\nuint16 USER_DEFINED_DETECTION_AREA = 6\nuint16 NO_STOPPING_AREA = 7\nuint16 STOP_SIGN = 8\nuint16 TRAFFIC_SIGNAL = 9\nuint16 V2I_GATE_CONTROL_ENTER = 10\nuint16 V2I_GATE_CONTROL_LEAVE = 11\nuint16 MERGE = 12\nuint16 SIDEWALK = 13\nuint16 LANE_CHANGE = 14\nuint16 AVOIDANCE = 15\nuint16 EMERGENCY_STOP_OPERATION = 16\nuint16 NO_DRIVABLE_LANE = 17\n\n# constants for status\nuint16 APPROACHING = 1\nuint16 STOPPED = 2\n\n# variables\ngeometry_msgs/Pose pose\nfloat32 distance\nuint16 type\nuint16 status\nstring detail\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactor/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactor/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>autoware_adapi_v1_msgs/msg/VelocityFactorArray</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactorArray/","title":"autoware_adapi_v1_msgs/msg/VelocityFactorArray","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactorArray/#autoware_adapi_v1_msgsmsgvelocityfactorarray","title":"autoware_adapi_v1_msgs/msg/VelocityFactorArray","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactorArray/#definition","title":"Definition","text":"<pre><code>std_msgs/Header header\nautoware_adapi_v1_msgs/VelocityFactor[] factors\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactorArray/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/VelocityFactor</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/msg/VelocityFactorArray/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/AcceptStart/","title":"autoware_adapi_v1_msgs/srv/AcceptStart","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/AcceptStart/#autoware_adapi_v1_msgssrvacceptstart","title":"autoware_adapi_v1_msgs/srv/AcceptStart","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/AcceptStart/#definition","title":"Definition","text":"<pre><code>---\nuint16 ERROR_NOT_STARTING = 1\nautoware_adapi_v1_msgs/ResponseStatus status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/AcceptStart/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/AcceptStart/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ChangeOperationMode/","title":"autoware_adapi_v1_msgs/srv/ChangeOperationMode","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ChangeOperationMode/#autoware_adapi_v1_msgssrvchangeoperationmode","title":"autoware_adapi_v1_msgs/srv/ChangeOperationMode","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ChangeOperationMode/#definition","title":"Definition","text":"<pre><code>---\nuint16 ERROR_NOT_AVAILABLE = 1\nuint16 ERROR_IN_TRANSITION = 2\nautoware_adapi_v1_msgs/ResponseStatus status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ChangeOperationMode/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ChangeOperationMode/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ClearRoute/","title":"autoware_adapi_v1_msgs/srv/ClearRoute","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ClearRoute/#autoware_adapi_v1_msgssrvclearroute","title":"autoware_adapi_v1_msgs/srv/ClearRoute","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ClearRoute/#definition","title":"Definition","text":"<pre><code>---\nautoware_adapi_v1_msgs/ResponseStatus status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ClearRoute/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/ClearRoute/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetDoorLayout/","title":"autoware_adapi_v1_msgs/srv/GetDoorLayout","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetDoorLayout/#autoware_adapi_v1_msgssrvgetdoorlayout","title":"autoware_adapi_v1_msgs/srv/GetDoorLayout","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetDoorLayout/#definition","title":"Definition","text":"<pre><code>---\nautoware_adapi_v1_msgs/ResponseStatus status\nautoware_adapi_v1_msgs/DoorLayout doors\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetDoorLayout/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/DoorLayout</li> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetDoorLayout/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetVehicleDimensions/","title":"autoware_adapi_v1_msgs/srv/GetVehicleDimensions","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetVehicleDimensions/#autoware_adapi_v1_msgssrvgetvehicledimensions","title":"autoware_adapi_v1_msgs/srv/GetVehicleDimensions","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetVehicleDimensions/#definition","title":"Definition","text":"<pre><code>---\nautoware_adapi_v1_msgs/ResponseStatus status\nautoware_adapi_v1_msgs/VehicleDimensions dimensions\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetVehicleDimensions/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> <li>autoware_adapi_v1_msgs/msg/VehicleDimensions</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/GetVehicleDimensions/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/InitializeLocalization/","title":"autoware_adapi_v1_msgs/srv/InitializeLocalization","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/InitializeLocalization/#autoware_adapi_v1_msgssrvinitializelocalization","title":"autoware_adapi_v1_msgs/srv/InitializeLocalization","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/InitializeLocalization/#definition","title":"Definition","text":"<pre><code>geometry_msgs/PoseWithCovarianceStamped[&lt;=1] pose\n---\nuint16 ERROR_UNSAFE = 1\nuint16 ERROR_GNSS_SUPPORT = 2\nuint16 ERROR_GNSS = 3\nuint16 ERROR_ESTIMATION = 4\nautoware_adapi_v1_msgs/ResponseStatus status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/InitializeLocalization/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/InitializeLocalization/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoute/","title":"autoware_adapi_v1_msgs/srv/SetRoute","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoute/#autoware_adapi_v1_msgssrvsetroute","title":"autoware_adapi_v1_msgs/srv/SetRoute","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoute/#definition","title":"Definition","text":"<pre><code>std_msgs/Header header\nautoware_adapi_v1_msgs/RouteOption option\ngeometry_msgs/Pose goal\nautoware_adapi_v1_msgs/RouteSegment[] segments\n---\nuint16 ERROR_ROUTE_EXISTS = 1 # Deprecated. Use ERROR_INVALID_STATE.\nuint16 ERROR_INVALID_STATE = 1\nuint16 ERROR_PLANNER_UNREADY = 2\nuint16 ERROR_PLANNER_FAILED = 3\nuint16 ERROR_REROUTE_FAILED = 4\nautoware_adapi_v1_msgs/ResponseStatus status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoute/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> <li>autoware_adapi_v1_msgs/msg/RouteOption</li> <li>autoware_adapi_v1_msgs/msg/RouteSegment</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoute/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoutePoints/","title":"autoware_adapi_v1_msgs/srv/SetRoutePoints","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoutePoints/#autoware_adapi_v1_msgssrvsetroutepoints","title":"autoware_adapi_v1_msgs/srv/SetRoutePoints","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoutePoints/#definition","title":"Definition","text":"<pre><code>std_msgs/Header header\nautoware_adapi_v1_msgs/RouteOption option\ngeometry_msgs/Pose goal\ngeometry_msgs/Pose[] waypoints\n---\nuint16 ERROR_ROUTE_EXISTS = 1 # Deprecated. Use ERROR_INVALID_STATE.\nuint16 ERROR_INVALID_STATE = 1\nuint16 ERROR_PLANNER_UNREADY = 2\nuint16 ERROR_PLANNER_FAILED = 3\nuint16 ERROR_REROUTE_FAILED = 4\nautoware_adapi_v1_msgs/ResponseStatus status\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoutePoints/#this-type-uses","title":"This type uses","text":"<ul> <li>autoware_adapi_v1_msgs/msg/ResponseStatus</li> <li>autoware_adapi_v1_msgs/msg/RouteOption</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_v1_msgs/srv/SetRoutePoints/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_version_msgs/srv/InterfaceVersion/","title":"autoware_adapi_version_msgs/srv/InterfaceVersion","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_version_msgs/srv/InterfaceVersion/#autoware_adapi_version_msgssrvinterfaceversion","title":"autoware_adapi_version_msgs/srv/InterfaceVersion","text":""},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_version_msgs/srv/InterfaceVersion/#definition","title":"Definition","text":"<pre><code>---\nuint16 major\nuint16 minor\nuint16 patch\n</code></pre>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_version_msgs/srv/InterfaceVersion/#this-type-uses","title":"This type uses","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/types/autoware_adapi_version_msgs/srv/InterfaceVersion/#this-type-is-used-by","title":"This type is used by","text":"<ul> <li>None</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/change-operation-mode/","title":"Change the operation mode","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/change-operation-mode/#change-the-operation-mode","title":"Change the operation mode","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/change-operation-mode/#related-api","title":"Related API","text":"<ul> <li>Operation mode</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/change-operation-mode/#sequence","title":"Sequence","text":"<ul> <li> <p>Change the mode with software switch.</p> <p></p> </li> </ul> <ul> <li> <p>Change the mode with hardware switch.</p> <p></p> </li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/drive-designated-position/","title":"Drive to the designated position","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/drive-designated-position/#drive-to-the-designated-position","title":"Drive to the designated position","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/drive-designated-position/#related-api","title":"Related API","text":"<ul> <li>Driving</li> <li>Route</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/drive-designated-position/#sequence","title":"Sequence","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/get-on-off/","title":"Get on and get off","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/get-on-off/#get-on-and-get-off","title":"Get on and get off","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/get-on-off/#related-api","title":"Related API","text":"<ul> <li>Door</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/get-on-off/#sequence","title":"Sequence","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/initialize-pose/","title":"Initialize the pose","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/initialize-pose/#initialize-the-pose","title":"Initialize the pose","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/initialize-pose/#related-api","title":"Related API","text":"<ul> <li>Pose</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/initialize-pose/#sequence","title":"Sequence","text":"<ul> <li> <p>Initialization of the pose using input.</p> <p></p> </li> </ul> <ul> <li> <p>Initialization of the pose using GNSS.</p> <p></p> </li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/launch-terminate/","title":"Launch and terminate","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/launch-terminate/#launch-and-terminate","title":"Launch and terminate","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/launch-terminate/#related-api","title":"Related API","text":"<ul> <li>Interface</li> <li>Launcher</li> </ul>"},{"location":"design/autoware-interfaces/ad-api/use-cases/launch-terminate/#sequence","title":"Sequence","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/request-to-cooperate/","title":"Request to cooperate","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/request-to-cooperate/#request-to-cooperate","title":"Request to cooperate","text":"<p>Warning</p> <p>Under Construction</p> <p>AD API supports operator cooperation for vehicle decisions.</p>"},{"location":"design/autoware-interfaces/ad-api/use-cases/vehicle-monitoring/","title":"Vehicle monitoring","text":""},{"location":"design/autoware-interfaces/ad-api/use-cases/vehicle-monitoring/#vehicle-monitoring","title":"Vehicle monitoring","text":"<p>AD API provides current vehicle status for remote monitoring, visualization for passengers, etc. Use the API below depending on the data you want to monitor.</p>"},{"location":"design/autoware-interfaces/ad-api/use-cases/vehicle-monitoring/#vehicle-status","title":"Vehicle status","text":"<p>The vehicle status provides basic information such as kinematics, indicators, and dimensions. This allows a remote operator to know the position and velocity of the vehicle. For applications such as FMS, it can help find vehicles that need assistance, such as vehicles that are stuck or brake suddenly. It is also possible to determine the actual distance to an object from the vehicle dimensions.</p>"},{"location":"design/autoware-interfaces/ad-api/use-cases/vehicle-monitoring/#planning-factors","title":"Planning factors","text":"<p>The planning factors provides the planning status of the vehicle. HMI can be used to warn of sudden movements of the vehicle, and to share the stop reason with passengers for comfortable driving.</p>"},{"location":"design/autoware-interfaces/components/","title":"Component interfaces","text":""},{"location":"design/autoware-interfaces/components/#component-interfaces","title":"Component interfaces","text":"<p>Warning</p> <p>Under Construction</p> <p>See here for an overview.</p>"},{"location":"design/autoware-interfaces/components/control/","title":"Control","text":""},{"location":"design/autoware-interfaces/components/control/#control","title":"Control","text":""},{"location":"design/autoware-interfaces/components/control/#inputs","title":"Inputs","text":""},{"location":"design/autoware-interfaces/components/control/#vehicle-kinematic-state","title":"Vehicle kinematic state","text":"<p>Current position and orientation of ego. Published by the Localization module.</p> <ul> <li>nav_msgs/Odometry<ul> <li>std_msgs/Header header</li> <li>string child_frame_id</li> <li>geometry_msgs/PoseWithCovariance pose</li> <li>geometry_msgs/TwistWithCovariance twist</li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/control/#trajectory","title":"Trajectory","text":"<p>trajectory to be followed by the controller. See Outputs of Planning.</p>"},{"location":"design/autoware-interfaces/components/control/#steering-status","title":"Steering Status","text":"<p>Current steering of the ego vehicle. Published by the Vehicle Interface.</p> <ul> <li>Steering message (github discussion).<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>float32 steering_angle</li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/control/#actuation-status","title":"Actuation Status","text":"<p>Actuation status of the ego vehicle for acceleration, steering, and brake.</p> <p>TODO This represents the reported physical efforts exerted by the vehicle actuators. Published by the Vehicle Interface.</p> <ul> <li>ActuationStatus (github discussion).<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>float32 acceleration</li> <li>float32 steering</li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/control/#output","title":"Output","text":""},{"location":"design/autoware-interfaces/components/control/#vehicle-control-command","title":"Vehicle Control Command","text":"<p>A motion signal to drive the vehicle, achieved by the low-level controller in the vehicle layer. Used by the Vehicle Interface.</p> <ul> <li>autoware_auto_control_msgs/AckermannControlCommand<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>autoware_auto_control_msgs/AckermannLateralCommand lateral<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>float steering_tire_angle</li> <li>float steering_tire_rotation_rate</li> </ul> </li> <li>autoware_auto_control_msgs/LongitudinalCommand longitudinal<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>builtin_interfaces::msg::Duration duration</li> <li>builtin_interfaces::msg::Duration time_step</li> <li>float[] speeds</li> <li>float[] accelerations</li> <li>float[] jerks</li> </ul> </li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/","title":"Localization","text":""},{"location":"design/autoware-interfaces/components/localization/#localization","title":"Localization","text":""},{"location":"design/autoware-interfaces/components/localization/#inputs","title":"Inputs","text":""},{"location":"design/autoware-interfaces/components/localization/#pointcloud-map","title":"Pointcloud Map","text":"<p>Environment map created with point cloud, published by the map server.</p> <ul> <li>sensor_msgs/msg/PointCloud2</li> </ul> <p>A 3d point cloud map is used for LiDAR-based localization in Autoware.</p>"},{"location":"design/autoware-interfaces/components/localization/#manual-initial-pose","title":"Manual Initial Pose","text":"<p>Start pose of ego, published by the user interface.</p> <ul> <li>geometry_msgs/msg/PoseWithCovarianceStamped<ul> <li>std_msgs/msg/Header header</li> <li>geometry_msgs/msg/PoseWithCovariance pose<ul> <li>geometry_msgs/msg/Pose pose<ul> <li>geometry_msgs/msg/Point position</li> <li>geometry_msg/msg/Quaternion orientation</li> </ul> </li> <li>double[36] covariance</li> </ul> </li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/#3d-lidar-scanning","title":"3D-LiDAR Scanning","text":"<p>LiDAR scanning for NDT matching, published by the LiDAR sensor.</p> <ul> <li>sensor_msgs/msg/PointCloud2</li> </ul> <p>The raw 3D-LiDAR data needs to be processed by the point cloud pre-processing modules before being used for localization.</p>"},{"location":"design/autoware-interfaces/components/localization/#automatic-initial-pose","title":"Automatic Initial pose","text":"<p>Start pose of ego, calculated from INS(Inertial navigation sensor) sensing data.</p> <ul> <li>geometry_msgs/msg/PoseWithCovarianceStamped<ul> <li>std_msgs/msg/Header header</li> <li>geometry_msgs/msg/PoseWithCovariance pose<ul> <li>geometry_msgs/msg/Pose pose<ul> <li>geometry_msgs/msg/Point position</li> <li>geometry_msg/msg/Quaternion orientation</li> </ul> </li> <li>double[36] covariance</li> </ul> </li> </ul> </li> </ul> <p>When the initial pose is not set manually, the message can be used for automatic pose initialization.</p> <p>Current Geographic coordinate of the ego, published by the GNSS sensor.</p> <ul> <li>sensor_msgs/msg/NavSatFix<ul> <li>std_msgs/msg/Header header</li> <li>sensor_msgs/msg/NavSatStatus status</li> <li>double latitude</li> <li>double longitude</li> <li>double altitude</li> <li>double[9] position_covariance</li> <li>unit8 position_covariance_type</li> </ul> </li> </ul> <p>Current orientation of the ego, published by the GNSS-INS.</p> <ul> <li>autoware_sensing_msgs/msg/GnssInsOrientationStamped<ul> <li>std_msgs/Header header</li> <li>autoware_sensing_msgs/msg/GnssInsOrientation orientation<ul> <li>geometry_msgs/Quaternion orientation</li> <li>float32 rmse_rotation_x</li> <li>float32 rmse_rotation_y</li> <li>float32 rmse_rotation_z</li> </ul> </li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/#imu-data","title":"IMU Data","text":"<p>Current orientation, angular velocity and linear acceleration of ego, calculated from IMU sensing data.</p> <ul> <li>sensor_msgs/msg/Imu<ul> <li>std_msgs/msg/Header header</li> <li>geometry_msgs/msg/Quaternion orientation</li> <li>double[9] orientation_covariance</li> <li>geometry_msgs/msg/Vector3 angular_velocity</li> <li>double[9] angular_velocity_covariance</li> <li>geometry_msgs/msg/Vector3 linear_acceleration</li> <li>double[9] linear_acceleration_covariance</li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/#vehicle-velocity-status","title":"Vehicle Velocity Status","text":"<p>Current velocity of the ego vehicle, published by the vehicle interface.</p> <ul> <li>autoware_auto_vehicle_msgs/msg/VelocityReport<ul> <li>std_msgs/msg/Header header;</li> <li>float longitudinal_velocity;</li> <li>float lateral_velocity;</li> <li>float heading_rate;</li> </ul> </li> </ul> <p>Before the velocity input localization interface, module <code>vehicle_velocity_converter</code> converts message type <code>autoware_auto_vehicle_msgs/msg/VelocityReport</code> to <code>geometry_msgs/msg/TwistWithCovarianceStamped</code>.</p>"},{"location":"design/autoware-interfaces/components/localization/#outputs","title":"Outputs","text":""},{"location":"design/autoware-interfaces/components/localization/#vehicle-pose","title":"Vehicle pose","text":"<p>Current pose of ego, calculated from localization interface.</p> <ul> <li>geometry_msgs/msg/PoseWithCovarianceStamped<ul> <li>std_msgs/msg/Header header</li> <li>geometry_msg/PoseWithCovariance pose<ul> <li>geometry_msgs/msg/Pose pose<ul> <li>geometry_msgs/msg/Point position</li> <li>geometry_msgs/msg/Quaternion orientation</li> </ul> </li> <li>double[36] covariance</li> </ul> </li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/#vehicle-velocity","title":"Vehicle velocity","text":"<p>Current velocity of ego, calculated from localization interface.</p> <ul> <li>geometry_msgs/msg/TwistWithCovarianceStamped<ul> <li>std_msgs/msg/Header header</li> <li>geometry_msg/TwistWithCovariance twist<ul> <li>geometry_msgs/msg/Twist twist<ul> <li>geometry_msgs/msg/Vector3 linear</li> <li>geometry_msgs/msg/Vector3 angular</li> </ul> </li> <li>double[36] covariance</li> </ul> </li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/#vehicle-acceleration","title":"Vehicle acceleration","text":"<p>Current acceleration of ego, calculated from localization interface.</p> <ul> <li>geometry_msgs/msg/AccelWithCovarianceStamped<ul> <li>std_msgs/msg/Header header</li> <li>geometry_msg/AccelWithCovariance accel<ul> <li>geometry_msgs/msg/Accel accel<ul> <li>geometry_msgs/msg/Vector3 linear</li> <li>geometry_msgs/msg/Vector3 angular</li> </ul> </li> <li>double[36] covariance</li> </ul> </li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/localization/#vehicle-kinematic-state","title":"Vehicle kinematic state","text":"<p>Current pose, velocity and acceleration of ego, calculated from localization interface.</p> <p>Note: Kinematic state contains pose, velocity and acceleration. In the future, pose, velocity and acceleration will not be used as output for localization.</p> <ul> <li>autoware_msgs/autoware_localization_msgs/msg/KinematicState<ul> <li>std_msgs/msg/Header header</li> <li>string child_frame_id</li> <li>geometry_msgs/PoseWithCovariance pose_with_covariance</li> <li>geometry_msgs/TwistWithCovariance twist_with_covariance</li> <li>geometry_msgs/AccelWithCovariance accel_with_covariance</li> </ul> </li> </ul> <p>The message will be subscribed by the planning and control module.</p>"},{"location":"design/autoware-interfaces/components/localization/#localization-accuracy","title":"Localization Accuracy","text":"<p>Diagnostics information that indicates if the localization module works properly.</p> <p>TBD.</p>"},{"location":"design/autoware-interfaces/components/map/","title":"Map","text":""},{"location":"design/autoware-interfaces/components/map/#map","title":"Map","text":""},{"location":"design/autoware-interfaces/components/map/#overview","title":"Overview","text":"<p>Autoware relies on high-definition point cloud maps and vector maps of the driving environment to perform various tasks. Before launching Autoware, you need to load the pre-created map files.</p>"},{"location":"design/autoware-interfaces/components/map/#inputs","title":"Inputs","text":"<ul> <li>Point cloud maps (<code>.pcd</code>)</li> <li>Lanelet2 maps (<code>.osm</code>)</li> </ul> <p>Refer to Creating maps on how to create maps.</p>"},{"location":"design/autoware-interfaces/components/map/#outputs","title":"Outputs","text":""},{"location":"design/autoware-interfaces/components/map/#point-cloud-map","title":"Point cloud map","text":"<p>It loads point cloud files and publishes the maps to the other Autoware nodes in various configurations. Currently, it supports the following types:</p> <ul> <li>Raw point cloud map (sensor_msgs/msg/PointCloud2)</li> <li>Downsampled point cloud map (sensor_msgs/msg/PointCloud2)</li> <li>Partial point cloud map loading via ROS service (autoware_map_msgs/srv/GetPartialPointCloudMap)</li> <li>Differential point cloud map loading via ROS service (autoware_map_msgs/srv/GetDifferentialPointCloudMap)</li> </ul>"},{"location":"design/autoware-interfaces/components/map/#lanelet2-map","title":"Lanelet2 map","text":"<p>It loads a Lanelet2 file and publishes the map data as <code>autoware_auto_mapping_msgs/msg/HADMapBin</code> message. The lan/lon coordinates are projected onto the MGRS coordinates.</p> <ul> <li>autoware_auto_mapping_msgs/msg/HADMapBin<ul> <li>std_msgs/Header header</li> <li>string version_map_format</li> <li>string version_map</li> <li>string name_map</li> <li>uint8[] data</li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/map/#lanelet2-map-visualization","title":"Lanelet2 map visualization","text":"<p>Visualize <code>autoware_auto_mapping_msgs/HADMapBin</code> messages in <code>Rviz</code>.</p> <ul> <li>visualization_msgs/msg/MarkerArray</li> </ul>"},{"location":"design/autoware-interfaces/components/planning/","title":"Planning","text":""},{"location":"design/autoware-interfaces/components/planning/#planning","title":"Planning","text":"<p>This page provides specific specifications about the Interface of the Planning Component. Please refer to the planning architecture design document for high-level concepts and data flow.</p> <p>TODO: The detailed definitions (meanings of elements included in each topic) are not described yet, need to be updated.</p>"},{"location":"design/autoware-interfaces/components/planning/#input","title":"Input","text":""},{"location":"design/autoware-interfaces/components/planning/#from-map-component","title":"From Map Component","text":"Name Topic Type Description Vector Map <code>/map/vector_map</code> autoware_auto_mapping_msgs/msg/HADMapBin Map of the environment where the planning takes place."},{"location":"design/autoware-interfaces/components/planning/#from-localization-component","title":"From Localization Component","text":"Name Topic Type Description Vehicle Kinematic State <code>/localization/kinematic_state</code> nav_msgs/msg/Odometry Current position, orientation and velocity of ego. Vehicle Acceleration <code>/localization/acceleration</code> geometry_msgs/msg/AccelWithCovarianceStamped Current acceleration of ego. <p>TODO: acceleration information should be merged into the kinematic state.</p>"},{"location":"design/autoware-interfaces/components/planning/#from-perception-component","title":"From Perception Component","text":"Name Topic Type Description Objects <code>/perception/object_recognition/objects</code> autoware_auto_perception_msgs/msg/PredictedObjects Set of perceived objects around ego that need to be avoided or followed when planning a trajectory. This contains semantics information such as a object class (e.g. vehicle, pedestrian, etc) or a shape of the objects. Obstacles <code>/perception/obstacle_segmentation/pointcloud</code> sensor_msgs/msg/PointCloud2 Set of perceived obstacles around ego that need to be avoided or followed when planning a trajectory. This only contains a primitive information of the obstacle. No shape nor velocity information. Occupancy Grid Map <code>/perception/occupancy_grid_map/map</code> nav_msgs/msg/OccupancyGrid Contains the presence of obstacles and blind spot information (represented as UNKNOWN). Traffic Signal <code>/perception/traffic_light_recognition/traffic_signals</code> autoware_auto_perception_msgs/msg/TrafficSignalArray Contains the traffic signal information such as a color (green, yellow, read) and an arrow (right, left, straight). <p>TODO: The type of the <code>Obstacles</code> information should not depend on the specific sensor message type (now <code>PointCloud</code>). It needs to be fixed.</p>"},{"location":"design/autoware-interfaces/components/planning/#from-api","title":"From API","text":"Name Topic Type Description Max Velocity <code>/planning/scenario_planning/max_velocity_default</code> autoware_adapi_v1_msgs/srv/SetRoutePoints Indicate the maximum value of the vehicle speed plan Operation Mode <code>/system/operation_mode/state</code> autoware_adapi_v1_msgs/msg/OperationModeState Indicates the current operation mode (automatic/manual, etc.). Route Set <code>/planning/mission_planning/set_route</code> autoware_adapi_v1_msgs/srv/SetRoute Indicates to set the route when the vehicle is stopped. Route Points Set <code>/planning/mission_planning/set_route_points</code> autoware_adapi_v1_msgs/srv/SetRoutePoints Indicates to set the route with points when the vehicle is stopped. Route Change <code>/planning/mission_planning/change_route</code> autoware_adapi_v1_msgs/srv/SetRoute Indicates to change the route when the vehicle is moving. Route Points Change <code>/planning/mission_planning/change_route_points</code> autoware_adapi_v1_msgs/srv/SetRoutePoints Indicates to change the route with points when the vehicle is moving. Route Clear <code>/planning/mission_planning/clear_route</code> autoware_adapi_v1_msgs/srv/ClearRoute Indicates to clear the route information. MRM Route Set Points <code>/planning/mission_planning/mission_planner/srv/set_mrm_route</code> autoware_adapi_v1_msgs/srv/SetRoutePoints Indicates to set the emergency route. MRM Route Clear <code>/planning/mission_planning/mission_planner/srv/clear_mrm_route</code> autoware_adapi_v1_msgs/srv/SetRoutePoints Indicates to clear the emergency route."},{"location":"design/autoware-interfaces/components/planning/#output","title":"Output","text":""},{"location":"design/autoware-interfaces/components/planning/#to-control","title":"To Control","text":"Name Topic Type Description Trajectory <code>/planning/trajectory</code> autoware_auto_planning_msgs/msg/Trajectory A sequence of space and velocity and acceleration points to be followed by the controller. Turn Indicator <code>/planning/turn_indicators_cmd</code> autoware_auto_vehicle_msgs/msg/TurnIndicatorsCommand Turn indicator signal to be followed by the vehicle. Hazard Light <code>/planning/hazard_lights_cmd</code> autoware_auto_vehicle_msgs/msg/HazardLightsCommand Hazard light signal to be followed by the vehicle."},{"location":"design/autoware-interfaces/components/planning/#to-system","title":"To System","text":"Name Topic Type Description Diagnostics <code>/planning/hazard_lights_cmd</code> diagnostic_msgs/msg/DiagnosticArray Diagnostic status of the Planning component reported to the System component."},{"location":"design/autoware-interfaces/components/planning/#to-api","title":"To API","text":"Name Topic Type Description Path Candidate <code>/planning/path_candidate/*</code> autoware_auto_planning_msgs/msg/Path The path Autoware is about to take. Users can interrupt the operation based on the path candidate information. Steering Factor <code>/planning/steering_factor/*</code> autoware_adapi_v1_msgs/msg/SteeringFactorArray Information about the steering maneuvers performed by Autoware (e.g., steering to the right for a right turn, etc.) Velocity Factor <code>/planning/velocity_factors/*</code> autoware_adapi_v1_msgs/msg/VelocityFactorArray Information about the velocity maneuvers performed by Autoware (e.g., stop for an obstacle, etc.)"},{"location":"design/autoware-interfaces/components/planning/#planning-internal-interface","title":"Planning internal interface","text":"<p>This section explains the communication between the different planning modules shown in the Planning Architecture Design.</p> <p></p>"},{"location":"design/autoware-interfaces/components/planning/#from-mission-planning-to-scenario-planning","title":"From Mission Planning to Scenario Planning","text":"Name Topic Type Description Route <code>/planning/mission_planning/route</code> autoware_planning_msgs/msg/LaneletRoute A sequence of lane IDs on a Lanelet map, from the starting point to the destination."},{"location":"design/autoware-interfaces/components/planning/#from-behavior-planning-to-motion-planning","title":"From Behavior Planning to Motion Planning","text":"Name Topic Type Description Path <code>/planning/scenario_planning/lane_driving/behavior_planning/path</code> autoware_auto_planning_msgs/msg/Path A sequence of approximate vehicle positions for driving, along with information on the maximum speed and the drivable areas. Modules receiving this message are expected to make changes to the path within the constraints of the drivable areas and the maximum speed, generating the desired final trajectory."},{"location":"design/autoware-interfaces/components/planning/#from-scenario-planning-to-validation","title":"From Scenario Planning to Validation","text":"Name Topic Type Description Trajectory <code>/planning/scenario_planning/trajectory</code> autoware_auto_planning_msgs/msg/Trajectory A sequence of precise vehicle positions, speeds, and accelerations required for driving. It is expected that the vehicle will follow this trajectory."},{"location":"design/autoware-interfaces/components/vehicle-dimensions/","title":"Vehicle dimensions","text":""},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#vehicle-dimensions","title":"Vehicle dimensions","text":""},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#vehicle-axes-and-base_link","title":"Vehicle axes and base_link","text":"<p>The <code>base_link</code> frame is used very frequently throughout the Autoware stack, and is a projection of the rear-axle center onto the ground surface.</p> <ul> <li>Localization module outputs the <code>map</code> to <code>base_link</code> transformation.</li> <li>Planning module plans the poses for where the <code>base_link</code> frame should be in the future.</li> <li>Control module tries to fit <code>base_link</code> to incoming poses.</li> </ul>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#vehicle-dimensions_1","title":"Vehicle dimensions","text":""},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#wheelbase","title":"wheelbase","text":"<p>The distance between front and rear axles.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#track_width","title":"track_width","text":"<p>The distance between left and right wheels.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#overhangs","title":"Overhangs","text":"<p>Overhangs are part of the minimum safety box calculation.</p> <p>When measuring overhangs, side mirrors, protruding sensors and wheels should be taken into consideration.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#left_overhang","title":"left_overhang","text":"<p>The distance between the axis centers of the left wheels and the left-most point of the vehicle.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#right_overhang","title":"right_overhang","text":"<p>The distance between the axis centers of the right wheels and the right-most point of the vehicle.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#front_overhang","title":"front_overhang","text":"<p>The distance between the front axle and the foremost point of the vehicle.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#rear_overhang","title":"rear_overhang","text":"<p>The distance between the rear axle and the rear-most point of the vehicle.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#vehicle_length","title":"vehicle_length","text":"<p>Total length of the vehicle. Calculated by <code>front_overhang + wheelbase + rear_overhang</code></p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#vehicle_width","title":"vehicle_width","text":"<p>Total width of the vehicle. Calculated by <code>left_overhang + track_width + right_overhang</code></p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#wheel-parameters","title":"Wheel parameters","text":""},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#wheel_width","title":"wheel_width","text":"<p>The lateral width of a wheel tire, primarily used for dead reckoning.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#wheel_radius","title":"wheel_radius","text":"<p>The radius of the wheel, primarily used for dead reckoning.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#polygon_footprint","title":"polygon_footprint","text":"<p>The polygon defines the minimum collision area for the vehicle.</p> <p>The points should be ordered clockwise, with the origin on the <code>base_link</code>.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#wheel-orientations","title":"Wheel orientations","text":"<p>If the vehicle is going forward, a positive wheel angle will result in the vehicle turning left.</p> <p>Autoware assumes the rear wheels don't turn on <code>z</code> axis.</p>"},{"location":"design/autoware-interfaces/components/vehicle-dimensions/#notice","title":"Notice","text":"<p>The vehicle used in the illustrations was created by xvlblo22 and is from https://www.turbosquid.com/3d-models/modular-sedan-3d-model-1590886.</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/","title":"Vehicle Interface","text":""},{"location":"design/autoware-interfaces/components/vehicle-interface/#vehicle-interface","title":"Vehicle Interface","text":"<p>The <code>Vehicle Interface</code> receives the <code>Vehicle Signal Commands</code> and <code>Vehicle Control Commands</code> and publishes the vehicle status. It also communicates with vehicle by the vehicle-specific protocol.</p> <p>The <code>Gate</code> switches multiple <code>Vehicle Control Commands</code>. These signals include autonomous diving command, joystick, remote control, and emergency operation, etc. The <code>Adapter</code> converts generalized control command (target steering, steering rate, velocity, acceleration, jerk) into vehicle-specific control values (steering-torque, wheel-torque, voltage, pressure, accel pedal position, etc).</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#inputs","title":"Inputs","text":""},{"location":"design/autoware-interfaces/components/vehicle-interface/#error-status","title":"Error status","text":"<p>(See Inputs of Planning.)</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#vehicle-control-command","title":"Vehicle Control Command","text":"<p>(See Output of Control.)</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#vehicle-signals-commands","title":"Vehicle Signals Commands","text":"<p>Commands for various elements of the vehicle unrelated to motion. Published by the Planning module.</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#outputs","title":"Outputs","text":""},{"location":"design/autoware-interfaces/components/vehicle-interface/#vehicle-signal-reports","title":"Vehicle Signal Reports","text":"<p>Reports for various elements of the vehicle unrelated to motion. Published by the Vehicle Interface.</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#vehicle-odometry","title":"Vehicle Odometry","text":"<p>Odometry of the vehicle. Used by the Localization module to update the pose of the vehicle in the map.</p> <ul> <li>geometry_msgs/TwistWithCovarianceStamped odometry</li> </ul>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#steering-status","title":"Steering Status","text":"<p>Steering of the ego vehicle. Published by the Vehicle Interface.</p> <ul> <li>Steering message (github discussion).<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>float32 steering_angle</li> </ul> </li> </ul>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#actuation-status","title":"Actuation Status","text":"<p>Actuation status of the ego vehicle for acceleration, steering, and brake. This represents the reported physical efforts exerted by the vehicle actuators. Published by the Vehicle Interface.</p> <ul> <li>ActuationStatus (github discussion).<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>float32 acceleration</li> <li>float32 steering</li> <li>float32 brake</li> </ul> </li> </ul> <p>The message definition is under discussion.</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#actuation-command","title":"Actuation Command","text":"<p>Actuation command sent to the ego vehicle. This represents the requested physical efforts to be exerted by the vehicle actuators. Published by the Vehicle Interface as generated by the adapter.</p> <ul> <li>ActuationCommand (github discussion.)<ul> <li>builtin_interfaces::msg::Time stamp</li> <li>float32 acceleration</li> <li>float32 steering</li> <li>float32 brake</li> </ul> </li> </ul> <p>The message definition is under discussion.</p>"},{"location":"design/autoware-interfaces/components/vehicle-interface/#vehicle-communication","title":"Vehicle Communication","text":"<p>Vehicle specific messages protocol like CAN (Controller Area Network).</p>"},{"location":"design/configuration-management/","title":"Configuration management","text":""},{"location":"design/configuration-management/#configuration-management","title":"Configuration management","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/configuration-management/development-process/","title":"Development process","text":""},{"location":"design/configuration-management/development-process/#development-process","title":"Development process","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/configuration-management/release-process/","title":"Release process","text":""},{"location":"design/configuration-management/release-process/#release-process","title":"Release process","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"design/configuration-management/repository-structure/","title":"Repository structure","text":""},{"location":"design/configuration-management/repository-structure/#repository-structure","title":"Repository structure","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"how-to-guides/","title":"How-to guides","text":""},{"location":"how-to-guides/#how-to-guides","title":"How-to guides","text":""},{"location":"how-to-guides/#integrating-autoware","title":"Integrating Autoware","text":"<ul> <li>Overview</li> </ul>"},{"location":"how-to-guides/#others","title":"Others","text":"<ul> <li>Debug Autoware</li> <li>Running Autoware without CUDA</li> <li>Fixing dependent package versions</li> <li>Add a custom ROS message</li> <li>Determining component dependencies</li> <li>Advanced usage of colcon</li> <li>Applying Clang-Tidy to ROS packages</li> <li>Using Eagleye in Autoware</li> </ul> <p>TODO: Write the following contents.</p> <ul> <li>Create an Autoware package</li> <li>etc.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-your-autoware-meta-repository/","title":"1. Creating your Autoware meta repository","text":""},{"location":"how-to-guides/integrating-autoware/creating-your-autoware-meta-repository/#creating-your-autoware-meta-repository","title":"Creating your Autoware meta repository","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"how-to-guides/integrating-autoware/launch-autoware/","title":"5. Launch Autoware","text":""},{"location":"how-to-guides/integrating-autoware/launch-autoware/#launch-autoware","title":"Launch Autoware","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"how-to-guides/integrating-autoware/overview/","title":"Overview","text":""},{"location":"how-to-guides/integrating-autoware/overview/#overview","title":"Overview","text":""},{"location":"how-to-guides/integrating-autoware/overview/#requirement-prepare-your-real-vehicle-hardware","title":"Requirement: prepare your real vehicle hardware","text":"<p>Prerequisites for the vehicle:</p> <ul> <li>An onboard computer that satisfies the Autoware installation prerequisites</li> <li>The following devices attached<ul> <li>Drive-by-wire interface</li> <li>LiDAR</li> <li>Optional: Inertial measurement unit</li> <li>Optional: Camera</li> <li>Optional: GNSS</li> </ul> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/overview/#1-creating-your-autoware-meta-repository","title":"1. Creating your Autoware meta-repository","text":"<p>Create your Autoware meta-repository. One easy way is to fork autowarefoundation/autoware and clone it. For how to fork a repository, refer to GitHub Docs.</p> <pre><code>git clone https://github.com/YOUR_NAME/autoware.git\n</code></pre> <p>If you set up multiple types of vehicles, adding a suffix like \"autoware.vehicle_A\" or \"autoware.vehicle_B\" is recommended.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#2-creating-the-your-vehicle-and-sensor-description","title":"2. Creating the your vehicle and sensor description","text":"<p>Next, you need to create description packages that define the vehicle and sensor configuration of your vehicle.</p> <p>Create the following two packages:</p> <ul> <li>YOUR_VEHICLE_launch (see here for example)</li> <li>YOUR_SENSOR_KIT_launch (see here for example)</li> </ul> <p>Once created, you need to update the <code>autoware.repos</code> file of your cloned Autoware repository to refer to these two description packages.</p> <pre><code>-  # sensor_kit\n-  sensor_kit/sample_sensor_kit_launch:\n-    type: git\n-    url: https://github.com/autowarefoundation/sample_sensor_kit_launch.git\n-    version: main\n-  # vehicle\n-  vehicle/sample_vehicle_launch:\n-    type: git\n-    url: https://github.com/autowarefoundation/sample_vehicle_launch.git\n-    version: main\n+  # sensor_kit\n+  sensor_kit/YOUR_SENSOR_KIT_launch:\n+    type: git\n+    url: https://github.com/YOUR_NAME/YOUR_SENSOR_KIT_launch.git\n+    version: main\n+  # vehicle\n+  vehicle/YOUR_VEHICLE_launch:\n+    type: git\n+    url: https://github.com/YOUR_NAME/YOUR_VEHICLE_launch.git\n+    version: main\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/overview/#adapt-your_vehicle_launch-for-autoware-launching-system","title":"Adapt YOUR_VEHICLE_launch for autoware launching system","text":""},{"location":"how-to-guides/integrating-autoware/overview/#at-your_vehicle_description","title":"At YOUR_VEHICLE_description","text":"<p>Define URDF and parameters in the vehicle description package (refer to the sample vehicle description package for an example).</p>"},{"location":"how-to-guides/integrating-autoware/overview/#at-your_vehicle_launch","title":"At YOUR_VEHICLE_launch","text":"<p>Create a launch file (refer to the sample vehicle launch package for example). If you have multiple vehicles with the same hardware setup, you can specify <code>vehicle_id</code> to distinguish them.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#adapt-your_sensor_kit_description-for-autoware-launching-system","title":"Adapt YOUR_SENSOR_KIT_description for autoware launching system","text":""},{"location":"how-to-guides/integrating-autoware/overview/#at-your_sensor_kit_description","title":"At YOUR_SENSOR_KIT_description","text":"<p>Define URDF and extrinsic parameters for all the sensors here (refer to the sample sensor kit description package for example). Note that you need to calibrate extrinsic parameters for all the sensors beforehand.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#at-your_sensor_kit_launch","title":"At YOUR_SENSOR_KIT_launch","text":"<p>Create <code>launch/sensing.launch.xml</code> that launches the interfaces of all the sensors on the vehicle. (refer to the sample sensor kit launch package for example).</p> <p>Note</p> <p>At this point, you are now able to run Autoware's Planning Simulator to do a basic test of your vehicle and sensing packages. To do so, you need to build and install Autoware using your cloned repository. Follow the steps for either Docker or source installation (starting from the dependency installation step) and then run the following command:</p> <pre><code>ros2 launch autoware_launch planning_simulator.launch.xml vehicle_model:=YOUR_VEHICLE sensor_kit:=YOUR_SENSOR_KIT map_path:=/PATH/TO/YOUR/MAP\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/overview/#3-create-a-vehicle_interface-package","title":"3. Create a <code>vehicle_interface</code> package","text":"<p>You need to create an interface package for your vehicle. The package is expected to provide the following two functions.</p> <ol> <li>Receive command messages from <code>vehicle_cmd_gate</code> and drive the vehicle accordingly</li> <li>Send vehicle status information to Autoware</li> </ol> <p>You can find detailed information about the requirements of the <code>vehicle_interface</code> package in the Vehicle Interface design documentation. You can also refer to TIER IV's pacmod_interface repository as an example of a vehicle interface package.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#4-create-maps","title":"4. Create maps","text":"<p>You need both a pointcloud map and a vector map in order to use Autoware. For more information on map design, please click here.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#create-a-pointcloud-map","title":"Create a pointcloud map","text":"<p>Use third-party tools such as a LiDAR-based SLAM (Simultaneous Localization And Mapping) package to create a pointcloud map in the <code>.pcd</code> format. For more information, please click here.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#create-vector-map","title":"Create vector map","text":"<p>Use third-party tools such as TIER IV's Vector Map Builder to create a Lanelet2 format <code>.osm</code> file.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#5-launch-autoware","title":"5. Launch Autoware","text":"<p>This section briefly explains how to run your vehicle with Autoware.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#install-autoware","title":"Install Autoware","text":"<p>Follow the installation steps of Autoware.</p>"},{"location":"how-to-guides/integrating-autoware/overview/#launch-autoware","title":"Launch Autoware","text":"<p>Launch Autoware with the following command:</p> <pre><code>ros2 launch autoware_launch autoware.launch.xml vehicle_model:=YOUR_VEHICLE sensor_kit:=YOUR_SENSOR_KIT map_path:=/PATH/TO/YOUR/MAP\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/overview/#set-initial-pose","title":"Set initial pose","text":"<p>If GNSS is available, Autoware automatically initializes the vehicle's pose.</p> <p>If not, you need to set the initial pose using the RViz GUI.</p> <ol> <li>Click the 2D Pose estimate button in the toolbar, or hit the P key</li> <li>In the 3D View pane, click and hold the left mouse button, and then drag to set the direction for the initial pose.</li> </ol>"},{"location":"how-to-guides/integrating-autoware/overview/#set-goal-pose","title":"Set goal pose","text":"<p>Set a goal pose for the ego vehicle.</p> <ol> <li>Click the 2D Nav Goal button in the toolbar, or hit the G key</li> <li>In the 3D View pane, click and hold the left mouse button, and then drag to set the direction for the goal pose.    If successful, you will see the calculated planning path on RViz.</li> </ol>"},{"location":"how-to-guides/integrating-autoware/overview/#engage","title":"Engage","text":"<p>In your terminal, execute the following command.</p> <pre><code>source ~/autoware.YOURS/install/setup.bash\nros2 topic pub /autoware.YOURS/engage autoware_auto_vehicle_msgs/msg/Engage \"engage: true\" -1\n</code></pre> <p>You can also engage via RViz with \"AutowareStatePanel\". The panel can be found in <code>Panels &gt; Add New Panel &gt; tier4_state_rviz_plugin &gt; AutowareStatePanel</code>.</p> <p></p> <p>Now the vehicle should drive along the calculated path!</p>"},{"location":"how-to-guides/integrating-autoware/overview/#6-tune-parameters-for-your-vehicle-environment","title":"6. Tune parameters for your vehicle &amp; environment","text":"<p>You may need to tune your parameters depending on the domain in which you will operate your vehicle.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/","title":"Creating maps","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/#creating-maps","title":"Creating maps","text":"<p>Autoware requires a pointcloud map and a vector map for the vehicle's operating environment. (Check the map design documentation page for the detailed specification).</p> <p>This page explains how users can create maps that can be used for Autoware.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/#creating-a-point-cloud-map","title":"Creating a point cloud map","text":"<p>Traditionally, a Mobile Mapping System (MMS) is used in order to create highly accurate large-scale point cloud maps. However, since a MMS requires high-end sensors for precise positioning, its operational cost can be very expensive and may not be suitable for a relatively small driving environment. Alternatively, a Simultaneous Localization And Mapping (SLAM) algorithm can be used to create a point cloud map from recorded LiDAR scans. Some of the useful open-source SLAM implementations are listed in this page.</p> <p>If you prefer proprietary software that is easy to use, you can try a fully automatic mapping tool from MAP IV, Inc., MapIV Engine. They currently provide a trial license for Autoware users free of charge.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/#creating-a-vector-map","title":"Creating a vector map","text":"<p>The easiest way to create an Autoware-compatible vector map is to use Vector Map Builder, a free web-based tool provided by TIER IV, Inc.. Vector Map Builder allows you to create lanes and add additional regulatory elements such as stop signs or traffic lights using a point cloud map as a reference.</p> <p>For open-source software options, MapToolbox is a plugin for Unity specifically designed to create Lanelet2 maps for Autoware. Although JOSM is another open-source tool that can be used to create Lanelet2 maps, be aware that a number of modifications must be done manually to make the map compatible with Autoware. This process can be tedious and time-consuming, so the use of JOSM is not recommended.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/#autoware-compatible-map-providers","title":"Autoware-compatible map providers","text":"<p>If it is not possible to create HD maps yourself, you can use a mapping service from the following Autoware-compatible map providers instead:</p> <ul> <li>MAP IV, Inc.</li> <li>AISAN TECHNOLOGY CO., LTD.</li> <li>TomTom</li> </ul> <p>The table below shows each company's mapping technology and the types of HD maps they support.</p> Company Mapping technology Available maps MAP IV, Inc. SLAM Point cloud and vector maps AISAN TECHNOLOGY CO., LTD. MMS Point cloud and vector maps TomTom MMS Vector map* <p>Note</p> <p>Maps provided by TomTom use their proprietary AutoStream format, not Lanelet2. The open-source AutoStreamForAutoware tool can be used to convert an AutoStream map to a Lanelet2 map. However, the converter is still in its early stages and has some known limitations.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/","title":"Available Open Source SLAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/#available-open-source-slam","title":"Available Open Source SLAM","text":"<p>This page provides the list of available open source Simultaneous Localization And Mapping (SLAM) implementation that can be used to generete a point cloud (.pcd) map file.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/#selecting-which-implementation-to-use","title":"Selecting which implementation to use","text":"<p>Lidar odometry drifts accumulatively as time goes by and there is solutions to solve that problem such as graph optimization, loop closure and using gps sensor to decrease accumulative drift error. Because of that, a SLAM algorithm should have loop closure feature, graph optimization and should use gps sensor. Additionally, some of the algorithms are using IMU sensor to add another factor to graph for decreasing drift error. While some of the algorithms requires 9-axis IMU sensor strictly, some of them requires only 6-axis IMU sensor or not even using the IMU sensor. Before choosing an algorithm to create maps for Autoware please consider these factors depends on your sensor setup or expected quality of generated map.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/#tips","title":"Tips","text":"<p>Commonly used open-source SLAM implementations are lidarslam-ros2 (LiDAR, IMU*) and LIO-SAM (LiDAR, IMU, GNSS). The required sensor data for each algorithm is specified in the parentheses, where an asterisk (*) indicates that such sensor data is optional. For supported LiDAR models, please check the Github repository of each algorithm. While these ROS 2-based SLAM implementations can be easily installed and used directly on the same machine that runs Autoware, it is important to note that they may not be as well-tested or as mature as ROS 1-based alternatives.</p> <p>The notable open-source SLAM implementations that are based on ROS 1 include hdl-graph-slam (LiDAR, IMU*, GNSS*), LeGO-LOAM (LiDAR, IMU*), LeGO-LOAM-BOR (LiDAR), and LIO-SAM (LiDAR, IMU, GNSS).</p> <p>Most of these algorithms already have a built-in loop-closure and pose graph optimization. However, if the built-in, automatic loop-closure fails or does not work correctly, you can use Interactive SLAM to adjust and optimize a pose graph manually.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/#list-of-third-party-slam-implementations","title":"List of Third Party SLAM Implementations","text":"Package Name Explanation Repository Link Loop Closure Sensors ROS Version Dependencies FAST-LIO-LC A computationally efficient and robust LiDAR-inertial odometry package with loop closure module and graph optimization https://github.com/yanliang-wang/FAST_LIO_LC &amp;check; LidarIMUGPS [Optional] ROS1 ROS MelodicPCL &gt;= 1.8Eigen &gt;= 3.3.4GTSAM &gt;= 4.0.0 FAST_LIO_SLAM FAST_LIO_SLAM is the integration of FAST_LIO and SC-PGO which is scan context based loop detection and GTSAM based pose-graph optimization https://github.com/gisbi-kim/FAST_LIO_SLAM &amp;check; LidarIMUGPS [Optional] ROS1 PCL &gt;= 1.8Eigen &gt;= 3.3.4 FD-SLAM FD_SLAM is Feature&amp;Distribution-based 3D LiDAR SLAM method based on Surface Representation Refinement. In this algorithm novel feature-based Lidar odometry used for fast scan-matching, and used a proposed UGICP method for keyframe matching https://github.com/SLAMWang/FD-SLAM &amp;check; LidarIMU [Optional]GPS ROS1 PCLg2oSuitesparse hdl_graph_slam An open source ROS package for real-time 6DOF SLAM using a 3D LIDAR. It is based on 3D Graph SLAM with NDT scan matching-based odometry estimation and loop detection. It also supports several graph constraints, such as GPS, IMU acceleration (gravity vector), IMU orientation (magnetic sensor), and floor plane (detected in a point cloud) https://github.com/koide3/hdl_graph_slam &amp;check; LidarIMU [Optional]GPS [Optional] ROS1 PCLg2oOpenMP IA-LIO-SAM IA_LIO_SLAM is created for data acquisition in unstructured environment and it is a framework for Intensity and Ambient Enhanced Lidar Inertial Odometry via Smoothing and Mapping that achieves highly accurate robot trajectories and mapping https://github.com/minwoo0611/IA_LIO_SAM &amp;check; LidarIMUGPS ROS1 GTSAM ISCLOAM ISCLOAM presents a robust loop closure detection approach by integrating both geometry and intensity information https://github.com/wh200720041/iscloam &amp;check; Lidar ROS1 Ubuntu 18.04ROS MelodicCeresPCLGTSAMOpenCV LeGO-LOAM-BOR LeGO-LOAM-BOR is improved version of the LeGO-LOAM by improving quality of the code, making it more readable and consistent. Also, performance is improved by converting processes to multi-threaded approach https://github.com/facontidavide/LeGO-LOAM-BOR &amp;check; LidarIMU ROS1 ROS MelodicPCLGTSAM LIO_SAM A framework that achieves highly accurate, real-time mobile robot trajectory estimation and map-building. It formulates lidar-inertial odometry atop a factor graph, allowing a multitude of relative and absolute measurements, including loop closures, to be incorporated from different sources as factors into the system https://github.com/TixiaoShan/LIO-SAM &amp;check; LidarIMUGPS [Optional] ROS1ROS2 PCLGTSAM Optimized-SC-F-LOAM An improved version of F-LOAM and uses an adaptive threshold to further judge the loop closure detection results and reducing false loop closure detections. Also it uses feature point-based matching to calculate the constraints between a pair of loop closure frame point clouds and decreases time consumption of constructing loop frame constraints https://github.com/SlamCabbage/Optimized-SC-F-LOAM &amp;check; Lidar ROS1 PCLGTSAMCeres SC-A-LOAM A real-time LiDAR SLAM package that integrates A-LOAM and ScanContext. https://github.com/gisbi-kim/SC-A-LOAM &amp;check; Lidar ROS1 GTSAM &gt;= 4.0 SC-LeGO-LOAM SC-LeGO-LOAM integrated LeGO-LOAM for lidar odometry and 2 different loop closure methods: ScanContext and Radius search based loop closure. While ScanContext is correcting large drifts, radius search based method is good for fine-stitching https://github.com/irapkaist/SC-LeGO-LOAM &amp;check; LidarIMU ROS1 PCLGTSAM"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/","title":"FAST_LIO_LC","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#fast_lio_lc","title":"FAST_LIO_LC","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#what-is-fast_lio_lc","title":"What is FAST_LIO_LC?","text":"<ul> <li>A computationally efficient and robust LiDAR-inertial odometry package with loop closure module and graph optimization.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/yanliang-wang/FAST_LIO_LC</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [Velodyne, Ouster, Livox]</li> <li>IMU [6-AXIS, 9-AXIS]</li> <li>GPS [Optional]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#dependencies","title":"Dependencies","text":"<ul> <li>Ubuntu 18.04</li> <li>ROS Melodic</li> <li>PCL &gt;= 1.8, Follow PCL Installation.</li> <li>Eigen &gt;= 3.3.4, Follow Eigen Installation.</li> <li>GTSAM &gt;= 4.0.0, Follow GTSAM Installation.</li> </ul> <pre><code>  wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.0-alpha2.zip\n  cd ~/Downloads/ &amp;&amp; unzip gtsam.zip -d ~/Downloads/\n  cd ~/Downloads/gtsam-4.0.0-alpha2/\n  mkdir build &amp;&amp; cd build\n  cmake ..\n  sudo make install\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#1-build","title":"1) Build","text":"<pre><code>    mkdir -p ~/ws_fastlio_lc/src\n    cd ~/ws_fastlio_lc/src\n    git clone https://github.com/gisbi-kim/FAST_LIO_SLAM.git\n    git clone https://github.com/Livox-SDK/livox_ros_driver\n    cd ..\n    catkin_make\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>After downloading the repository, change topic and sensor settings on the config file (<code>workspace/src/FAST_LIO_LC/FAST_LIO/config/ouster64_mulran.yaml</code>) with the lidar topic name in your bag file.</li> </ul> <ul> <li>For imu-lidar compatibility, extrinsic matrices from calibration must be changed.</li> </ul> <ul> <li>To enable auto-save, <code>pcd_save_enable</code> must be <code>1</code> from the launch file (<code>workspace/src/FAST_LIO_LC/FAST_LIO/launch/mapping_ouster64_mulran.launch</code>).</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#3-run","title":"3) Run","text":"<ul> <li>For Ouster OS1-64<pre><code># open new terminal: run FAST-LIO\nroslaunch fast_lio mapping_ouster64.launch\n\n# open the other terminal tab: run SC-PGO\nroslaunch aloam_velodyne fastlio_ouster64.launch\n\n# play bag file in the other terminal\nrosbag play RECORDED_BAG.bag --clock\n</code></pre> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#other-examples","title":"Other Examples","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#example-dataset","title":"Example dataset","text":"<p>Check original repository link for example dataset.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#contact","title":"Contact","text":"<ul> <li>Maintainer: Yanliang Wang (<code>wyl410922@qq.com</code>)</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-lc/#acknowledgements","title":"Acknowledgements","text":"<ul> <li>Thanks for FAST_LIO authors.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/","title":"FAST_LIO_SLAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#fast_lio_slam","title":"FAST_LIO_SLAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#what-is-fast_lio_slam","title":"What is FAST_LIO_SLAM?","text":"<ul> <li>FAST_LIO_SLAM is the integration of FAST_LIO and SC-PGO which is scan context based loop detection and GTSAM based pose-graph optimization.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/gisbi-kim/FAST_LIO_SLAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [Livox, Velodyne, Ouster]</li> <li>IMU [6-AXIS, 9-AXIS]</li> <li>GPS [OPTIONAL]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#dependencies","title":"Dependencies","text":"<ul> <li>ROS</li> <li>PCL</li> <li>Gtsam</li> </ul> <pre><code>wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.0-alpha2.zip\ncd ~/Downloads/ &amp;&amp; unzip gtsam.zip -d ~/Downloads/\ncd ~/Downloads/gtsam-4.0.0-alpha2/\nmkdir build &amp;&amp; cd build\ncmake ..\nsudo make install\n</code></pre> <ul> <li>PCL &gt;= 1.8, Follow PCL Installation.</li> <li>Eigen &gt;= 3.3.4, Follow Eigen Installation.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#1-build","title":"1) Build","text":"<pre><code>    mkdir -p ~/catkin_fastlio_slam/src\n    cd ~/catkin_fastlio_slam/src\n    git clone https://github.com/gisbi-kim/FAST_LIO_SLAM.git\n    git clone https://github.com/Livox-SDK/livox_ros_driver\n    cd ..\n    catkin_make\n    source devel/setup.bash\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>Set imu and lidar topic on <code>Fast_LIO/config/ouster64.yaml</code></li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#3-run","title":"3) Run","text":"<pre><code>    # terminal 1: run FAST-LIO2\nroslaunch fast_lio mapping_ouster64.launch\n\n    # open the other terminal tab: run SC-PGO\ncd ~/catkin_fastlio_slam\n    source devel/setup.bash\n    roslaunch aloam_velodyne fastlio_ouster64.launch\n\n    # play bag file in the other terminal\nrosbag play xxx.bag -- clock --pause\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#other-examples","title":"Other Examples","text":"<ul> <li> <p>Tutorial video 1 (using KAIST 03 sequence of MulRan dataset)</p> <ul> <li>Example result captures   <p></p></li> <li>download the KAIST03 pcd map made by FAST-LIO-SLAM, 500MB</li> </ul> </li> </ul> <ul> <li>Example Video 2 (Riverside 02 sequence of MulRan dataset)<ul> <li>Example result captures   <p></p></li> <li>download the Riverisde02 pcd map made by FAST-LIO-SLAM, 400MB</li> </ul> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fast-lio-slam/#acknowledgements","title":"Acknowledgements","text":"<ul> <li>Thanks for FAST_LIO authors.</li> <li>You may have an interest in this version of FAST-LIO + Loop closure, implemented by yanliang-wang</li> <li>Maintainer: Giseop Kim (<code>paulgkim@kaist.ac.kr</code>)</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/","title":"FD-SLAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#fd-slam","title":"FD-SLAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#what-is-fd-slam","title":"What is FD-SLAM?","text":"<ul> <li>FD_SLAM is Feature&amp;Distribution-based 3D LiDAR SLAM method based on Surface Representation Refinement. In this algorithm novel feature-based Lidar odometry used for fast scan-matching, and used a proposed UGICP method for keyframe matching.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#repository-information","title":"Repository Information","text":"<p>This is an open source ROS package for real-time 6DOF SLAM using a 3D LIDAR.</p> <p>It is based on hdl_graph_slam and the steps to run our system are same with hdl-graph-slam.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/SLAMWang/FD-SLAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR[VLP-16, HDL-32, HDL-64, OS1-64]</li> <li>GPS</li> <li>IMU [Optional]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#dependencies","title":"Dependencies","text":"<ul> <li>ROS</li> <li>PCL</li> <li>g2o</li> <li>Suitesparse</li> </ul> <p>The following ROS packages are required:</p> <ul> <li>geodesy</li> <li>nmea_msgs</li> <li>pcl_ros</li> <li>ndt_omp</li> <li>U_gicp This is modified based on fast_gicp by us. We use UGICP for keyframe matching.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#1-build","title":"1) Build","text":"<pre><code>cd ~/catkin_ws/src\ngit clone https://github.com/SLAMWang/FD-SLAM.git\ncd ..\ncatkin_make\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#2-services","title":"2) Services","text":"<pre><code>/hdl_graph_slam/dump  (hdl_graph_slam/DumpGraph)\n- save all the internal data (point clouds, floor coeffs, odoms, and pose graph) to a directory.\n\n/hdl_graph_slam/save_map (hdl_graph_slam/SaveMap)\n- save the generated map as a PCD file.\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#3-set-parameters","title":"3) Set parameters","text":"<ul> <li>All the configurable parameters are listed in launch/****.launch as ros params.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/fd-slam/#4-run","title":"4) Run","text":"<pre><code>source devel/setup.bash\nroslaunch hdl_graph_slam hdl_graph_slam_400_ours.launch\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/","title":"hdl_graph_slam","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#hdl_graph_slam","title":"hdl_graph_slam","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#what-is-hdl_graph_slam","title":"What is hdl_graph_slam?","text":"<ul> <li>An open source ROS package for real-time 6DOF SLAM using a 3D LIDAR. It is based on 3D Graph SLAM with NDT scan matching-based odometry estimation and loop detection. It also supports several graph constraints, such as GPS, IMU acceleration (gravity vector), IMU orientation (magnetic sensor), and floor plane (detected in a point cloud).</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/koide3/hdl_graph_slam</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [Velodyne, Ouster, RoboSense]</li> <li>IMU [6-AXIS, 9-AXIS] [OPTIONAL]</li> <li>GPS [OPTIONAL]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#dependencies","title":"Dependencies","text":"<ul> <li>ROS</li> <li>PCL</li> <li>g2o</li> <li>OpenMP</li> </ul> <p>The following ROS packages are required:</p> <ul> <li>geodesy</li> <li>nmea_msgs</li> <li>pcl_ros</li> <li>ndt_omp</li> <li>fast_gicp</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#1-build","title":"1) Build","text":"<pre><code># for melodic\nsudo apt-get install ros-melodic-geodesy ros-melodic-pcl-ros ros-melodic-nmea-msgs ros-melodic-libg2o\ncd catkin_ws/src\ngit clone https://github.com/koide3/ndt_omp.git -b melodic\ngit clone https://github.com/SMRT-AIST/fast_gicp.git --recursive\ngit clone https://github.com/koide3/hdl_graph_slam\n\ncd .. &amp;&amp; catkin_make -DCMAKE_BUILD_TYPE=Release\n\n# for noetic\nsudo apt-get install ros-noetic-geodesy ros-noetic-pcl-ros ros-noetic-nmea-msgs ros-noetic-libg2o\n\ncd catkin_ws/src\ngit clone https://github.com/koide3/ndt_omp.git\ngit clone https://github.com/SMRT-AIST/fast_gicp.git --recursive\ngit clone https://github.com/koide3/hdl_graph_slam\n\ncd .. &amp;&amp; catkin_make -DCMAKE_BUILD_TYPE=Release\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#2-set-parameter","title":"2) Set parameter","text":"<ul> <li>Set lidar topic on <code>launch/hdl_graph_slam_400.launch</code></li> </ul> <ul> <li>Set registration settings on <code>launch/hdl_graph_slam_400.launch</code></li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#3-run","title":"3) Run","text":"<pre><code>rosparam set use_sim_time true\nroslaunch hdl_graph_slam hdl_graph_slam_400.launch\n</code></pre> <pre><code>roscd hdl_graph_slam/rviz\nrviz -d hdl_graph_slam.rviz\n</code></pre> <pre><code>rosbag play --clock hdl_400.bag\n</code></pre> <p>Save the generated map by:</p> <pre><code>rosservice call /hdl_graph_slam/save_map \"resolution: 0.05\ndestination: '/full_path_directory/map.pcd'\"\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#example2-outdoor","title":"Example2 (Outdoor)","text":"<p>Bag file (recorded in an outdoor environment):</p> <ul> <li>hdl_400.bag.tar.gz (raw data, about 900MB)</li> </ul> <pre><code>rosparam set use_sim_time true\nroslaunch hdl_graph_slam hdl_graph_slam_400.launch\n</code></pre> <pre><code>roscd hdl_graph_slam/rviz\nrviz -d hdl_graph_slam.rviz\n</code></pre> <pre><code>rosbag play --clock dataset.bag\n</code></pre> <p> </p> <p> </p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#papers","title":"Papers","text":"<p>Kenji Koide, Jun Miura, and Emanuele Menegatti, A Portable 3D LIDAR-based System for Long-term and Wide-area People Behavior Measurement, Advanced Robotic Systems, 2019 [link].</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/hdl-graph-slam/#contact","title":"Contact","text":"<p>Kenji Koide, k.koide@aist.go.jp, https://staff.aist.go.jp/k.koide</p> <p>[Active Intelligent Systems Laboratory, Toyohashi University of Technology, Japan] [Mobile Robotics Research Team, National Institute of Advanced Industrial Science and Technology (AIST), Japan]</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/","title":"IA-LIO-SAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#ia-lio-sam","title":"IA-LIO-SAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#what-is-ia-lio-sam","title":"What is IA-LIO-SAM?","text":"<ul> <li>IA_LIO_SLAM is created for data acquisition in unstructured environment and it is a framework for Intensity and Ambient Enhanced Lidar Inertial Odometry via Smoothing and Mapping that achieves highly accurate robot trajectories and mapping.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/minwoo0611/IA_LIO_SAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [Velodyne, Ouster]</li> <li>IMU [9-AXIS]</li> <li>GNSS</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#dependencies","title":"Dependencies","text":"<ul> <li> <p>ROS (tested with Kinetic and Melodic)</p> <ul> <li> <p><code>for ROS melodic:</code></p> <pre><code>sudo apt-get install -y ros-melodic-navigation\nsudo apt-get install -y ros-melodic-robot-localization\nsudo apt-get install -y ros-melodic-robot-state-publisher\n</code></pre> </li> </ul> <ul> <li> <p><code>for ROS kinetic:</code></p> <pre><code>sudo apt-get install -y ros-kinetic-navigation\nsudo apt-get install -y ros-kinetic-robot-localization\nsudo apt-get install -y ros-kinetic-robot-state-publisher\n</code></pre> </li> </ul> </li> </ul> <ul> <li> <p>GTSAM (Georgia Tech Smoothing and Mapping library)</p> <pre><code>wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.2.zip\ncd ~/Downloads/ &amp;&amp; unzip gtsam.zip -d ~/Downloads/\ncd ~/Downloads/gtsam-4.0.2/\nmkdir build &amp;&amp; cd build\ncmake -DGTSAM_BUILD_WITH_MARCH_NATIVE=OFF ..\nsudo make install -j8\n</code></pre> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#1-build","title":"1) Build","text":"<pre><code>    mkdir -p ~/catkin_ia_lio/src\n    cd ~/catkin_ia_lio/src\n    git clone https://github.com/minwoo0611/IA_LIO_SAM\n    cd ..\n    catkin_make\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>After downloading the repository, change topic and sensor settings on the config file (<code>workspace/src/IA_LIO_SAM/config/params.yaml</code>)</li> </ul> <ul> <li>For imu-lidar compatibility, extrinsic matrices from calibration must be changed.</li> </ul> <ul> <li>To enable autosave, <code>savePCD</code> must be <code>true</code> on the <code>params.yaml</code> file (<code>workspace/src/IA_LIO_SAM/config/params.yaml</code>).</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#3-run","title":"3) Run","text":"<pre><code>  # open new terminal: run IA_LIO\n  source devel/setup.bash\n  roslaunch lio_sam mapping_ouster64.launch\n\n  # play bag file in the other terminal\n  rosbag play RECORDED_BAG.bag --clock\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#sample-dataset-images","title":"Sample dataset images","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#example-dataset","title":"Example dataset","text":"<p>Check original repo link for example dataset.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#contact","title":"Contact","text":"<ul> <li>Maintainer: Kevin Jung (<code>Github: minwoo0611</code>)</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#paper","title":"Paper","text":"<p>Thank you for citing IA-LIO-SAM(./config/doc/KRS-2021-17.pdf) if you use any of this code.</p> <p>Part of the code is adapted from LIO-SAM (IROS-2020).</p> <pre><code>@inproceedings{legoloam2018shan,\n  title={LeGO-LOAM: Lightweight and Ground-Optimized Lidar Odometry and Mapping on Variable Terrain},\n  author={Shan, Tixiao and Englot, Brendan},\n  booktitle={IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)},\n  pages={4758-4765},\n  year={2018},\n  organization={IEEE}\n}\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/ia-lio-slam/#acknowledgements","title":"Acknowledgements","text":"<ul> <li>IA-LIO-SAM is based on LIO-SAM (T. Shan, B. Englot, D. Meyers, W. Wang, C. Ratti, and D. Rus. LIO-SAM: Tightly-coupled Lidar Inertial Odometry via Smoothing and Mapping).</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/","title":"ISCLOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#iscloam","title":"ISCLOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#what-is-iscloam","title":"What is ISCLOAM?","text":"<ul> <li>ISCLOAM presents a robust loop closure detection approach by integrating both geometry and intensity information.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/wh200720041/iscloam</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [Velodyne]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#dependencies","title":"Dependencies","text":"<ul> <li>Ubuntu 64-bit 18.04</li> <li>ROS Melodic ROS Installation</li> <li>Ceres Solver Ceres Installation</li> <li>PCL PCL Installation</li> <li>Gtsam GTSAM Installation</li> <li>OpenCV OPENCV Installation</li> <li>Trajectory visualization</li> </ul> <p>For visualization purpose, this package uses hector trajectory sever, you may install the package by</p> <pre><code>sudo apt-get install ros-melodic-hector-trajectory-server\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#build-and-run","title":"Build and Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#1-clone-repository","title":"1. Clone repository","text":"<pre><code>cd ~/catkin_ws/src\ngit clone https://github.com/wh200720041/iscloam.git\ncd ..\ncatkin_make -j1\nsource ~/catkin_ws/devel/setup.bash\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#2-set-parameter","title":"2. Set Parameter","text":"<p>Change the bag location and sensor parameters on launch files.</p> <p></p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#3-launch","title":"3. Launch","text":"<pre><code>roslaunch iscloam iscloam.launch\n</code></pre> <p>if you would like to generate the map of environment at the same time, you can run</p> <pre><code>roslaunch iscloam iscloam_mapping.launch\n</code></pre> <p>Note that the global map can be very large, so it may takes a while to perform global optimization, some lag is expected between trajectory and map since they are running in separate thread. More CPU usage will happen when loop closure is identified.</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#example-result","title":"Example Result","text":"<p>Watch demo video at Video Link</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#ground-truth-comparison","title":"Ground Truth Comparison","text":"<p>Green: ISCLOAM Red: Ground Truth</p> <p> </p> <pre><code>                  KITTI sequence 00                                  KITTI sequence 05\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#citation","title":"Citation","text":"<p>If you use this work for your research, you may want to cite the paper below, your citation will be appreciated</p> <pre><code>@inproceedings{wang2020intensity,\n  author={H. {Wang} and C. {Wang} and L. {Xie}},\n  booktitle={2020 IEEE International Conference on Robotics and Automation (ICRA)},\n  title={Intensity Scan Context: Coding Intensity and Geometry Relations for Loop Closure Detection},\n  year={2020},\n  volume={},\n  number={},\n  pages={2095-2101},\n  doi={10.1109/ICRA40945.2020.9196764}\n}\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/iscloam/#acknowledgements","title":"Acknowledgements","text":"<p>Thanks for A-LOAM and LOAM(J. Zhang and S. Singh. LOAM: Lidar Odometry and Mapping in Real-time) and LOAM_NOTED.</p> <p>Author: Wang Han, Nanyang Technological University, Singapore</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/","title":"LeGO-LOAM-BOR","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#lego-loam-bor","title":"LeGO-LOAM-BOR","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#what-is-lego-loam-bor","title":"What is LeGO-LOAM-BOR?","text":"<ul> <li>LeGO-LOAM-BOR is improved version of the LeGO-LOAM by improving quality of the code, making it more readable and consistent. Also, performance is improved by converting processes to multi-threaded approach.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/facontidavide/LeGO-LOAM-BOR</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [VLP-16]</li> <li>IMU [9-AXIS]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#dependencies","title":"Dependencies","text":"<ul> <li>ROS Melodic ROS Installation</li> <li>PCL PCL Installation</li> <li>Gtsam GTSAM Installation</li> </ul> <pre><code>wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.0-alpha2.zip\ncd ~/Downloads/ &amp;&amp; unzip gtsam.zip -d ~/Downloads/\ncd ~/Downloads/gtsam-4.0.0-alpha2/\nmkdir build &amp;&amp; cd build\ncmake ..\nsudo make install\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#1-build","title":"1) Build","text":"<pre><code>cd ~/catkin_ws/src\ngit clone https://github.com/facontidavide/LeGO-LOAM-BOR.git\ncd ..\ncatkin_make\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>Set parameters on <code>LeGo-LOAM/loam_config.yaml</code></li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#3-run","title":"3) Run","text":"<pre><code>source devel/setup.bash\nroslaunch lego_loam_bor run.launch rosbag:=/path/to/your/rosbag lidar_topic:=/velodyne_points\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lego-loam-bor/#cite-lego-loam","title":"Cite LeGO-LOAM","text":"<p>Thank you for citing our LeGO-LOAM paper if you use any of this code:</p> <pre><code>@inproceedings{legoloam2018,\n  title={LeGO-LOAM: Lightweight and Ground-Optimized Lidar Odometry and Mapping on Variable Terrain},\n  author={Tixiao Shan and Brendan Englot},\n  booktitle={IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)},\n  pages={4758-4765},\n  year={2018},\n  organization={IEEE}\n}\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/","title":"LIO_SAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#lio_sam","title":"LIO_SAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#what-is-lio_sam","title":"What is LIO_SAM?","text":"<ul> <li>A framework that achieves highly accurate, real-time mobile robot trajectory estimation and map-building. It formulates lidar-inertial odometry atop a factor graph, allowing a multitude of relative and absolute measurements, including loop closures, to be incorporated from different sources as factors into the system</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/TixiaoShan/LIO-SAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [Livox, Velodyne, Ouster]</li> <li>IMU [9-AXIS]</li> <li>GPS [OPTIONAL]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> <li>For ROS 2</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#dependencies","title":"Dependencies","text":"<ul> <li>ROS</li> <li>PCL</li> <li> <p>Gtsam (Georgia Tech Smoothing and Mapping library)</p> <pre><code>sudo add-apt-repository ppa:borglab/gtsam-release-4.0\nsudo apt install libgtsam-dev libgtsam-unstable-dev\n</code></pre> </li> </ul> <pre><code>  sudo apt-get install -y ros-melodic-navigation\n  sudo apt-get install -y ros-melodic-robot-localization\n  sudo apt-get install -y ros-melodic-robot-state-publisher\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#1-build","title":"1) Build","text":"<pre><code>    mkdir -p ~/catkin_lio_sam/src\n    cd ~/catkin_lio_sam/src\n    git clone https://github.com/TixiaoShan/LIO-SAM.git\n    cd ..\n    catkin_make\n    source devel/setup.bash\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>Set topics and sensor settings on <code>lio_sam/config/params.yaml</code></li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#3-run","title":"3) Run","text":"<pre><code>    # Run the Launch File\nroslaunch lio_sam run.launch\n\n    # Play bag file in the other terminal\nrosbag play xxx.bag --clock\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#paper","title":"Paper","text":"<p>Thank you for citing LIO-SAM (IROS-2020) if you use any of this code.</p> <pre><code>@inproceedings{liosam2020shan,\n  title={LIO-SAM: Tightly-coupled Lidar Inertial Odometry via Smoothing and Mapping},\n  author={Shan, Tixiao and Englot, Brendan and Meyers, Drew and Wang, Wei and Ratti, Carlo and Rus Daniela},\n  booktitle={IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)},\n  pages={5135-5142},\n  year={2020},\n  organization={IEEE}\n}\n</code></pre> <p>Part of the code is adapted from LeGO-LOAM.</p> <pre><code>@inproceedings{legoloam2018shan,\n  title={LeGO-LOAM: Lightweight and Ground-Optimized Lidar Odometry and Mapping on Variable Terrain},\n  author={Shan, Tixiao and Englot, Brendan},\n  booktitle={IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)},\n  pages={4758-4765},\n  year={2018},\n  organization={IEEE}\n}\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/lio-sam/#acknowledgements","title":"Acknowledgements","text":"<ul> <li>LIO-SAM is based on LOAM (J. Zhang and S. Singh. LOAM: Lidar Odometry and Mapping in Real-time).</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/","title":"Optimized-SC-F-LOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#optimized-sc-f-loam","title":"Optimized-SC-F-LOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#what-is-optimized-sc-f-loam","title":"What is Optimized-SC-F-LOAM?","text":"<ul> <li>An improved version of F-LOAM and uses an adaptive threshold to further judge the loop closure detection results and reducing false loop closure detections. Also it uses feature point-based matching to calculate the constraints between a pair of loop closure frame point clouds and decreases time consumption of constructing loop frame constraints.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/SlamCabbage/Optimized-SC-F-LOAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [VLP-16, HDL-32, HDL-64]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#dependencies","title":"Dependencies","text":"<ul> <li>ROS</li> <li>PCL</li> <li>Gtsam</li> <li>Ceres Solver</li> <li>For visualization purpose, this package uses hector trajectory sever, you may install the package by</li> </ul> <pre><code>sudo apt-get install ros-noetic-hector-trajectory-server\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#1-build","title":"1) Build","text":"<pre><code>cd ~/catkin_ws/src\ngit clone https://github.com/SlamCabbage/Optimized-SC-F-LOAM.git\ncd ..\ncatkin_make\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#2-create-message-file","title":"2) Create message file","text":"<p>In this folder, Ground Truth information, optimized pose information, F-LOAM pose information and time information are stored</p> <pre><code>mkdir -p ~/message/Scans\n\nChange line 383 in the laserLoopOptimizationNode.cpp to your own \"message\" folder path\n</code></pre> <p>(Do not forget to rebuild your package)</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#3-set-parameters","title":"3) Set parameters","text":"<ul> <li>Set LIDAR topic and LIDAR properties on 'sc_f_loam_mapping.launch'</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#4-run","title":"4) Run","text":"<pre><code>source devel/setup.bash\nroslaunch optimized_sc_f_loam optimized_sc_f_loam_mapping.launch\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#results-on-kitti-sequence-00-and-sequence-05","title":"Results on KITTI Sequence 00 and Sequence 05","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#comparison-of-trajectories-on-kitti-dataset","title":"Comparison of trajectories on KITTI dataset","text":"<p>Test on KITTI sequence You can download the sequence 00 and 05 datasets from the KITTI official website and convert them into bag files using the kitti2bag open source method.</p> <p>00: 2011_10_03_drive_0027 000000 004540</p> <p>05: 2011_09_30_drive_0018 000000 002760</p> <p>See the link: https://github.com/ethz-asl/kitti_to_rosbag</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#acknowledgements","title":"Acknowledgements","text":"<p>Thanks for SC-A-LOAM(Scan context: Egocentric spatial descriptor for place recognition within 3d point cloud map) and F-LOAM(F-LOAM : Fast LiDAR Odometry and Mapping).</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/optimized-sc-f-loam/#citation","title":"Citation","text":"<pre><code>@misc{https://doi.org/10.48550/arxiv.2204.04932,\n  doi = {10.48550/ARXIV.2204.04932},\n\n  url = {https://arxiv.org/abs/2204.04932},\n\n  author = {Liao, Lizhou and Fu, Chunyun and Feng, Binbin and Su, Tian},\n\n  keywords = {Robotics (cs.RO), FOS: Computer and information sciences, FOS: Computer and information sciences},\n\n  title = {Optimized SC-F-LOAM: Optimized Fast LiDAR Odometry and Mapping Using Scan Context},\n\n  publisher = {arXiv},\n\n  year = {2022},\n\n  copyright = {arXiv.org perpetual, non-exclusive license}\n}\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/","title":"SC-A-LOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#sc-a-loam","title":"SC-A-LOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#what-is-sc-a-loam","title":"What is SC-A-LOAM?","text":"<ul> <li>A real-time LiDAR SLAM package that integrates A-LOAM and ScanContext.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/gisbi-kim/SC-A-LOAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [VLP-16, HDL-32, HDL-64, Ouster OS1-64]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#prerequisites-dependencies","title":"Prerequisites (dependencies)","text":"<ul> <li>ROS</li> <li>GTSAM version 4.x.</li> </ul> <ul> <li> <p>If GTSAM is not installed, follow the steps below.</p> <pre><code>  wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.2.zip\n  cd ~/Downloads/ &amp;&amp; unzip gtsam.zip -d ~/Downloads/\n  cd ~/Downloads/gtsam-4.0.2/\n  mkdir build &amp;&amp; cd build\n  cmake -DGTSAM_BUILD_WITH_MARCH_NATIVE=OFF ..\n  sudo make install -j8\n</code></pre> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#1-build","title":"1) Build","text":"<ul> <li> <p>First, install the abovementioned dependencies and follow below lines.</p> <pre><code> mkdir -p ~/catkin_scaloam_ws/src\n cd ~/catkin_scaloam_ws/src\n git clone https://github.com/gisbi-kim/SC-A-LOAM.git\n cd ../\n catkin_make\n source ~/catkin_scaloam_ws/devel/setup.bash\n</code></pre> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>After downloading the repository, change topic and sensor settings on the launch files.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#scan-context-parameters","title":"Scan Context parameters","text":"<ul> <li>If encountering ghosting error or loop is not closed, change the scan context parameters.</li> <li>Adjust the scan context settings with the parameters in the marked area.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#3-run","title":"3) Run","text":"<pre><code>roslaunch aloam_velodyne aloam_mulran.launch\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#4-saving-as-pcd-file","title":"4) Saving as PCD file","text":"<pre><code>  rosrun pcl_ros pointcloud_to_pcd input:=/aft_pgo_map\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#example-results","title":"Example Results","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#riverside-01-mulran-dataset","title":"Riverside 01, MulRan dataset","text":"<ul> <li>The MulRan dataset provides lidar scans (Ouster OS1-64, horizontally mounted, 10Hz) and consumer level gps (U-Blox EVK-7P, 4Hz) data.</li> <li>About how to use (publishing data) data: see here https://github.com/irapkaist/file_player_mulran</li> <li> <p>example videos on Riverside 01 sequence.</p> <pre><code>1. with consumer level GPS-based altitude stabilization: https://youtu.be/FwAVX5TVm04\n2. without the z stabilization: https://youtu.be/okML_zNadhY\n</code></pre> </li> </ul> <ul> <li> <p>example result:</p> <p></p> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#kitti-05","title":"KITTI 05","text":"<ul> <li> <p>For KITTI (HDL-64 sensor), run using the command</p> <pre><code>roslaunch aloam_velodyne aloam_velodyne_HDL_64.launch # for KITTI dataset setting\n</code></pre> </li> </ul> <ul> <li>To publish KITTI scans, you can use mini-kitti publisher, a simple python script: https://github.com/gisbi-kim/mini-kitti-publisher</li> <li>example video (no GPS used here): https://youtu.be/hk3Xx8SKkv4</li> <li> <p>example result:</p> <p></p> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-a-loam/#contact","title":"Contact","text":"<ul> <li>Maintainer: paulgkim@kaist.ac.kr</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/","title":"SC-LeGO-LOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#sc-lego-loam","title":"SC-LeGO-LOAM","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#what-is-sc-lego-loam","title":"What is SC-LeGO-LOAM?","text":"<ul> <li>SC-LeGO-LOAM integrated LeGO-LOAM for lidar odometry and 2 different loop closure methods: ScanContext and Radius search based loop closure. While ScanContext is correcting large drifts, radius search based method is good for fine-stitching.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#repository-information","title":"Repository Information","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#original-repository-link","title":"Original Repository link","text":"<p>https://github.com/irapkaist/SC-LeGO-LOAM</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#required-sensors","title":"Required Sensors","text":"<ul> <li>LIDAR [VLP-16, HDL-32E, VLS-128, Ouster OS1-16, Ouster OS1-64]</li> <li>IMU [9-AXIS]</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#ros-compatibility","title":"ROS Compatibility","text":"<ul> <li>ROS 1</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#dependencies","title":"Dependencies","text":"<ul> <li>ROS</li> <li>PCL</li> <li>Gtsam</li> </ul> <pre><code>wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.0-alpha2.zip\ncd ~/Downloads/ &amp;&amp; unzip gtsam.zip -d ~/Downloads/\ncd ~/Downloads/gtsam-4.0.0-alpha2/\nmkdir build &amp;&amp; cd build\ncmake ..\nsudo make install\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#build-run","title":"Build &amp; Run","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#1-build","title":"1) Build","text":"<pre><code>cd ~/catkin_ws/src\ngit clone https://github.com/irapkaist/SC-LeGO-LOAM.git\ncd ..\ncatkin_make\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#2-set-parameters","title":"2) Set parameters","text":"<ul> <li>Set imu and lidar topic on <code>include/utility.h</code></li> <li>Set lidar properties on <code>include/utility.h</code></li> <li>Set scancontex settings on <code>include/Scancontext.h</code></li> </ul> <p>(Do not forget to rebuild after setting parameters.)</p>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#3-run","title":"3) Run","text":"<pre><code>source devel/setup.bash\nroslaunch lego_loam run.launch\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#example-result","title":"Example Result","text":""},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#other-examples","title":"Other Examples","text":"<ul> <li> Video 1: DCC (MulRan dataset)</li> <li> Video 2: Riverside (MulRan dataset) </li> <li> Video 3: KAIST (MulRan dataset) </li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#mulran-dataset","title":"MulRan dataset","text":"<ul> <li>If you want to reproduce the results as the above video, you can download the  MulRan dataset  and use the  ROS topic publishing tool .</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#cite-sc-lego-loam","title":"Cite SC-LeGO-LOAM","text":"<pre><code>@INPROCEEDINGS { gkim-2018-iros,\n  author = {Kim, Giseop and Kim, Ayoung},\n  title = { Scan Context: Egocentric Spatial Descriptor for Place Recognition within {3D} Point Cloud Map },\n  booktitle = { Proceedings of the IEEE/RSJ International Conference on Intelligent Robots and Systems },\n  year = { 2018 },\n  month = { Oct. },\n  address = { Madrid }\n}\n</code></pre> <p>and</p> <pre><code>@inproceedings{legoloam2018,\n  title={LeGO-LOAM: Lightweight and Ground-Optimized Lidar Odometry and Mapping on Variable Terrain},\n  author={Shan, Tixiao and Englot, Brendan},\n  booktitle={IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)},\n  pages={4758-4765},\n  year={2018},\n  organization={IEEE}\n}\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-maps/open-source-slam/sc-lego-loam/#contact","title":"Contact","text":"<ul> <li>Maintainer: Giseop Kim (<code>paulgkim@kaist.ac.kr</code>)</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/","title":"Calibrating your sensors","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#calibrating-your-sensors","title":"Calibrating your sensors","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#overview","title":"Overview","text":"<p>Autoware expects to have multiple sensors attached to the vehicle as input to perception, localization, and planning stack. These sensors must be calibrated correctly and their positions must be defined using either urdf files (as in sample_sensor_kit) or as tf launch files.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#camera-calibration","title":"Camera calibration","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#intrinsic-calibration","title":"Intrinsic Calibration","text":"<ul> <li>Navigation2 provides a good tutorial for camera internal calibration.</li> <li>AutoCore provides a light-weight tool.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#lidar-lidar-calibration","title":"Lidar-lidar calibration","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#lidar-lidar-calibration-tool-from-autocore","title":"Lidar-Lidar Calibration tool from Autocore","text":"<p>LL-Calib on Github, provided by AutoCore, is a lightweight toolkit for online/offline 3D LiDAR to LiDAR calibration. It's based on local mapping and \"GICP\" method to derive the relation between main and sub lidar. Information on how to use the tool, troubleshooting tips and example rosbags can be found at the above link.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#lidar-camera-calibration","title":"Lidar-camera calibration","text":"<p>Developed by MathWorks, The Lidar Camera Calibrator app enables you to interactively estimate the rigid transformation between a lidar sensor and a camera.</p> <p>https://ww2.mathworks.cn/help/lidar/ug/get-started-lidar-camera-calibrator.html</p> <p>SensorsCalibration toolbox v0.1: One more open source method for Lidar-camera calibration. This is a project for LiDAR to camera calibration,including automatic calibration and manual calibration</p> <p>https://github.com/PJLab-ADG/SensorsCalibration/blob/master/lidar2camera/README.md</p> <p>Developed by AutoCore, an easy-to-use lightweight toolkit for Lidar-camera-calibration is proposed. Only in three steps, a fully automatic calibration will be done.</p> <p>https://github.com/autocore-ai/calibration_tools/tree/main/lidar-cam-calib-related</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/calibrating-sensors/#lidar-imu-calibration","title":"Lidar-IMU calibration","text":"<p>Developed by APRIL Lab at Zhejiang University in China, the LI-Calib calibration tool is a toolkit for calibrating the 6DoF rigid transformation and the time offset between a 3D LiDAR and an IMU, based on continuous-time batch optimization. IMU-based cost and LiDAR point-to-surfel (surfel = surface element) distance are minimized jointly, which renders the calibration problem well-constrained in general scenarios.</p> <p>AutoCore has forked the original LI-Calib tool and overwritten the Lidar input for more general usage. Information on how to use the tool, troubleshooting tips and example rosbags can be found at the LI-Calib fork on Github.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/","title":"Creating vehicle and sensor description","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#creating-vehicle-and-sensor-description","title":"Creating vehicle and sensor description","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#introduction","title":"Introduction","text":"<p>This page introduce following topics.</p> <ol> <li>YOUR_VEHICLE_description</li> <li>YOUR_SENSOR_KIT_description</li> <li>individual_parameter</li> <li>YOUR_VEHICLE_launch</li> <li>YOUR_SENSOR_KIT_launch</li> </ol>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#1-your_vehicle_description","title":"1. YOUR_VEHICLE_description","text":"<p>In <code>YOUR_VEHICLE_description</code>, the following configurations are set:</p> <ol> <li>vehicle_info.param.yaml (must be changed)</li> <li>mesh file (*.dae)</li> <li>mirror.param.yaml(must be changed)</li> <li>simulator_model.param.yaml</li> <li>vehicle.xacro</li> </ol>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#1-vehicle_infoparamyaml","title":"1. vehicle_info.param.yaml","text":"<p>Defines the vehicle dimensions. For more details on each parameter, please click here.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#2-mesh-file","title":"2. mesh file","text":"<p>A 3D model file used for visualization in rviz.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#3-mirrorparamyaml","title":"3. mirror.param.yaml","text":"<p>Set according to the vehicle dimensions. Used in the crop-box-filter of PointCloudPreprocessor.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#4-simulator_modelparamyaml","title":"4. simulator_model.param.yaml","text":"<p>Configuration file for the simulator environment.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#5-vehiclexacro","title":"5. vehicle.xacro","text":"<p>The entry point file that defines the entire URDF of the vehicle. It refers to <code>sensors.xacro</code>, which specifies the sensor mounting positions.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#2-your_sensor_kit_description","title":"2. YOUR_SENSOR_KIT_description","text":"<p>In sensor_kit_description, the following files are configured:</p> <ol> <li>sensors.xacro (must be changed)</li> <li>sensor_kit.xacro (must be changed)</li> </ol>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#1-sensorsxacro","title":"1. sensors.xacro","text":"<p>Resolves the positions of sensors with <code>base_link</code> as the parent frame and defines the positions and orientations based on <code>sensors_calibration.yaml</code> in individual_params.</p> <p>In Autoware, <code>&lt;YOUR_SENSOR_KIT_description&gt;/config/sensors_calibration.yaml</code> is not used.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#about-sensor_kit_base_link","title":"About sensor_kit_base_link","text":"<p>A <code>sensor_kit</code> refers to a subset that includes multiple sensors, and <code>sensor_kit_base_link</code> is the name of its frame. The positions and orientations within the kit are defined in <code>sensor_kit.xacro</code>.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#2-sensor_kitxacro","title":"2. sensor_kit.xacro","text":"<p>Resolves the positions of sensors with <code>sensor_kit_base_link</code> as the parent and defines the positions and orientations based on <code>sensor_kit_calibration.yaml</code> in individual_params.</p> <p>In Autoware, <code>&lt;YOUR_SENSOR_KIT_description&gt;/config/sensor_kit_calibration.yaml</code> is not used.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#3-individual_parameter","title":"3. individual_parameter","text":"<p>The <code>individual_parameter</code> is where parameters referenced by <code>sensors.xacro</code> and <code>sensor_kit.xacro</code> are stored. As the name imply, it is intended to manage parameters for multiple individual instances.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#introduction-to-various-parameters","title":"Introduction to Various Parameters","text":"<ol> <li>sensors_calibration.yaml (must be changed)</li> <li>sensor_kit_calibration.yaml (must be changed)</li> <li>imu_corrector.param.yaml</li> </ol>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#1-sensors_calibrationyaml","title":"1. sensors_calibration.yaml","text":"<p>A file that defines the mounting positions and orientations of sensors with <code>base_link</code> as the parent frame.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#2-sensor_kit_calibrationyaml","title":"2. sensor_kit_calibration.yaml","text":"<p>A file that defines the mounting positions and orientations of sensors with <code>sensor_kit_base_link</code> as the parent frame.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#3-imu_correctorparamyaml","title":"3. imu_corrector.param.yaml","text":"<p>A file used by <code>imu_corrector</code>.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#4-folder-structure","title":"4. Folder Structure","text":"<p>Below is the default directory structure.</p> <pre><code>individual_params/\n\u2514\u2500 config/\n     \u2514\u2500 default/\n          \u2514\u2500 sample_sensor_kit/\n               \u251c\u2500 imu_corrector.param.yaml\n               \u251c\u2500 sensor_kit_calibration.yaml\n               \u2514\u2500 sensors_calibration.yaml\n</code></pre> <p>Copy and create a folder based on your <code>YOUR_SENSOR_KIT</code> name.</p> <pre><code>individual_params/\n\u2514\u2500 config/\n     \u2514\u2500 default/\n-         \u2514\u2500 sample_sensor_kit/\n+         \u2514\u2500 &lt;YOUR_SENSOR_KIT&gt;/\n              \u251c\u2500 imu_corrector.param.yaml\n               \u251c\u2500 sensor_kit_calibration.yaml\n               \u2514\u2500 sensors_calibration.yaml\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#41-sample-usage","title":"4.1 Sample Usage","text":"<p>Here is an example of managing parameters for multiple instances. Add a <code>&lt;vehicle_id&gt;</code> directory and switch parameters using options at startup.</p> <pre><code># example1 (do not set vehicle_id)\n$ ros2 launch autoware_launch autoware.launch.xml sensor_model:=&lt;YOUR_SENSOR_KIT&gt; vehicle_mode:=&lt;your_vehicle_model&gt;\n# example2 (set vehicle_id as VEHICLE_1)\n$ ros2 launch autoware_launch autoware.launch.xml sensor_model:=&lt;YOUR_SENSOR_KIT&gt; vehicle_mode:=&lt;your_vehicle_model&gt; vehicle_id:=VEHICLE_1\n# example3 (set vehicle_id as VEHICLE_2)\n$ ros2 launch autoware_launch autoware.launch.xml sensor_model:=&lt;YOUR_SENSOR_KIT&gt; vehicle_mode:=&lt;your_vehicle_model&gt; vehicle_id:=VEHICLE_2\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#sample-directory-structure","title":"Sample Directory Structure","text":"<pre><code>individual_params/\n\u2514\u2500 config/\n     \u251c\u2500 default/\n     \u2502   \u2514\u2500 &lt;YOUR_SENSOR_KIT&gt;/                  # example1\n     \u2502        \u251c\u2500 imu_corrector.param.yaml\n     \u2502        \u251c\u2500 sensor_kit_calibration.yaml\n     \u2502        \u2514\u2500 sensors_calibration.yaml\n+    \u251c\u2500 VEHICLE_1/\n+    \u2502   \u2514\u2500 &lt;YOUR_SENSOR_KIT&gt;/                  # example2\n+    \u2502        \u251c\u2500 imu_corrector.param.yaml\n+    \u2502        \u251c\u2500 sensor_kit_calibration.yaml\n+    \u2502        \u2514\u2500 sensors_calibration.yaml\n+    \u2514\u2500 VEHICLE_2/\n+         \u2514\u2500 &lt;YOUR_SENSOR_KIT&gt;/                  # example3\n+              \u251c\u2500 imu_corrector.param.yaml\n+              \u251c\u2500 sensor_kit_calibration.yaml\n+              \u2514\u2500 sensors_calibration.yaml\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#4your_vehicle_launch","title":"4.YOUR_VEHICLE_launch","text":"<p><code>YOUR_VEHICLE_launch</code> is where the launch file for starting the drive system devices is stored.</p> <ol> <li>vehicle_interface.launch.xml (must be changed)</li> </ol>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#1-vehicle_interfacelaunchxml","title":"1. vehicle_interface.launch.xml","text":"<p><code>vehicle_interface.launch.xml</code> is the launch file related to the drive system. Please modify it according to the configuration of your vehicle's drive system.</p> <p>If you are operating multiple vehicles, use the <code>vehicle_id</code> to switch to the corresponding configuration for each vehicle.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#5-your_sensor_kit_launch","title":"5. YOUR_SENSOR_KIT_launch","text":"<p><code>YOUR_SENSOR_KIT_launch</code> is where the launch files related to sensor startup are stored.</p> <ol> <li>sensing.launch.xml (must be changed)</li> <li>lidar.launch.xml (must be changed)</li> <li>camera.launch.xml</li> <li>imu.launch.xml (must be changed)</li> <li>gnss.launch.xml</li> <li>pointcloud_preprocessor.launch.py (must be changed)</li> </ol>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#1-sensinglaunchxml","title":"1. sensing.launch.xml","text":"<p><code>sensing.launch.xml</code> is the entry point that calls the launch files for all sensors. Modify it according to your sensor configuration.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#2-lidarlaunchxml","title":"2. lidar.launch.xml","text":"<p><code>lidar.launch.xml</code> is the launch file related to starting the LiDAR driver. Modify it according to your LiDAR configuration.</p> <p>In Autoware's initial configuration, it assumes converting the acquired data using <code>pointcloud_preprocessor.launch.py</code>.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#example-configuration-items","title":"Example Configuration Items","text":"<ul> <li>Setting the frame_id defined in <code>YOUR_SENSOR_KIT_description</code>.</li> <li>Connection information for each device.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#3-cameralaunchxml","title":"3. camera.launch.xml","text":"<p><code>camera.launch.xml</code> is the launch file related to starting the camera driver.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#4-imulaunchxml","title":"4. imu.launch.xml","text":"<p><code>imu.launch.xml</code> is the launch file related to starting the IMU driver.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#5-gnsslaunchxml","title":"5. gnss.launch.xml","text":"<p><code>gnss.launch.xml</code> is the launch file related to starting the GNSS driver.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-and-sensor-description/creating-vehicle-and-sensor-description/#6-pointcloud_preprocessorlaunchpy","title":"6. pointcloud_preprocessor.launch.py","text":"<p><code>pointcloud_preprocessor.launch.py</code> is the launch file to convert the raw sensor data. For more information, please click here.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/creating-vehicle-interface-for-ackerman-kinematic-model/","title":"Creating vehicle interface for ackerman kinematic model","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/creating-vehicle-interface-for-ackerman-kinematic-model/#creating-vehicle-interface-for-ackerman-kinematic-model","title":"Creating vehicle interface for ackerman kinematic model","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/","title":"Customizing for differential drive vehicle","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#customizing-for-differential-drive-vehicle","title":"Customizing for differential drive vehicle","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#1-introduction","title":"1. Introduction","text":"<p>Currently, Autoware assumes that vehicles use an Ackermann kinematic model with Ackermann steering. Thus, Autoware adopts the Ackermann command format for the Control module's output (see the AckermannDrive ROS message definition for an overview of Ackermann commands, and the AckermannControlCommands struct used in Autoware for more details).</p> <p>However, it is possible to integrate Autoware with a vehicle that follows a differential drive kinematic model, as commonly used by small mobile robots.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#2-procedure","title":"2. Procedure","text":"<p>One simple way of using Autoware with a differential drive vehicle is to create a <code>vehicle_interface</code> package that translates Ackermann commands to differential drive commands. Here are two points that you need to consider:</p> <ul> <li>Create <code>vehicle_interface</code> package for differential drive vehicle</li> <li>Set an appropriate <code>wheel_base</code></li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#21-create-a-vehicle_interface-package-for-differential-drive-vehicle","title":"2.1 Create a <code>vehicle_interface</code> package for differential drive vehicle","text":"<p>An Ackermann command in Autoware consists of two main control inputs:</p> <ul> <li>steering angle (\\(\\omega\\))</li> <li>velocity (\\(v\\))</li> </ul> <p>Conversely, a typical differential drive command consists of the following inputs:</p> <ul> <li>left wheel velocity (\\(v_l\\))</li> <li>right wheel velocity (\\(v_r\\))</li> </ul> <p>So, one way in which an Ackermann command can be converted to a differential drive command is by using the following equations:</p> \\[ v_l = v - \\frac{l\\omega}{2}, v_r = v + \\frac{l\\omega}{2} \\] <p>where \\(l\\) denotes wheel tread.</p> <p>For information about other factors that need to be considered when creating a <code>vehicle_interface</code> package, refer to the <code>vehicle_interface</code> component page.</p>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#22-set-an-appropriate-wheel_base","title":"2.2 Set an appropriate <code>wheel_base</code>","text":"<p>A differential drive robot does not necessarily have front and rear wheels, which means that the wheelbase (the horizontal distance between the axles of the front and rear wheels) cannot be defined. However, Autoware expects <code>wheel_base</code> to be set in <code>vehicle_info.param.yaml</code> with some value. Thus, you need to set a pseudo value for <code>wheel_base</code>.</p> <p>The appropriate pseudo value for <code>wheel_base</code> depends on the size of your vehicle. Setting it to be the same value as <code>wheel_tread</code> is one possible choice.</p> <p>Warning</p> <ul> <li>If the <code>wheel_base</code> value is set too small then the vehicle may behave unexpectedly. For example, the vehicle may drive beyond the bounds of a calculated path.</li> <li>Conversely, if <code>wheel_base</code> is set too large, the vehicle's range of motion will be restricted. The reason being that Autoware's Planning module will calculate an overly conservative trajectory based on the assumed vehicle length.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#3-known-issues","title":"3. Known issues","text":""},{"location":"how-to-guides/integrating-autoware/creating-vehicle-interface-package/customizing-for-differential-drive-model/#motion-model-incompatibility","title":"Motion model incompatibility","text":"<p>Since Autoware assumes that vehicles use a steering system, it is not possible to take advantage of the flexibility of a differential drive system's motion model.</p> <p>For example, when planning a parking maneuver with the <code>freespace_planner</code> module, Autoware may drive the differential drive vehicle forward and backward, even if the vehicle can be parked with a simpler trajectory that uses pure rotational movement.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/","title":"Evaluating the controller performance","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#evaluating-the-controller-performance","title":"Evaluating the controller performance","text":"<p>This page shows how to use <code>control_performance_analysis</code> package to evaluate the controllers.</p> <p><code>control_performance_analysis</code> is the package to analyze the tracking performance of a control module and monitor the driving status of the vehicle.</p> <p>If you need more detailed information about package, refer to the control_performance_analysis.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#how-to-use","title":"How to use","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#before-driving","title":"Before Driving","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#1-firstly-you-need-to-launch-autoware-you-can-also-use-this-tool-with-real-vehicle-driving","title":"1. Firstly you need to launch Autoware. You can also use this tool with real vehicle driving","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#2-initialize-the-vehicle-and-send-goal-position-to-create-route","title":"2. Initialize the vehicle and send goal position to create route","text":"<ul> <li>If you have any problem with launching Autoware, please see the tutorials page.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#3-launch-the-control_performance_analysis-package","title":"3. Launch the control_performance_analysis package","text":"<pre><code>ros2 launch control_performance_analysis controller_performance_analysis.launch.xml\n</code></pre> <ul> <li>After this command, you should be able to see the driving monitor and error variables in topics.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#4-run-the-plotjuggler-in-sourced-terminal","title":"4. Run the PlotJuggler in sourced terminal","text":"<pre><code>source ~/autoware/install/setup.bash\n</code></pre> <pre><code>ros2 run plotjuggler plotjuggler\n</code></pre> <ul> <li>If you do not have PlotJuggler in your computer, please refer here for installation guideline.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#5-increase-the-buffer-size-maximum-is-100-and-import-the-layout-from-autowareuniversecontrolcontrol_performance_analysisconfigcontroller_monitorxml","title":"5. Increase the buffer size (maximum is 100), and import the layout from <code>/autoware.universe/control/control_performance_analysis/config/controller_monitor.xml</code>","text":"<ul> <li>After import the layout, please specify the topics that are listed below.</li> </ul> <ul> <li>/localization/kinematic_state</li> <li>/vehicle/status/steering_status</li> <li>/control_performance/driving_status</li> <li>/control_performance/performance_vars</li> </ul> <ul> <li>Please mark the <code>If present, use the timestamp in the field [header.stamp]</code> box, then select the OK.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#6-now-you-can-start-to-driving-you-should-see-all-the-performance-and-driving-variables-in-plotjuggler","title":"6. Now, you can start to driving. You should see all the performance and driving variables in PlotJuggler","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#after-driving","title":"After Driving","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#1-you-can-export-the-statistical-output-and-all-data-to-compare-and-later-usage","title":"1. You can export the statistical output and all data to compare and later usage","text":"<ul> <li>With statistical data, you can export the all statistical values like (min, max, average) to compare the controllers.</li> </ul> <ul> <li>You can also export all data to later use. To investigate them again, after launch PlotJuggler, import the <code>.cvs</code> file from data section.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-controller-performance/#tips","title":"Tips","text":"<ul> <li>You can plot the vehicle position. Select the two curve (keeping CTRL key pressed) and Drag &amp; Drop them using the RIGHT Mouse button. Please visit the <code>Help -&gt; Cheatsheet</code> in PlotJuggler to see more tips about it.</li> </ul> <ul> <li>If you see too much noised curve in plots, you can adjust the <code>odom_interval</code> and <code>low_pass_filter_gain</code> from here to avoid noised data.</li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/","title":"Evaluating real-time performance","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#evaluating-real-time-performance","title":"Evaluating real-time performance","text":""},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#introduction","title":"Introduction","text":"<p>Autoware should be real-time system when integrated to a service. Therefore, the response time of each callback should be as small as possible. If Autoware appears to be slow, it is imperative to conduct performance measurements and implement improvements based on the analysis. However, Autoware is a complex software system comprising numerous ROS 2 nodes, potentially complicating the process of identifying bottlenecks. To address this challenge, we will discuss methods for conducting detailed performance measurements for Autoware and provide case studies. It is worth noting that multiple factors can contribute to poor performance, such as scheduling and memory allocation in the OS layer, but our focus in this page will be on user code bottlenecks. The outline of this section is as follows:</p> <ul> <li>Performance measurement<ul> <li>Single node execution</li> <li>Prepare separated cores</li> <li>Run single node separately</li> <li>Measurement and visualization</li> </ul> </li> <li>Case studies<ul> <li>Sensing component</li> <li>Planning component</li> </ul> </li> </ul>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#performance-measurement","title":"Performance measurement","text":"<p>Improvement is impossible without precise measurements. To measure the performance of the application code, it is essential to eliminate any external influences. Such influences include interference from the operating system and CPU frequency fluctuations. Scheduling effects also occur when core resources are shared by multiple threads. This section outlines a technique for accurately measuring the performance of the application code for a specific node. Though this section only discusses the case of Linux on Intel CPUs, similar considerations should be made in other environments.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#single-node-execution","title":"Single node execution","text":"<p>To eliminate the influence of scheduling, the node being measured should operate independently, using the same logic as when the entire Autoware system is running. To accomplish this, record all input topics of the node to be measured while the whole Autoware system is running. To achieve this objective, a tool called <code>ros2_single_node_replayer</code> has been prepared.</p> <p>Details on how to use the tool can be found in the README. This tool records the input topics of a specific node during the entire Autoware operation and replays it in a single node with the same logic. The tool relies on the <code>ros2 bag record</code> command, and the recording of service/action is not supported as of ROS 2 Humble, so nodes that use service/action as their main logic may not work well.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#prepare-separated-cores","title":"Prepare separated cores","text":"<p>Isolated cores running the node to be measured must meet the following conditions.</p> <ul> <li>Fix CPU frequency and disable turbo boost</li> <li>Minimize timer interruptions</li> <li>Offload RCU (Read Copy Update) callback</li> <li>Isolate the paired core if hyper-threading enabled</li> </ul> <p>To fulfill these conditions on Linux, a custom kernel build with the following kernel configurations is required. You can find many resources to instruct you on how to build a custom Linux kernel (like this one). Note that even if full tickless is enabled, timer interrupts are generated for scheduling if more than two tasks exist in one core.</p> <pre><code># Enable CONFIG_NO_HZ_FULL\n-&gt; General setup\n-&gt; Timers subsystem\n-&gt; Timer tick handling (Full dynticks system (tickless))\n(X) Full dynticks system (tickless)\n\n# Allows RCU callback processing to be offloaded from selected CPUs\n# (CONFIG_RCU_NOCB_CPU=y)\n-&gt; General setup\n-&gt; RCU Subsystem\n-*- Offload RCU callback processing from boot-selected CPUs\n</code></pre> <p>Additionally, the kernel boot parameters need to be set as follows.</p> <pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\n  \"... isolcpus=2,8 rcu_nocbs=2,8 rcu_nocb_poll nohz_full=2,8 intel_pstate=disable\u201d\n</code></pre> <p>In the above configuration, for example, the node to be measured is assumed to run on core 2, and core 8, which is a hyper-threading pair, is also being isolated. Appropriate decisions on which cores to run the measurement target and which nodes to isolate need to be made based on the cache and core layout of the measurement machine. You can easily check if it is properly configured by running <code>cat /proc/softirqs</code>. Since <code>intel_pstate=disable</code> is specified in the kernel boot parameter, <code>userspace</code> can be specified in the scaling governor.</p> <pre><code>cat /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor // ondemand\nsudo sh -c \"echo userspace &gt; /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor\"\n</code></pre> <p>This allows you to freely set the desired frequency within a defined range.</p> <pre><code>sudo sh -c \"echo &lt;freq(kz)&gt; &gt; /sys/devices/system/cpu/cpu2/cpufreq/scaling_setspeed\"\n</code></pre> <p>Turbo Boost needs to be switched off on Intel CPUs, which is often overlooked.</p> <pre><code>sudo sh -c \"echo 0 &gt; /sys/devices/system/cpu/cpufreq/boost\"\n</code></pre>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#run-single-node-separately","title":"Run single node separately","text":"<p>Following the instructions in the <code>ros2_single_node_replayer</code> README, start the node and play the dedicated rosbag created by the tool. Before playing the rosbag, appropriately set the CPU affinity of the thread on which the node runs, so it is placed on the isolated core prepared.</p> <pre><code>taskset --cpu-list -p &lt;target cpu&gt; &lt;pid&gt;\n</code></pre> <p>To avoid interference in the last level cache, minimize the number of other applications running during the measurement.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#measurement-and-visualization","title":"Measurement and visualization","text":"<p>To visualize the performance of the measurement target, embed code for logging timestamps and performance counter values in the target source code. To achieve this objective, a tool called <code>pmu_analyzer</code> has been prepared.</p> <p>Details on how to use the tool can be found in the README. This tool can measure the turnaround time of any section in the source code, as well as various performance counters.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#case-studies","title":"Case studies","text":"<p>In this section, we will present several case studies that demonstrate the performance improvements. These examples not only showcase our commitment to enhancing the system's efficiency but also serve as a valuable resource for developers who may face similar challenges in their own projects. The performance improvements discussed here span various components of the Autoware system, including sensing modules and planning modules. There are tendencies for each component regarding which points are becoming bottlenecks. By examining the methods, techniques, and tools employed in these case studies, readers can gain a better understanding of the practical aspects of optimizing complex software systems like Autoware.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#sensing-component","title":"Sensing component","text":"<p>First, we will explain the procedure for performance improvement, taking the node <code>ring_outlier_filter</code> as an example. Refer to the Pull Request for details.</p> <p>The following figure is a time-series plot of the turnaround time of the main processing part of <code>ring_outlier_filter</code>, analyzed as described in the \"Performance Measurement\" section above.</p> <p></p> <p>The horizontal axis indicates the number of callbacks called (i.e., callback index), and the vertical axis indicates the turnaround time.</p> <p>When analyzing the performance of the sensing module from the viewpoint of performance counter, pay attention to <code>instructions</code>, <code>LLC-load-misses</code>, <code>LLC-store-misses</code>, <code>cache-misses</code>, and <code>minor-faults</code>.</p> <p>Analysis of the performance counter shows that the largest fluctuations come from <code>minor-faults</code> (i.e., soft page faults), the second largest from <code>LLC-store-misses</code> and <code>LLC-load-misses</code> (i.e., cache misses in the last level cache), and the slowest fluctuations come from instructions (i.e., message data size fluctuations). For example, when we plot <code>minor-faults</code> on the horizontal axis and turnaround time on the vertical axis, we can see the following dominant proportional relationship.</p> <p></p> <p>To achieve zero soft page faults, heap allocations must only be made from areas that have been first touched in advance. We have developed a library called <code>heaphook</code> to avoid soft page faults while running Autoware callback. If you are interested, refer to the GitHub discussion and the issue.</p> <p>To reduce LLC misses, it is necessary to reduce the working set and to use cache-efficient access patterns.</p> <p>In the sensing component, which handles large message data such as LiDAR point cloud data, minimizing copying is important. A callback that takes sensor data message types as input and output should be written in an in-place algorithm as much as possible. This means that in the following pseudocode, when generating <code>output_msg</code> from <code>input_msg</code>, it is crucial to avoid using buffers as much as possible to reduce the number of memory copies.</p> <pre><code>void callback(const PointCloudMsg &amp;input_msg) {\nauto output_msg = allocate_msg&lt;PointCloudMsg&gt;(output_size);\nfill(input_msg, output_msg);\npublish(std::move(output_msg));\n}\n</code></pre> <p>To improve cache efficiency, implement an in-place style as much as possible, instead of touching memory areas sporadically. In ROS applications using PCL, the code shown below is often seen.</p> <pre><code>void callback(const sensor_msgs::PointCloud2ConstPtr &amp;input_msg) {\npcl::PointCloud&lt;PointT&gt;::Ptr input_pcl(new pcl::PointCloud&lt;PointT&gt;);\npcl::fromROSMsg(*input_msg, *input_pcl);\n\n// Algorithm is described for point cloud type of pcl\npcl::PointCloud&lt;PointT&gt;::Ptr output_pcl(new pcl::PointCloud&lt;PointT&gt;);\nfill_pcl(*input_pcl, *output_pcl);\n\nauto output_msg = allocate_msg&lt;sensor_msgs::PointCloud2&gt;(output_size);\npcl::toROSMsg(*output_pcl, *output_msg);\npublish(std::move(output_msg));\n}\n</code></pre> <p>To use the PCL library, <code>fromROSMsg()</code> and <code>toROSMsg()</code> are used to perform message type conversion at the beginning and end of the callback. This is a wasteful copying process and should be avoided. We should eliminate unnecessary type conversions by removing dependencies on PCL (e.g., https://github.com/tier4/velodyne_vls/pull/39). For large message types such as map data, there should be only one instance in the entire system in terms of physical memory.</p>"},{"location":"how-to-guides/integrating-autoware/tuning-parameters-and-performance/evaluating-real-time-performance/#planning-component","title":"Planning component","text":"<p>First, we will pick up <code>detection_area</code> module in <code>behavior_velocity_planner</code> node, which tends to have long turnaround time. We have followed the performance analysis steps above to obtain the following graph. Axises are the same as the graphs in the sensing case study.</p> <p></p> <p>Using <code>pmu_analyzer</code> tool to further identify the bottleneck, we have found that the following multiple loops were taking up a lot of processing time:</p> <pre><code>for ( area : detection_areas )\nfor ( point : point_clouds )\nif ( boost::geometry::within(point, area) )\n// do something with O(1)\n</code></pre> <p>It checks whether each point cloud is contained in each detection area. Let <code>N</code> be the size of <code>point_clouds</code> and <code>M</code> be the size of <code>detection_areas</code>, then the computational complexity of this program is O(N^2 * M), since the complexity of <code>within</code> is O(N). Here, given that most of the point clouds are located far away from a certain detection area, a certain optimization can be achieved. First, calculate the minimum enclosing circle that completely covers the detection area, and then check whether the points are contained in that circle. Most of the point clouds can be quickly ruled out by this method, we don\u2019t have to call the <code>within</code> function in most cases. Below is the pseudocode after optimization.</p> <pre><code>for ( area : detection_areas )\ncircle = calc_minimum_enclosing_circle(area)\nfor ( point : point_clouds )\nif ( point is in circle )\nif ( boost::geometry::within(point, area) )\n// do something with O(1)\n</code></pre> <p>By using O(N) algorithm for minimum enclosing circle, the computational complexity of this program is reduced to almost O(N * (N + M)) (note that the exact computational complexity does not really change). If you are interested, refer to the Pull Request.</p> <p>Similar to this example, in the planning component, we take into consideration thousands to tens of thousands of point clouds, thousands of points in a path representing our own route, and polygons representing obstacles and detection areas in the surroundings, and we repeatedly create paths based on them. Therefore, we access the contents of the point clouds and paths multiple times using for-loops. In most cases, the bottleneck lies in these naive for-loops. Here, understanding Big O notation and reducing the order of computational complexity directly leads to performance improvements.</p>"},{"location":"how-to-guides/others/add-a-custom-ros-message/","title":"Add a custom ROS message","text":""},{"location":"how-to-guides/others/add-a-custom-ros-message/#add-a-custom-ros-message","title":"Add a custom ROS message","text":""},{"location":"how-to-guides/others/add-a-custom-ros-message/#overview","title":"Overview","text":"<p>During the Autoware development, you will probably need to define your own messages. Read the following instructions before adding a custom message.</p> <ol> <li> <p>Message in autoware_msgs define interfaces of <code>Autoware Core</code>.</p> <ul> <li>If a contributor wishes to make changes or add new messages to <code>autoware_msgs</code>, they should first create a new discussion post under the Design category.</li> </ul> </li> <li> <p>Any other minor or proposal messages used for internal communication within a component(such as planning) should be defined in another repository.</p> <ul> <li>tier4_autoware_msgs is an example of that.</li> </ul> </li> </ol> <p>The following is a simple tutorial of adding a message package to <code>autoware_msgs</code>. For the general ROS2 tutorial, see Create custom msg and srv files.</p>"},{"location":"how-to-guides/others/add-a-custom-ros-message/#how-to-create-custom-message","title":"How to create custom message","text":"<p>Make sure you are in the Autoware workspace, and then run the following command to create a new package. As an example, let's create a package to define sensor messages.</p> <ol> <li> <p>Create a package</p> <pre><code>cd ./src/core/autoware_msgs\nros2 pkg create --build-type ament_cmake autoware_sensing_msgs\n</code></pre> </li> <li> <p>Create custom messages</p> <p>You should create <code>.msg</code> files and place them in the <code>msg</code> directory.</p> <p>NOTE: The initial letters of the <code>.msg</code> and <code>.srv</code> files must be capitalized.</p> <p>As an example, let's make <code>.msg</code> files <code>GnssInsOrientation.msg</code> and <code>GnssInsOrientationStamped.msg</code> to define GNSS/INS orientation messages:</p> <pre><code>mkdir msg\ncd msg\ntouch GnssInsOrientation.msg\ntouch GnssInsOrientationStamped.msg\n</code></pre> <p>Edit <code>GnssInsOrientation.msg</code> with your editor to be the following content:</p> <pre><code>geometry_msgs/Quaternion orientation\nfloat32 rmse_rotation_x\nfloat32 rmse_rotation_y\nfloat32 rmse_rotation_z\n</code></pre> <p>In this case, the custom message uses a message from another message package <code>geometry_msgs/Quaternion</code>.</p> <p>Edit <code>GnssInsOrientationStamped.msg</code> with your editor to be the following content:</p> <pre><code>std_msgs/Header header\nGnssInsOrientation orientation\n</code></pre> <p>In this case, the custom message uses a message from another message package <code>std_msgs/Header</code>.</p> </li> <li> <p>Edit CMakeLists.txt</p> <p>In order to use this custom message in <code>C++</code> or <code>Python</code> languages, we need to add the following lines to <code>CMakeList.txt</code>:</p> <pre><code>rosidl_generate_interfaces(${PROJECT_NAME}\n\"msg/GnssInsOrientation.msg\"\n\"msg/GnssInsOrientationStamped.msg\"\nDEPENDENCIES\ngeometry_msgs\nstd_msgs\nADD_LINTER_TESTS\n)\n</code></pre> <p> The <code>ament_cmake_auto</code> tool is very useful and is more widely used in Autoware, so we recommend using <code>ament_cmake_auto</code> instead of <code>ament_cmake</code>.</p> <p>We need to replace</p> <pre><code>find_package(ament_cmake REQUIRED)\n\nament_package()\n</code></pre> <p>with</p> <pre><code>find_package(ament_cmake_auto REQUIRED)\n\nament_auto_package()\n</code></pre> </li> <li> <p>Edit package.xml</p> <p>We need to declare relevant dependencies in <code>package.xml</code>. For the above example we need to add the following content:</p> <pre><code>&lt;buildtool_depend&gt;rosidl_default_generators&lt;/buildtool_depend&gt;\n\n&lt;exec_depend&gt;rosidl_default_runtime&lt;/exec_depend&gt;\n\n&lt;depend&gt;geometry_msgs&lt;/depend&gt;\n&lt;depend&gt;std_msgs&lt;/depend&gt;\n\n&lt;member_of_group&gt;rosidl_interface_packages&lt;/member_of_group&gt;\n</code></pre> <p>We need to replace <code>&lt;buildtool_depend&gt;ament_cmake&lt;/buildtool_depend&gt;</code> with <code>&lt;buildtool_depend&gt;ament_cmake_auto&lt;/buildtool_depend&gt;</code> in the <code>package.xml</code> file.</p> </li> <li> <p>Build the custom message package</p> <p>You can build the package in the root of your workspace, for example by running the following command:</p> <pre><code>colcon build --packages-select autoware_sensing_msgs\n</code></pre> <p>Now the <code>GnssInsOrientationStamped</code> message will be discoverable by other packages in Autoware.</p> </li> </ol>"},{"location":"how-to-guides/others/add-a-custom-ros-message/#how-to-use-custom-messages-in-autoware","title":"How to use custom messages in Autoware","text":"<p>You can use the custom messages in Autoware by following these steps:</p> <ul> <li>Add dependency in <code>package.xml</code>.<ul> <li>For example, <code>&lt;depend&gt;autoware_sensing_msgs&lt;/depend&gt;</code>.</li> </ul> </li> <li>Include the <code>.hpp</code> file of the relevant message in the code.<ul> <li>For example, <code>#include &lt;autoware_sensing_msgs/msg/gnss_ins_orientation_stamped.hpp&gt;</code>.</li> </ul> </li> </ul>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/","title":"Advanced usage of colcon","text":""},{"location":"how-to-guides/others/advanced-usage-of-colcon/#advanced-usage-of-colcon","title":"Advanced usage of colcon","text":"<p>This page shows some advanced and useful usage of <code>colcon</code>. If you need more detailed information, refer to the colcon documentation.</p>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#common-mistakes","title":"Common mistakes","text":""},{"location":"how-to-guides/others/advanced-usage-of-colcon/#do-not-run-from-other-than-the-workspace-root","title":"Do not run from other than the workspace root","text":"<p>It is important that you always run <code>colcon build</code> from the workspace root because <code>colcon</code> builds only under the current directory. If you have mistakenly built in a wrong directory, run <code>rm -rf build/ install/ log/</code> to clean the generated files.</p>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#do-not-unnecessarily-overlay-workspaces","title":"Do not unnecessarily overlay workspaces","text":"<p><code>colcon</code> overlays workspaces if you have sourced the <code>setup.bash</code> of other workspaces before building a workspace. You should take care of this especially when you have multiple workspaces.</p> <p>Run <code>echo $COLCON_PREFIX_PATH</code> to check whether workspaces are overlaid. If you find some workspaces are unnecessarily overlaid, remove all built files, restart the terminal to clean environment variables, and re-build the workspace.</p> <p>For more details about <code>workspace overlaying</code>, refer to the ROS 2 documentation.</p>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#cleaning-up-the-build-artifacts","title":"Cleaning up the build artifacts","text":"<p><code>colcon</code> sometimes causes errors of because of the old cache. To remove the cache and rebuild the workspace, run the following command:</p> <pre><code>rm -rf build/ install/\n</code></pre> <p>In case you know what packages to remove:</p> <pre><code>rm -rf {build,install}/{package_a,package_b}\n</code></pre>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#selecting-packages-to-build","title":"Selecting packages to build","text":"<p>To just build specified packages:</p> <pre><code>colcon build --packages-select &lt;package_name1&gt; &lt;package_name2&gt; ...\n</code></pre> <p>To build specified packages and their dependencies recursively:</p> <pre><code>colcon build --packages-up-to &lt;package_name1&gt; &lt;package_name2&gt; ...\n</code></pre> <p>You can also use these options for <code>colcon test</code>.</p>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#changing-the-optimization-level","title":"Changing the optimization level","text":"<p>Set <code>DCMAKE_BUILD_TYPE</code> to change the optimization level.</p> <p>Warning</p> <p>If you specify <code>DCMAKE_BUILD_TYPE=Debug</code> or no <code>DCMAKE_BUILD_TYPE</code> is given for building the entire Autoware, it may be too slow to use.</p> <pre><code>colcon build --cmake-args -DCMAKE_BUILD_TYPE=Debug\n</code></pre> <pre><code>colcon build --cmake-args -DCMAKE_BUILD_TYPE=RelWithDebInfo\n</code></pre> <pre><code>colcon build --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#changing-the-default-configuration-of-colcon","title":"Changing the default configuration of colcon","text":"<p>Create <code>$COLCON_HOME/defaults.yaml</code> to change the default configuration.</p> <pre><code>mkdir -p ~/.colcon\ncat &lt;&lt; EOS &gt; ~/.colcon/defaults.yaml\n{\n\"build\": {\n\"symlink-install\": true\n}\n}\n</code></pre> <p>For more details, see here.</p>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#generating-compile_commandsjson","title":"Generating compile_commands.json","text":"<p>compile_commands.json is used by IDEs/tools to analyze the build dependencies and symbol relationships.</p> <p>You can generate it with the flag <code>DCMAKE_EXPORT_COMPILE_COMMANDS=1</code>:</p> <pre><code>colcon build --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=1\n</code></pre>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#seeing-compiler-commands","title":"Seeing compiler commands","text":"<p>To see the compiler and linker invocations for a package, use <code>VERBOSE=1</code> and <code>--event-handlers console_cohesion+</code>:</p> <pre><code>VERBOSE=1 colcon build --packages-up-to &lt;package_name&gt; --event-handlers console_cohesion+\n</code></pre> <p>For other options, see here.</p>"},{"location":"how-to-guides/others/advanced-usage-of-colcon/#using-ccache","title":"Using Ccache","text":"<p>Ccache can speed up recompilation. It is recommended to use it to save your time unless you have a specific reason not to do so.</p> <ol> <li> <p>Install <code>Ccache</code>:</p> <pre><code>sudo apt update &amp;&amp; sudo apt install ccache\n</code></pre> </li> <li> <p>Write the following in your <code>.bashrc</code>:</p> <pre><code>export CC=\"/usr/lib/ccache/gcc\"\nexport CXX=\"/usr/lib/ccache/g++\"\n</code></pre> </li> </ol>"},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/","title":"Applying Clang-Tidy to ROS packages","text":""},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#applying-clang-tidy-to-ros-packages","title":"Applying Clang-Tidy to ROS packages","text":"<p>Clang-Tidy is a powerful C++ linter.</p>"},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#preparation","title":"Preparation","text":"<p>You need to generate <code>build/compile_commands.json</code> before using Clang-Tidy.</p> <pre><code>colcon build --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=1\n</code></pre>"},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#usage","title":"Usage","text":"<pre><code>clang-tidy -p build/ path/to/file1 path/to/file2 ...\n</code></pre> <p>If you want to apply Clang-Tidy to all files in a package, using the fd command is useful. To install <code>fd</code>, see the installation manual.</p> <pre><code>clang-tidy -p build/ $(fd -e cpp -e hpp --full-path \"/autoware_utils/\")\n</code></pre>"},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#ide-integration","title":"IDE integration","text":""},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#clion","title":"CLion","text":"<p>Refer to the CLion Documentation.</p>"},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#visual-studio-code","title":"Visual Studio Code","text":"<p>Use either one of the following extensions:</p> <ul> <li>C/C++</li> <li>clangd</li> </ul>"},{"location":"how-to-guides/others/applying-clang-tidy-to-ros-packages/#troubleshooting","title":"Troubleshooting","text":"<p>If you encounter <code>clang-diagnostic-error</code>, try installing <code>libomp-dev</code>.</p> <p>Related: https://github.com/autowarefoundation/autoware-github-actions/pull/172</p>"},{"location":"how-to-guides/others/debug-autoware/","title":"Debug Autoware","text":""},{"location":"how-to-guides/others/debug-autoware/#debug-autoware","title":"Debug Autoware","text":"<p>This page provides some methods for debugging Autoware.</p>"},{"location":"how-to-guides/others/debug-autoware/#print-debug-messages","title":"Print debug messages","text":"<p>The essential thing for debug is to print the program information clearly, which can quickly judge the program operation and locate the problem. Autoware uses ROS 2 logging tool to print debug messages, how to design console logging refer to tutorial Console logging.</p>"},{"location":"how-to-guides/others/debug-autoware/#using-ros-tools-debug-autoware","title":"Using ROS tools debug Autoware","text":""},{"location":"how-to-guides/others/debug-autoware/#using-command-line-tools","title":"Using command line tools","text":"<p>ROS 2 includes a suite of command-line tools for introspecting a ROS 2 system. The main entry point for the tools is the command <code>ros2</code>, which itself has various sub-commands for introspecting and working with nodes, topics, services, and more. How to use the ROS 2 command line tool refer to tutorial CLI tools.</p>"},{"location":"how-to-guides/others/debug-autoware/#using-rviz2","title":"Using rviz2","text":"<p>Rviz2 is a port of Rviz to ROS 2. It provides a graphical interface for users to view their robot, sensor data, maps, and more. You can run Rviz2 tool easily by:</p> <pre><code>rviz2\n</code></pre> <p>When Autoware launch the simulators, the Rviz2 tool is opened by default to visualize the autopilot graphic information.</p>"},{"location":"how-to-guides/others/debug-autoware/#using-rqt-tools","title":"Using rqt tools","text":"<p>RQt is a graphical user interface framework that implements various tools and interfaces in the form of plugins. You can run any RQt tools/plugins easily by:</p> <pre><code>rqt\n</code></pre> <p>This GUI allows you to choose any available plugins on your system. You can also run plugins in standalone windows. For example, RQt Console:</p> <pre><code>ros2 run rqt_console rqt_console\n</code></pre>"},{"location":"how-to-guides/others/debug-autoware/#common-rqt-tools","title":"Common RQt tools","text":"<ol> <li> <p>rqt_graph: view node interaction</p> <p>In complex applications, it may be helpful to get a visual representation of the ROS node interactions.</p> <pre><code>ros2 run rqt_graph rqt_graph\n</code></pre> </li> <li> <p>rqt_console: view messages</p> <p>rqt_console is a great gui for viewing ROS topics.</p> <pre><code>ros2 run rqt_console rqt_console\n</code></pre> </li> <li> <p>rqt_plot: view data plots</p> <p>rqt_plot is an easy way to plot ROS data in real time.</p> <pre><code>ros2 run rqt_plot rqt_plot\n</code></pre> </li> </ol>"},{"location":"how-to-guides/others/debug-autoware/#using-ros2_graph","title":"Using ros2_graph","text":"<p><code>ros2_graph</code> can be used to generate mermaid description of ROS 2 graphs to add on your markdown files.</p> <p>It can also be used as a colorful alternative to <code>rqt_graph</code> even though it would require some tool to render the generated mermaid diagram.</p> <p>It can be installed with:</p> <pre><code>pip install ros2-graph\n</code></pre> <p>Then you can generate a mermaid description of the graph with:</p> <pre><code>ros2_graph your_node\n\n# or like with an output file\nros2_graph /turtlesim -o turtle_diagram.md\n\n# or multiple nodes\nros2_graph /turtlesim /teleop_turtle\n</code></pre> <p>You can then visualize these graphs with:</p> <ul> <li>Mermaid Live Editor</li> <li>Visual Studio Code extension mermaid preview</li> <li>JetBrains IDEs with native support</li> </ul>"},{"location":"how-to-guides/others/debug-autoware/#using-ros2doctor","title":"Using ros2doctor","text":"<p>When your ROS 2 setup is not running as expected, you can check its settings with the <code>ros2doctor</code> tool.</p> <p><code>ros2doctor</code> checks all aspects of ROS 2, including platform, version, network, environment, running systems and more, and warns you about possible errors and reasons for issues.</p> <p>It's as simple as just running <code>ros2 doctor</code> in your terminal.</p> <p>It has the ability to list \"Subscribers without publishers\" for all topics in the system.</p> <p>And this information can help you find if a necessary node isn't running.</p> <p>For more details, see the following official documentation for Using ros2doctor to identify issues.</p>"},{"location":"how-to-guides/others/debug-autoware/#using-a-debugger-with-breakpoints","title":"Using a debugger with breakpoints","text":"<p>Many IDE(e.g. Visual Studio Code, CLion) supports debugging C/C++ executable with GBD on linux platform. The following lists some references for using the debugger:</p> <ul> <li>https://code.visualstudio.com/docs/cpp/cpp-debug</li> <li>https://www.jetbrains.com/help/clion/debugging-code.html#useful-debugger-shortcuts</li> </ul>"},{"location":"how-to-guides/others/determining-component-dependencies/","title":"Determining component dependencies","text":""},{"location":"how-to-guides/others/determining-component-dependencies/#determining-component-dependencies","title":"Determining component dependencies","text":"<p>For any developers who wish to try and deploy Autoware as a microservices architecture, it is necessary to understand the software dependencies, communication, and implemented features of each ROS package/node.</p> <p>As an example, the commands necessary to determine the dependencies for the Perception component are shown below.</p>"},{"location":"how-to-guides/others/determining-component-dependencies/#perception-component-dependencies","title":"Perception component dependencies","text":"<p>To generate a graph of package dependencies, use the following <code>colcon</code> command:</p> <pre><code>colcon graph --dot --packages-up-to tier4_perception_launch | dot -Tpng -o graph.png\n</code></pre> <p></p> <p>To generate a list of dependencies, use:</p> <pre><code>colcon list --packages-up-to tier4_perception_launch --names-only\n</code></pre> colcon list output <pre><code>autoware_auto_geometry_msgs\nautoware_auto_mapping_msgs\nautoware_auto_perception_msgs\nautoware_auto_planning_msgs\nautoware_auto_vehicle_msgs\nautoware_cmake\nautoware_lint_common\nautoware_point_types\ncompare_map_segmentation\ndetected_object_feature_remover\ndetected_object_validation\ndetection_by_tracker\neuclidean_cluster\ngrid_map_cmake_helpers\ngrid_map_core\ngrid_map_cv\ngrid_map_msgs\ngrid_map_pcl\ngrid_map_ros\nground_segmentation\nimage_projection_based_fusion\nimage_transport_decompressor\ninterpolation\nkalman_filter\nlanelet2_extension\nlidar_apollo_instance_segmentation\nmap_based_prediction\nmulti_object_tracker\nmussp\nobject_merger\nobject_range_splitter\noccupancy_grid_map_outlier_filter\npointcloud_preprocessor\npointcloud_to_laserscan\nshape_estimation\ntensorrt_yolo\ntier4_autoware_utils\ntier4_debug_msgs\ntier4_pcl_extensions\ntier4_perception_launch\ntier4_perception_msgs\ntraffic_light_classifier\ntraffic_light_map_based_detector\ntraffic_light_ssd_fine_detector\ntraffic_light_visualization\nvehicle_info_util\n</code></pre> <p>Tip</p> <p>To output a list of modules with their respective paths, run the command above without the <code>--names-only</code> parameter.</p> <p>To see which ROS topics are being subscribed and published to, use <code>rqt_graph</code> as follows:</p> <pre><code>ros2 launch tier4_perception_launch perception.launch.xml mode:=lidar\nros2 run rqt_graph rqt_graph\n</code></pre>"},{"location":"how-to-guides/others/eagleye-integration-guide/","title":"Using Eagleye with Autoware","text":""},{"location":"how-to-guides/others/eagleye-integration-guide/#using-eagleye-with-autoware","title":"Using Eagleye with Autoware","text":"<p>This page will show you how to set up Eagleye in order to use it with Autoware. For the details of the integration proposal, please refer to this Discussion.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#what-is-eagleye","title":"What is Eagleye?","text":"<p>Eagleye is an open-source GNSS/IMU-based localizer initially developed by MAP IV. Inc. It provides a cost-effective alternative to LiDAR and point cloud-based localization by using low-cost GNSS and IMU sensors to provide vehicle position, orientation, and altitude information. By integrating Eagleye into Autoware, users can choose between LiDAR and point cloud-based localization stacks or GNSS/IMU-based Eagleye localizer, depending on their specific needs and operating environment.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#architecture","title":"Architecture","text":"<p>Eagleye can be utilized in the Autoware localization stack in two ways:</p> <ol> <li> <p>Feed only twist into the EKF localizer.</p> <p></p> </li> <li> <p>Feed both twist and pose from Eagleye into the EKF localizer (twist can also be used with regular <code>gyro_odometry</code>).</p> <p></p> </li> </ol> <p>Note that RTK positioning is only required for localization using the Eagleye pose. RTK positioning is not required for twist.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#requirements","title":"Requirements","text":"<p>GNSS/IMU/vehicle speed is required for Eagleye input.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#imu-topic","title":"IMU topic","text":"<p><code>sensor_msgs/msg/Imu</code> are supported for IMU.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#vehicle-speed-topic","title":"Vehicle speed topic","text":"<p><code>geometry_msgs/msg/TwistStamped</code> and <code>geometry_msgs/msg/TwistWithCovarianceStamped</code> are supported for the input vehicle speed.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#gnss-topic","title":"GNSS topic","text":"<p>Eagleye requires latitude/longitude height information and velocity information generated by the GNSS receiver. Your GNSS ROS driver must publish the following messages:</p> <ul> <li><code>sensor_msgs/msg/NavSatFix</code>: This message contains latitude, longitude, and height information.</li> <li><code>geometry_msgs/msg/TwistWithCovarianceStamped</code>: This message contains gnss doppler velocity information.</li> </ul> <p>Eagleye has been tested with the following example GNSS ROS drivers: ublox_gps and septentrio_gnss_driver. The settings needed for each of these drivers are as follows:</p> <ul> <li>ublox_gps: This ROS driver publishes <code>sensor_msgs/msg/NavSatFix</code> and <code>geometry_msgs/msg/TwistWithCovarianceStamped</code> required by Eagleye with default settings. Therefore, no additional settings are required.</li> <li>septentrio_gnss_driver: Set <code>publish.navsatfix</code> and <code>publish.twist</code> in the config file <code>gnss.yaml</code> to <code>true</code></li> </ul>"},{"location":"how-to-guides/others/eagleye-integration-guide/#eagleye-setup","title":"Eagleye Setup","text":""},{"location":"how-to-guides/others/eagleye-integration-guide/#install-dependencies","title":"Install dependencies","text":"<p>Clone the following three packages for Eagleye:</p> <ol> <li>Eagleye (autoware-main branch)</li> <li>RTKLIB ROS Bridge (ros2-v0.1.0 branch)</li> <li>LLH Converter (ros2 branch)</li> </ol>"},{"location":"how-to-guides/others/eagleye-integration-guide/#modifying-autoware-launch-files","title":"Modifying Autoware Launch files","text":"<p>You need to install Eagleye-related packages and change Autoware's launcher. Four files are required in the Autoware localization launcher to run Eagleye: <code>eagleye_rt.launch.xml</code>, <code>eagleye_config.yaml</code>, <code>gnss_converter.launch.xml</code>, and <code>fix2pose.launch.xml</code>.</p> <p>You must correctly specify input topics for GNSS latitude, longitude, and height information, GNSS speed information, IMU information, and vehicle speed information in the <code>eagleye_config.yaml</code>.</p> <pre><code># Topic\ntwist:\ntwist_type: 1 # TwistStamped : 0, TwistWithCovarianceStamped: 1\ntwist_topic: /sensing/vehicle_velocity_converter/twist_with_covariance\nimu_topic: /sensing/imu/tamagawa/imu_raw\ngnss:\nvelocity_source_type: 2 # rtklib_msgs/RtklibNav: 0, nmea_msgs/Sentence: 1, ublox_msgs/NavPVT: 2, geometry_msgs/TwistWithCovarianceStamped: 3\nvelocity_source_topic: /sensing/gnss/ublox/navpvt\nllh_source_type: 2 # rtklib_msgs/RtklibNav: 0, nmea_msgs/Sentence: 1, sensor_msgs/NavSatFix: 2\nllh_source_topic: /sensing/gnss/ublox/nav_sat_fix\n</code></pre> <p>Also, the frequency of GNSS and IMU must be set in <code>eagleye_config.yaml</code></p> <pre><code>common:\nimu_rate: 50\ngnss_rate: 5\n</code></pre> <p>The basic parameters that do not need to be changed except those mentioned above, i.e., topic names and sensors' frequency, are described below here. Additionally, the parameters for converting <code>sensor_msgs/msg/NavSatFix</code> to <code>geometry_msgs/msg/PoseWithCovarianceStamped</code> is listed in <code>fix2pose.yaml</code>.</p> <p>Please refer to <code>map4_localization_launch</code> in the <code>autoware.universe</code> package and <code>map4_localization_component.launch.xml</code> in <code>autoware_launch</code> package for information on how to modify the localization launch.</p> <p>Eagleye has a function for position estimation and a function for twist estimation, namely <code>pose_estimator</code> and <code>twist_estimator</code>, respectively.</p> localization launch twist estimator pose estimator <code>tier4_localization_launch</code> <code>gyro_odometry</code> <code>ndt_scan_matcher</code> <code>map4_localization_launch/eagleye_twist_localization_launch</code> <code>eagleye_rt</code>(gyro/odom/gnss fusion) <code>ndt_scan_matcher</code> <code>map4_localization_launch/eagleye_pose_twist_localization_launch</code> <code>eagleye_rt</code>(gyro/odom/gnss fusion) <code>eagleye_rt</code>(gyro/odom/gnss fusion) <p>In Autoware, you can set the pose estimator to GNSS by setting <code>pose_estimator_mode:=gnss</code> in <code>map4_localization_component.launch.xml</code> in <code>autoware_launch</code> package. Note that the output position might not appear to be in the point cloud maps if you are using maps that are not properly georeferenced. In the case of a single GNSS antenna, initial position estimation (dynamic initialization) can take several seconds to complete after starting to run in an environment where GNSS positioning is available.</p> <p>Alternatively, the twist estimator can be set to Eagleye and the pose estimator to NDT by specifying <code>pose_estimator_mode:=lidar</code> in the same launch file. Unlike Eagleye position estimation, Eagleye twist estimation first outputs uncorrected raw values when activated, and then outputs corrected twists as soon as static initialization is complete.</p>"},{"location":"how-to-guides/others/eagleye-integration-guide/#executing-launch-files","title":"Executing Launch files","text":""},{"location":"how-to-guides/others/eagleye-integration-guide/#execution-command","title":"Execution command","text":"<p>Enable Eagleye in Autoware by switching the localization module in autoware.launch.xml and the <code>pose_estimator_mode</code> parameter in <code>map4_localization_component.launch.xml</code> in <code>autoware.launch.xml</code>.</p> <p>When using Eagleye, comment out <code>tier4_localization_component.launch.xml</code> and start <code>map4_localization_component.launch.xml</code> in <code>autoware.launch.xml</code>.</p> <pre><code>  &lt;!-- Localization --&gt;\n&lt;group if=\"$(var launch_localization)\"&gt;\n&lt;!-- &lt;include file=\"$(find-pkg-share autoware_launch)/launch/components/tier4_localization_component.launch.xml\"/&gt; --&gt;\n&lt;include file=\"$(find-pkg-share autoware_launch)/launch/components/map4_localization_component.launch.xml\"/&gt;\n&lt;/group&gt;\n</code></pre>"},{"location":"how-to-guides/others/eagleye-integration-guide/#notes-with-initialization","title":"Notes with initialization","text":"<p>Eagleye requires an initialization process for proper operation. Without initialization, the output for twist will be in the raw value, and the pose data will not be available.</p> <p>The first step is static initialization, which involves allowing the Eagleye to remain stationary for approximately 5 seconds after startup to estimate the yaw-rate offset.</p> <p>The next step is dynamic initialization, which involves running the Eagleye in a straight line for approximately 30 seconds. This process estimates the scale factor of wheel speed and azimuth angle. Once dynamic initialization is complete, the Eagleye will be able to provide corrected twist and pose data.</p>"},{"location":"how-to-guides/others/fixing-dependent-package-versions/","title":"Fixing dependent package versions","text":""},{"location":"how-to-guides/others/fixing-dependent-package-versions/#fixing-dependent-package-versions","title":"Fixing dependent package versions","text":"<p>Autoware manages dependent package versions in autoware.repos. For example, let's say you make a branch in autoware.universe and add new features. Suppose you update other dependencies with <code>vcs pull</code> after cutting a branch from autoware.universe. Then the version of autoware.universe you are developing and other dependencies will become inconsistent, and the entire Autoware build will fail. We recommend saving the dependent package versions by executing the following command when starting the development.</p> <pre><code>vcs export src --exact &gt; my_autoware.repos\n</code></pre>"},{"location":"how-to-guides/others/running-autoware-without-cuda/","title":"Running Autoware without CUDA","text":""},{"location":"how-to-guides/others/running-autoware-without-cuda/#running-autoware-without-cuda","title":"Running Autoware without CUDA","text":"<p>Although CUDA installation is recommended to achieve better performance for object detection and traffic light recognition in Autoware Universe, it is possible to run these algorithms without CUDA. The following subsections briefly explain how to run each algorithm in such an environment.</p>"},{"location":"how-to-guides/others/running-autoware-without-cuda/#running-2d3d-object-detection-without-cuda","title":"Running 2D/3D object detection without CUDA","text":"<p>Autoware Universe's object detection can be run using one of five possible configurations:</p> <ul> <li><code>lidar_centerpoint</code></li> <li><code>lidar_apollo_instance_segmentation</code></li> <li><code>lidar-apollo</code> + <code>tensorrt_yolo</code></li> <li><code>lidar-centerpoint</code> + <code>tensorrt_yolo</code></li> <li><code>euclidean_cluster</code></li> </ul> <p>Of these five configurations, only the last one (<code>euclidean_cluster</code>) can be run without CUDA. For more details, refer to the <code>euclidean_cluster</code> module's README file.</p>"},{"location":"how-to-guides/others/running-autoware-without-cuda/#running-traffic-light-detection-without-cuda","title":"Running traffic light detection without CUDA","text":"<p>For traffic light recognition (both detection and classification), there are two modules that require CUDA:</p> <ul> <li><code>traffic_light_ssd_fine_detector</code></li> <li><code>traffic_light_classifier</code></li> </ul> <p>To run traffic light detection without CUDA, set <code>enable_fine_detection</code> to <code>false</code> in the traffic light launch file. Doing so disables the <code>traffic_light_ssd_fine_detector</code> such that traffic light detection is handled by the <code>map_based_traffic_light_detector</code> module instead.</p> <p>To run traffic light classification without CUDA, set <code>use_gpu</code> to <code>false</code> in the traffic light classifier launch file. Doing so will force the <code>traffic_light_classifier</code> to use a different classification algorithm that does not require CUDA or a GPU.</p>"},{"location":"installation/","title":"Installation","text":""},{"location":"installation/#installation","title":"Installation","text":""},{"location":"installation/#target-platforms","title":"Target platforms","text":"<p>Autoware targets the platforms listed below. It may change in future versions of Autoware.</p> <p>The Autoware Foundation provides no support on other platforms than those listed below.</p>"},{"location":"installation/#architecture","title":"Architecture","text":"<ul> <li>amd64</li> <li>arm64</li> </ul>"},{"location":"installation/#minimum-hardware-requirements","title":"Minimum hardware requirements","text":"<p>Info</p> <p>Autoware is scalable and can be customized to work with distributed or less powerful hardware. The minimum hardware requirements given below are just a general recommendation. However, performance will be improved with more cores, RAM and a higher-spec graphics card or GPU core.</p> <ul> <li>CPU with 8 cores</li> <li>16GB RAM</li> <li>[Optional] NVIDIA GPU (4GB RAM)</li> </ul> <p>Although GPU is not required to run basic functionality, it is mandatory to enable the following neural network related functions:</p> <ul> <li>LiDAR based object detection</li> <li>Camera based object detection</li> <li>Traffic light detection and classification</li> </ul> <p>For details of how to enable object detection and traffic light detection/classification without a GPU, refer to the Running Autoware without CUDA.</p>"},{"location":"installation/#installing-autoware","title":"Installing Autoware","text":"<p>There are two ways to set up Autoware. Choose one according to your preference.</p> <p>If any issues occur during installation, refer to the Support page.</p>"},{"location":"installation/#1-docker-installation","title":"1. Docker installation","text":"<p>Docker can ensure that all developers in a project have a common, consistent development environment. It is recommended for beginners, casual users, people who are unfamiliar with Ubuntu.</p> <p>For more information, refer to the Docker installation guide.</p>"},{"location":"installation/#2-source-installation","title":"2. Source installation","text":"<p>Source installation is for the cases where more granular control of the installation environment is needed. It is recommended for experienced users or people who want to customize their environment. Note that some problems may occur depending on your local environment.</p> <p>For more information, refer to the source installation guide.</p>"},{"location":"installation/#installing-related-tools","title":"Installing related tools","text":"<p>Some other tools are required depending on the evaluation you want to do. For example, to run an end-to-end simulation you need to install an appropriate simulator.</p> <p>For more information, see here.</p>"},{"location":"installation/#additional-settings-for-developers","title":"Additional settings for developers","text":"<p>There are also tools and settings for developers, such as Shells or IDEs.</p> <p>For more information, see here.</p>"},{"location":"installation/additional-settings-for-developers/","title":"Additional settings for developers","text":""},{"location":"installation/additional-settings-for-developers/#additional-settings-for-developers","title":"Additional settings for developers","text":""},{"location":"installation/additional-settings-for-developers/#console-settings-for-ros-2","title":"Console settings for ROS 2","text":""},{"location":"installation/additional-settings-for-developers/#colorizing-logger-output","title":"Colorizing logger output","text":"<p>By default, ROS 2 logger doesn't colorize the output. To colorize it, write the following in your <code>.bashrc</code>:</p> <pre><code>export RCUTILS_COLORIZED_OUTPUT=1\n</code></pre>"},{"location":"installation/additional-settings-for-developers/#customizing-the-format-of-logger-output","title":"Customizing the format of logger output","text":"<p>By default, ROS 2 logger doesn't output detailed information such as file name, function name, or line number. To customize it, write the following in your <code>.bashrc</code>:</p> <pre><code>export RCUTILS_CONSOLE_OUTPUT_FORMAT=\"[{severity} {time}] [{name}]: {message} ({function_name}() at {file_name}:{line_number})\"\n</code></pre> <p>For more options, see here.</p>"},{"location":"installation/additional-settings-for-developers/#network-settings-for-ros-2","title":"Network settings for ROS 2","text":"<p>ROS 2 employs DDS, and the configuration of ROS 2 and DDS is described separately. For ROS 2 networking concepts, refer to the official documentation.</p>"},{"location":"installation/additional-settings-for-developers/#ros-2-network-setting","title":"ROS 2 network setting","text":"<p>ROS 2 multicasts data on the local network by default. Therefore, when you develop in an office, the data flows over the local network of your office. It may cause collisions of packets or increases in network traffic.</p> <p>To avoid these, there are two options.</p> <ul> <li>Localhost-only communication</li> <li>Same domain only communication on the local network</li> </ul> <p>Unless you plan to use multiple host computers on the local network, localhost-only communication is recommended. For details, refer to the sections below.</p>"},{"location":"installation/additional-settings-for-developers/#enabling-localhost-only-communication","title":"Enabling localhost-only communication","text":"<p>Write the following in your <code>.bashrc</code>: For more information, see the ROS 2 documentation.</p> <pre><code>export ROS_LOCALHOST_ONLY=1\n</code></pre> <p>If you export <code>ROS_LOCALHOST_ONLY=1</code>, <code>MULTICAST</code> must be enabled at the loopback address. To verify that <code>MULTICAST</code> is enabled, use the following command.</p> <pre><code>$ ip link show lo\n1: lo: &lt;LOOPBACK,MULTICAST,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000\n</code></pre> <p>If the word <code>MULTICAST</code> is not printed, use the following command to enable it.</p> <pre><code>sudo ip link set lo multicast on\n</code></pre>"},{"location":"installation/additional-settings-for-developers/#same-domain-only-communication-on-the-local-network","title":"Same domain only communication on the local network","text":"<p>ROS 2 uses <code>ROS_DOMAIN_ID</code> to create groups and communicate between machines in the groups. Since all ROS 2 nodes use domain ID <code>0</code> by default, it may cause unintended interference.</p> <p>To avoid it, set a different domain ID for each group in your <code>.bashrc</code>:</p> <pre><code># Replace X with the Domain ID you want to use\n# Domain ID should be a number in range [0, 101] (inclusive)\nexport ROS_DOMAIN_ID=X\n</code></pre> <p>Also confirm that <code>ROS_LOCALHOST_ONLY</code> is <code>0</code> by using the following command.</p> <pre><code>echo $ROS_LOCALHOST_ONLY # If the output is 1, localhost has priority.\n</code></pre> <p>For more information, see the ROS 2 Documentation.</p>"},{"location":"installation/additional-settings-for-developers/#dds-settings","title":"DDS settings","text":"<p>Autoware uses DDS for inter-node communication. ROS 2 documentation recommends users to tune DDS to utilize its capability. Especially, receive buffer size is the critical parameter for Autoware. If the parameter is not large enough, Autoware will failed in receiving large data like point cloud or image.</p>"},{"location":"installation/additional-settings-for-developers/#tuning-dds","title":"Tuning DDS","text":"<p>Unless customized, CycloneDDS is adopted by default. For example, to execute Autoware with CycloneDDS, prepare a config file. A sample config file is given below. Save it as <code>cyclonedds_config.xml</code>.</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;CycloneDDS xmlns=\"https://cdds.io/config\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd\"&gt;\n&lt;Domain Id=\"any\"&gt;\n&lt;General&gt;\n&lt;Interfaces&gt;\n&lt;NetworkInterface autodetermine=\"true\" priority=\"default\" multicast=\"default\" /&gt;\n&lt;/Interfaces&gt;\n&lt;AllowMulticast&gt;default&lt;/AllowMulticast&gt;\n&lt;MaxMessageSize&gt;65500B&lt;/MaxMessageSize&gt;\n&lt;/General&gt;\n&lt;Internal&gt;\n&lt;SocketReceiveBufferSize min=\"10MB\"/&gt;\n&lt;Watermarks&gt;\n&lt;WhcHigh&gt;500kB&lt;/WhcHigh&gt;\n&lt;/Watermarks&gt;\n&lt;/Internal&gt;\n&lt;/Domain&gt;\n&lt;/CycloneDDS&gt;\n</code></pre> <p>This configuration is mostly taken from Eclipse Cyclone DDS:Run-time configuration documentation. You can see why each value is set as such under the documentation link.</p> <p>Set the config file path and enlarge the Linux kernel maximum buffer size before launching Autoware.</p> <pre><code>export CYCLONEDDS_URI=file:///absolute/path/to/cyclonedds_config.xml\nsudo sysctl -w net.core.rmem_max=2147483647\n</code></pre> <p>For more information, Refer to ROS 2 documentation. Reading user guide for chosen DDS is helpful for more understanding.</p>"},{"location":"installation/additional-settings-for-developers/#tuning-dds-for-multiple-host-computers-for-advanced-users","title":"Tuning DDS for multiple host computers (for advanced users)","text":"<p>When Autoware runs on multiple host computers, IP Fragmentation should be taken into account. As ROS 2 documentation recommends, parameters for IP Fragmentation should be set as shown in the following example.</p> <pre><code>sudo sysctl -w net.ipv4.ipfrag_time=3\nsudo sysctl -w net.ipv4.ipfrag_high_thresh=134217728     # (128 MB)\n</code></pre>"},{"location":"installation/autoware/docker-installation-devel/","title":"Docker installation for development","text":""},{"location":"installation/autoware/docker-installation-devel/#docker-installation-for-development","title":"Docker installation for development","text":""},{"location":"installation/autoware/docker-installation-devel/#prerequisites","title":"Prerequisites","text":"<ul> <li>Git</li> </ul> <ul> <li>For NVIDIA Jetson devices, install JetPack &gt;= 5.0</li> </ul>"},{"location":"installation/autoware/docker-installation-devel/#how-to-set-up-a-development-environment","title":"How to set up a development environment","text":"<ol> <li> <p>Clone <code>autowarefoundation/autoware</code> and move to the directory.</p> <pre><code>git clone https://github.com/autowarefoundation/autoware.git\ncd autoware\n</code></pre> </li> <li> <p>You can install the dependencies either manually or using the provided Ansible script.</p> </li> </ol> <p>Note: Before installing NVIDIA libraries, confirm and agree with the licenses.</p> <ul> <li>CUDA</li> </ul>"},{"location":"installation/autoware/docker-installation-devel/#installing-dependencies-manually","title":"Installing dependencies manually","text":"<ul> <li>Install Nvidia CUDA</li> <li>Install Docker Engine</li> <li>Install NVIDIA Container Toolkit</li> <li>Install rocker</li> </ul>"},{"location":"installation/autoware/docker-installation-devel/#installing-dependencies-using-ansible","title":"Installing dependencies using Ansible","text":"<p>Be very careful with this method. Make sure you read and confirmed all the steps in the Ansible configuration before using it.</p> <p>If you've manually installed the dependencies, you can skip this section.</p> <pre><code>./setup-dev-env.sh docker\n</code></pre> <p>You might need to log out and log back to make the current user able to use docker.</p>"},{"location":"installation/autoware/docker-installation-devel/#how-to-set-up-a-workspace","title":"How to set up a workspace","text":"<p>Warning</p> <p>Before proceeding, confirm and agree with the NVIDIA Deep Learning Container license. By pulling and using the Autoware Universe images, you accept the terms and conditions of the license.</p> <ol> <li> <p>Create the <code>autoware_map</code> directory for map data later.</p> <pre><code>mkdir ~/autoware_map\n</code></pre> </li> <li> <p>Pull the Docker image</p> <pre><code>docker pull ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> </li> <li> <p>Launch a Docker container.</p> <ul> <li> <p>For amd64 architecture computers with NVIDIA GPU:</p> <pre><code>rocker --nvidia --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> </li> </ul> <ul> <li> <p>If you want to run container without using NVIDIA GPU, or for arm64 architecture computers:</p> <pre><code>rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> <p>For detailed reason could be found here</p> </li> </ul> <p>For more advanced usage, see here.</p> <p>After that, move to the workspace in the container:</p> <pre><code>cd autoware\n</code></pre> </li> <li> <p>Create the <code>src</code> directory and clone repositories into it.</p> <pre><code>mkdir src\nvcs import src &lt; autoware.repos\n</code></pre> </li> <li> <p>Update dependent ROS packages.</p> <p>The dependency of Autoware may change after the Docker image was created.  In that case, you need to run the following commands to update the dependency.</p> <pre><code>sudo apt update\nrosdep update\nrosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO\n</code></pre> </li> <li> <p>Build the workspace.</p> <pre><code>colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> <p>If there is any build issue, refer to Troubleshooting.</p> </li> </ol>"},{"location":"installation/autoware/docker-installation-devel/#how-to-update-a-workspace","title":"How to update a workspace","text":"<ol> <li> <p>Update the Docker image.</p> <pre><code>docker pull ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> </li> <li> <p>Launch a Docker container.</p> <ul> <li> <p>For amd64 architecture computers:</p> <pre><code>rocker --nvidia --x11 --user --volume $HOME/autoware -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> </li> </ul> <ul> <li> <p>If you want to run container without using NVIDIA GPU, or for arm64 architecture computers:</p> <pre><code>rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> </li> </ul> </li> <li> <p>Update the <code>.repos</code> file.</p> <pre><code>cd autoware\ngit pull\n</code></pre> </li> <li> <p>Update the repositories.</p> <pre><code>vcs import src &lt; autoware.repos\nvcs pull src\n</code></pre> </li> <li> <p>Build the workspace.</p> <pre><code>colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> </li> </ol>"},{"location":"installation/autoware/docker-installation-prebuilt/","title":"Docker installation for quick start","text":""},{"location":"installation/autoware/docker-installation-prebuilt/#docker-installation-for-quick-start","title":"Docker installation for quick start","text":""},{"location":"installation/autoware/docker-installation-prebuilt/#how-to-set-up-a-development-environment","title":"How to set up a development environment","text":"<ol> <li> <p>Installing dependencies manually</p> <ul> <li>Install Docker Engine</li> </ul> <ul> <li>Install NVIDIA Container Toolkit</li> </ul> <ul> <li>Install rocker</li> </ul> </li> </ol>"},{"location":"installation/autoware/docker-installation-prebuilt/#how-to-set-up-a-workspace","title":"How to set up a workspace","text":"<ol> <li> <p>Create the <code>autoware_map</code> directory for map data later.</p> <pre><code>mkdir ~/autoware_map\n</code></pre> </li> <li> <p>Launch a Docker container.</p> <pre><code>rocker --nvidia --x11 --user --volume $HOME/autoware_map -- ghcr.io/autowarefoundation/autoware-universe:humble-latest-prebuilt\n</code></pre> <p>For more advanced usage, see here.</p> </li> <li> <p>Run Autoware simulator</p> <p>Inside the container, you can run the Autoware simulation by following this tutorial:</p> <p>planning simulation</p> <p>rosbag replay simulation.</p> </li> </ol>"},{"location":"installation/autoware/docker-installation/","title":"Docker installation","text":""},{"location":"installation/autoware/docker-installation/#docker-installation","title":"Docker installation","text":"<p>Info</p> <p>Since this page explains Docker-specific information, it is recommended to see Source installation as well if you need detailed information.</p> <p>Here are two ways to install Autoware by docker:</p> <ul> <li>The first way is to start Autoware with <code>prebuilt image</code>, this is a quick start, this way you can only run Autoware simulator and not develop Autoware, it is only suitable for beginners</li> </ul> <ul> <li>The second way is to start Autoware with <code>devel image</code>, which supports developing and running Autoware using docker</li> </ul>"},{"location":"installation/autoware/docker-installation/#docker-installation-for-quick-start","title":"Docker installation for quick start","text":"<p>docker installation for quick start</p> <p></p>"},{"location":"installation/autoware/docker-installation/#docker-installation-for-development","title":"Docker installation for development","text":"<p>docker installation for development</p> <p></p>"},{"location":"installation/autoware/docker-installation/#troubleshooting","title":"Troubleshooting","text":"<p>Here are solutions for a few specific errors:</p>"},{"location":"installation/autoware/docker-installation/#cuda-error-forward-compatibility-was-attempted-on-non-supported-hw","title":"cuda error: forward compatibility was attempted on non supported hw","text":"<p>When starting Docker with GPU support enabled for NVIDIA graphics, you may sometimes receive the following error:</p> <pre><code>docker: Error response from daemon: OCI runtime create failed: container_linux.go:349: starting container process caused \"process_linux.go:449: container init caused \\\"process_linux.go:432: running prestart hook 0 caused \\\\\\\"error running hook: exit status 1, stdout: , stderr: nvidia-container-cli: initialization error: cuda error: forward compatibility was attempted on non supported hw\\\\\\\\n\\\\\\\"\\\"\": unknown.\nERROR: Command return non-zero exit code (see above): 125\n</code></pre> <p>This usually indicates that a new NVIDIA graphics driver has been installed (usually via <code>apt</code>) but the system has not yet been restarted. A similar message may appear if the graphics driver is not available, for example because of resuming after suspend.</p> <p>To fix this, restart your system after installing the new NVIDIA driver.</p>"},{"location":"installation/autoware/docker-installation/#docker-with-nvidia-gpu-fails-to-start-autoware-on-arm64-devices","title":"Docker with NVIDIA gpu fails to start Autoware on arm64 devices","text":"<p>When starting Docker with GPU support enabled for NVIDIA graphics on arm64 devices, e.g. NVIDIA jetson AGX xavier, you may receive the following error:</p> <pre><code>nvidia@xavier:~$ rocker --nvidia --x11 --user --volume $HOME/autoware -- ghcr.io/autowarefoundation/autoware-universe:humble-latest-cuda-arm64\n...\n\nCollecting staticx==0.12.3\nDownloading https://files.pythonhosted.org/packages/92/ff/d9960ea1f9db48d6044a24ee0f3d78d07bcaddf96eb0c0e8806f941fb7d3/staticx-0.12.3.tar.gz (68kB)\nComplete output from command python setup.py egg_info:\nTraceback (most recent call last):\nFile \"\", line 1, in\nFile \"/tmp/pip-install-m_nm8mya/staticx/setup.py\", line 4, in\nfrom wheel.bdist_wheel import bdist_wheel\nModuleNotFoundError: No module named 'wheel'\n\nCommand \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-install-m_nm8mya/staticx/\n...\n</code></pre> <p>This error exists in current version of rocker tool, which relates to the os_detection function of rocker.</p> <p>To fix this error, temporary modification of rocker source code is required, which is not recommended.</p> <p>At current stage, it is recommended to run docker without NVIDIA gpu enabled for arm64 devices:</p> <pre><code>rocker -e LIBGL_ALWAYS_SOFTWARE=1 --x11 --user --volume $HOME/autoware -- ghcr.io/autowarefoundation/autoware-universe:latest-cuda\n</code></pre> <p>This tutorial will be updated after official fix from rocker.</p>"},{"location":"installation/autoware/docker-installation/#tips","title":"Tips","text":""},{"location":"installation/autoware/docker-installation/#non-native-arm64-system","title":"Non-native arm64 System","text":"<p>This section describes a process to run <code>arm64</code> systems on <code>amd64</code> systems using <code>qemu-user-static</code>.</p> <p>Initially, your system is usually incompatible with <code>arm64</code> systems. To check that:</p> <pre><code>$ docker run --rm -t arm64v8/ubuntu uname -m\nWARNING: The requested image's platform (linux/arm64/v8) does not match the detected host platform (linux/amd64) and no specific platform was requested\nstandard_init_linux.go:228: exec user process caused: exec format error\n</code></pre> <p>Installing <code>qemu-user-static</code> enables us to run <code>arm64</code> images on <code>amd64</code> systems.</p> <pre><code>$ sudo apt-get install qemu-user-static\n$ docker run --rm --privileged multiarch/qemu-user-static --reset -p yes\n$ docker run --rm -t arm64v8/ubuntu uname -m\nWARNING: The requested image's platform (linux/arm64/v8) does not match the detected host platform (linux/amd64) and no specific platform was requested\naarch64\n</code></pre> <p>To run Autoware's Docker images of <code>arm64</code> architecture, add the suffix <code>-arm64</code>.</p> <pre><code>$ docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:humble-latest-cuda-arm64\nWARNING: The requested image's platform (linux/arm64) does not match the detected host platform (linux/amd64) and no specific platform was requested\nroot@5b71391ad50f:/autoware#\n</code></pre>"},{"location":"installation/autoware/source-installation/","title":"Source installation","text":""},{"location":"installation/autoware/source-installation/#source-installation","title":"Source installation","text":""},{"location":"installation/autoware/source-installation/#prerequisites","title":"Prerequisites","text":"<ul> <li> <p>OS</p> <ul> <li>Ubuntu 22.04</li> </ul> </li> </ul> <ul> <li> <p>ROS</p> <ul> <li>ROS 2 Humble</li> </ul> <p>For ROS 2 system dependencies, refer to REP-2000.</p> </li> </ul> <ul> <li>Git<ul> <li>Registering SSH keys to GitHub is preferable.</li> </ul> </li> </ul> <pre><code>sudo apt-get -y update\nsudo apt-get -y install git\n</code></pre> <p>Note: If you wish to use ROS 2 Galactic on Ubuntu 20.04, refer to installation instruction from galactic branch, but be aware that Galactic version of Autoware might not have latest features.</p>"},{"location":"installation/autoware/source-installation/#how-to-set-up-a-development-environment","title":"How to set up a development environment","text":"<ol> <li> <p>Clone <code>autowarefoundation/autoware</code> and move to the directory.</p> <pre><code>git clone https://github.com/autowarefoundation/autoware.git\ncd autoware\n</code></pre> </li> <li> <p>If you are installing Autoware for the first time, you can automatically install the dependencies by using the provided Ansible script.</p> <pre><code>./setup-dev-env.sh\n</code></pre> <p>If you encounter any build issues, please consult the Troubleshooting section for assistance.</p> </li> </ol> <p>Info</p> <p>Before installing NVIDIA libraries, please ensure that you have reviewed and agreed to the licenses.</p> <ul> <li>CUDA</li> <li>cuDNN</li> <li>TensorRT</li> </ul> <p>Note</p> <p>The following items will be automatically installed. If the ansible script doesn't work or if you already have different versions of dependent libraries installed, please install the following items manually.</p> <ul> <li>Install ROS 2</li> <li>Install ROS 2 Dev Tools</li> <li>Install the RMW Implementation</li> <li>Install pacmod</li> <li>Install Autoware Core dependencies</li> <li>Install Autoware Universe dependencies</li> <li>Install pre-commit dependencies</li> <li>Install Nvidia CUDA</li> <li>Install Nvidia cuDNN and TensorRT</li> </ul>"},{"location":"installation/autoware/source-installation/#how-to-set-up-a-workspace","title":"How to set up a workspace","text":"<ol> <li> <p>Create the <code>src</code> directory and clone repositories into it.</p> <p>Autoware uses vcstool to construct workspaces.</p> <pre><code>cd autoware\nmkdir src\nvcs import src &lt; autoware.repos\n</code></pre> </li> <li> <p>Install dependent ROS packages.</p> <p>Autoware requires some ROS 2 packages in addition to the core components.  The tool <code>rosdep</code> allows an automatic search and installation of such dependencies.  You might need to run <code>rosdep update</code> before <code>rosdep install</code>.</p> <pre><code>source /opt/ros/humble/setup.bash\nrosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO\n</code></pre> </li> <li> <p>Build the workspace.</p> <p>Autoware uses colcon to build workspaces.  For more advanced options, refer to the documentation.</p> <pre><code>colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> <p>If there is any build issue, refer to Troubleshooting.</p> </li> </ol>"},{"location":"installation/autoware/source-installation/#how-to-update-a-workspace","title":"How to update a workspace","text":"<ol> <li> <p>Update the <code>.repos</code> file.</p> <pre><code>cd autoware\ngit pull\n</code></pre> </li> <li> <p>Update the repositories.</p> <pre><code>vcs import src &lt; autoware.repos\nvcs pull src\n</code></pre> <p>For Git users:</p> <ul> <li><code>vcs import</code> is similar to <code>git checkout</code>.<ul> <li>Note that it doesn't pull from the remote.</li> </ul> </li> <li><code>vcs pull</code> is similar to <code>git pull</code>.<ul> <li>Note that it doesn't switch branches.</li> </ul> </li> </ul> <p>For more information, refer to the official documentation.</p> </li> <li> <p>Install dependent ROS packages.</p> <pre><code>source /opt/ros/humble/setup.bash\nrosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO\n</code></pre> </li> <li> <p>Build the workspace.</p> <pre><code>colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> </li> </ol>"},{"location":"installation/related-tools/","title":"Installation of related tools","text":""},{"location":"installation/related-tools/#installation-of-related-tools","title":"Installation of related tools","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"support/","title":"Support","text":""},{"location":"support/#support","title":"Support","text":"<p>This page explains several support resources.</p> <ul> <li>Support guidelines pages explain the support mechanisms and guidelines.</li> <li>Troubleshooting pages explain solutions for common issues.</li> <li>Docs guide pages explain related documentation sites.</li> </ul>"},{"location":"support/docs-guide/","title":"Docs guide","text":""},{"location":"support/docs-guide/#docs-guide","title":"Docs guide","text":"<p>This page explains several documentation sites that are useful for Autoware and ROS development.</p> <ul> <li>The Autoware Foundation is the official site of the Autoware Foundation. You can learn about the Autoware community here.</li> <li>Autoware Documentation (this site) is the central documentation site for Autoware maintained by the Autoware community. General software-related information of Autoware is aggregated here.</li> <li>Autoware Universe Documentation has READMEs and design documents of software components.</li> <li>ROS Docs Guide explains the ROS 1 and ROS 2 documentation infrastructure.</li> </ul>"},{"location":"support/support-guidelines/","title":"Support guidelines","text":""},{"location":"support/support-guidelines/#support-guidelines","title":"Support guidelines","text":"<p>This page explains the support mechanisms we provide.</p> <p>Warning</p> <p>Before asking for help, search and read this documentation site carefully. Also, follow the discussion guidelines for discussions.</p> <p>Choose appropriate resources depending on what kind of help you need and read the detailed description in the sections below.</p> <ul> <li>Documentation sites<ul> <li>Various information</li> </ul> </li> <li>GitHub Discussions<ul> <li>Questions</li> <li>Unconfirmed bugs</li> <li>Feature requests</li> <li>Design discussions</li> </ul> </li> <li>GitHub Issues<ul> <li>Confirmed bugs</li> </ul> </li> <li>Discord<ul> <li>Instant messaging between contributors</li> </ul> </li> <li>ROS Discourse<ul> <li>General topics that should be widely announced</li> </ul> </li> </ul>"},{"location":"support/support-guidelines/#documentation-sites","title":"Documentation sites","text":"<p>Docs guide shows the list of useful documentation sites. Visit them and see if there is any information related to your problem.</p> <p>Note that the documentation sites aren't always up-to-date and perfect. If you find out that some information is wrong, unclear, or missing in Autoware docs, feel free to submit a pull request following the contribution guidelines.</p> <p>Warning</p> <p>Since this documentation site is still under construction, there are some empty pages.</p>"},{"location":"support/support-guidelines/#github-discussions","title":"GitHub Discussions","text":"<p>If you encounter a problem with Autoware, check existing issues and questions and search for similar issues first.</p> <ul> <li> <p>Issues</p> <p>Note that Autoware has multiple repositories listed in autoware.repos. It is recommended to search across the repositories.</p> </li> </ul> <ul> <li>Questions</li> </ul> <p>If no answer was found, create a new question thread here. If your question is not answered within a week, then @mention the maintainers to remind them.</p> <p>Also, there are other discussion types such as feature requests or design discussions. Feel free to open or join such discussions.</p> <p>If you don't know how to create a discussion, refer to GitHub Docs.</p>"},{"location":"support/support-guidelines/#github-issues","title":"GitHub Issues","text":"<p>If you have a problem and you have confirmed it is a bug, find the appropriate repository and create a new issue there. If you can't determine the appropriate repository, ask the maintainers for help by creating a new discussion in the Q&amp;A category.</p> <p>Warning</p> <p>Do not create issues for questions or unconfirmed bugs. If such issues are created, maintainers will transfer them to GitHub Discussions.</p> <p>If you want to fix the bug by yourself, discuss the approach with maintainers and submit a pull request.</p>"},{"location":"support/support-guidelines/#discord","title":"Discord","text":"<p>Autoware has a Discord server for casual communication between contributors.</p> <p>The Autoware Discord server is a good place for the following activities:</p> <ul> <li>Introduce yourself to the community.</li> <li>Chat with contributors.</li> <li>Take a quick straw poll.</li> </ul> <p>Note that it is not the right place to get help for your issues.</p>"},{"location":"support/support-guidelines/#ros-discourse","title":"ROS Discourse","text":"<p>If you want to widely discuss a topic with the general Autoware and ROS community or ask a question not related to Autoware's bugs, post to the Autoware category on ROS Discourse.</p> <p>Warning</p> <p>Do not post questions about bugs to ROS Discourse!</p>"},{"location":"support/troubleshooting/","title":"Troubleshooting","text":""},{"location":"support/troubleshooting/#troubleshooting","title":"Troubleshooting","text":""},{"location":"support/troubleshooting/#setup-issues","title":"Setup issues","text":""},{"location":"support/troubleshooting/#cuda-related-errors","title":"CUDA-related errors","text":"<p>When installing CUDA, errors may occur because of version conflicts. To resolve these types of errors, try one of the following methods:</p> <ul> <li> <p>Unhold all CUDA-related libraries and rerun the setup script.</p> <pre><code>sudo apt-mark unhold  \\\n\"cuda*\"             \\\n\"libcudnn*\"         \\\n\"libnvinfer*\"       \\\n\"libnvonnxparsers*\" \\\n\"libnvparsers*\"     \\\n\"tensorrt*\"         \\\n\"nvidia*\"\n\n./setup-dev-env.sh\n</code></pre> </li> </ul> <ul> <li> <p>Uninstall all CUDA-related libraries and rerun the setup script.</p> <pre><code>sudo apt purge        \\\n\"cuda*\"             \\\n\"libcudnn*\"         \\\n\"libnvinfer*\"       \\\n\"libnvonnxparsers*\" \\\n\"libnvparsers*\"     \\\n\"tensorrt*\"         \\\n\"nvidia*\"\n\nsudo apt autoremove\n\n./setup-dev-env.sh\n</code></pre> </li> </ul> <p>Warning</p> <p>Note that this may break your system and run carefully.</p> <ul> <li> <p>Run the setup script without installing CUDA-related libraries.</p> <pre><code>./setup-dev-env.sh --no-nvidia\n</code></pre> </li> </ul> <p>Warning</p> <p>Note that some components in Autoware Universe require CUDA, and only the CUDA version in the env file is supported at this time. Autoware may work with other CUDA versions, but those versions are not supported and functionality is not guaranteed.</p>"},{"location":"support/troubleshooting/#build-issues","title":"Build issues","text":""},{"location":"support/troubleshooting/#insufficient-memory","title":"Insufficient memory","text":"<p>Building Autoware requires a lot of memory, and your machine can freeze or crash if memory runs out during a build. To avoid this problem, 16-32GB of swap should be configured.</p> <pre><code># Optional: Check the current swapfile\nfree -h\n\n# Remove the current swapfile\nsudo swapoff /swapfile\nsudo rm /swapfile\n\n# Create a new swapfile\nsudo fallocate -l 32G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n\n# Optional: Check if the change is reflected\nfree -h\n</code></pre> <p>For more detailed configuration steps, along with an explanation of swap, refer to Digital Ocean's \"How To Add Swap Space on Ubuntu 20.04\" tutorial</p> <p>If there are too many CPU cores (more than 64) in your machine, it might requires larger memory. A workaround here is to limit the job number while building.</p> <pre><code>MAKEFLAGS=\"-j4\" colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> <p>You can adjust <code>-j4</code> to any number based on your system. For more details, see the manual page of GNU make.</p> <p>By reducing the number of packages built in parallel, you can also reduce the amount of memory used. In the following example, the number of packages built in parallel is set to 1, and the number of jobs used by <code>make</code> is limited to 1.</p> <pre><code>MAKEFLAGS=\"-j1\" colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release --parallel-workers 1\n</code></pre> <p>Note</p> <p>By lowering both the number of packages built in parallel and the number of jobs used by <code>make</code>, you can reduce the memory usage. However, this also means that the build process takes longer.</p>"},{"location":"support/troubleshooting/#errors-when-using-the-latest-version-of-autoware","title":"Errors when using the latest version of Autoware","text":"<p>If you are working with the latest version of Autoware, issues can occur due to out-of-date software or old build files.</p> <p>To resolve these types of problems, first try cleaning your build artifacts and rebuilding:</p> <pre><code>rm -rf build/ install/ log/\ncolcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> <p>If the error is not resolved, remove <code>src/</code> and update your workspace according to installation type (Docker / source).</p> <p>Warning</p> <p>Before removing <code>src/</code>, confirm that there are no modifications in your local environment that you want to keep!</p> <p>If errors still persist after trying the steps above, delete the entire workspace, clone the repository once again and restart the installation process.</p> <pre><code>rm -rf autoware/\ngit clone https://github.com/autowarefoundation/autoware.git\n</code></pre>"},{"location":"support/troubleshooting/#errors-when-using-a-fixed-version-of-autoware","title":"Errors when using a fixed version of Autoware","text":"<p>In principle, errors should not occur when using a fixed version. That said, possible causes include:</p> <ul> <li>ROS 2 has been updated with breaking changes.<ul> <li>For confirmation, check the Packaging and Release Management tag on ROS Discourse.</li> </ul> </li> <li>Your local environment is broken.<ul> <li>Confirm your <code>.bashrc</code> file, environment variables, and library versions.</li> </ul> </li> </ul> <p>In addition to the causes listed above, there are two common misunderstandings around the use of fixed versions.</p> <ol> <li> <p>You used a fixed version for <code>autowarefoundation/autoware</code> only.    All of the repository versions in the <code>.repos</code> file must be specified in order to use a completely fixed version.</p> </li> <li> <p>You didn't update the workspace after changing the branch of <code>autowarefoundation/autoware</code>.    Changing the branch of <code>autowarefoundation/autoware</code> does not affect the files under <code>src/</code>. You have to run the <code>vcs import</code> command to update them.</p> </li> </ol>"},{"location":"support/troubleshooting/#error-when-building-python-package","title":"Error when building python package","text":"<p>During building the following issue can occurs</p> <pre><code>pkg_resources.extern.packaging.version.InvalidVersion: Invalid version: '0.23ubuntu1'\n</code></pre> <p>The error is due to the fact that for versions between 66.0.0 and 67.5.0 <code>setuptools</code> enforces the python packages to be PEP-440 conformant. Since version 67.5.1 <code>setuptools</code> has a fallback that makes it possible to work with old packages again.</p> <p>The solution is to update <code>setuptools</code> to the newest version with the following command</p> <pre><code>pip install --upgrade setuptools\n</code></pre>"},{"location":"support/troubleshooting/#dockerrocker-issues","title":"Docker/rocker issues","text":"<p>If any errors occur when running Autoware with Docker or rocker, first confirm that your Docker installation is working correctly by running the following commands:</p> <pre><code>docker run --rm -it hello-world\ndocker run --rm -it ubuntu:latest\n</code></pre> <p>Next, confirm that you are able to access the base Autoware image that is stored on the GitHub Packages website</p> <pre><code>docker run --rm -it ghcr.io/autowarefoundation/autoware-universe:latest\n</code></pre>"},{"location":"support/troubleshooting/#runtime-issues","title":"Runtime issues","text":""},{"location":"support/troubleshooting/#performance-related-issues","title":"Performance related issues","text":"<p>Symptoms:</p> <ul> <li>Autoware is running slower than expected</li> <li>Messages show up late in RViz2</li> <li>Point clouds are lagging</li> <li>Camera images are lagging behind</li> <li>Point clouds or markers flicker on RViz2</li> <li>When multiple subscribers use the same publishers, the message rate drops</li> </ul> <p>If you have any of these symptoms, please the Performance Troubleshooting page.</p>"},{"location":"support/troubleshooting/#map-does-not-display-when-running-the-planning-simulator","title":"Map does not display when running the Planning Simulator","text":"<p>When running the Planning Simulator, the most common reason for the map not being displayed in RViz is because the map path has not been specified correctly in the launch command. You can confirm if this is the case by searching for <code>Could not find lanelet map under {path-to-map-dir}/lanelet2_map.osm</code> errors in the log.</p> <p>Another possible reason is that map loading is taking a long time due to poor DDS performance. For this, please visit the Performance Troubleshooting page.</p>"},{"location":"support/troubleshooting/performance-troubleshooting/","title":"Performance Troubleshooting","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#performance-troubleshooting","title":"Performance Troubleshooting","text":"<p>Overall symptoms:</p> <ul> <li>Autoware is running slower than expected</li> <li>Messages show up late in RViz2</li> <li>Point clouds are lagging</li> <li>Camera images are lagging behind</li> <li>Point clouds or markers flicker on RViz2</li> <li>When multiple subscribers use the same publishers, the message rate drops</li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#diagnostic-steps","title":"Diagnostic Steps","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#check-if-multicast-is-enabled","title":"Check if multicast is enabled","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#target-symptoms","title":"Target symptoms","text":"<ul> <li>When multiple subscribers use the same publishers, the message rate drops</li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#diagnosis","title":"Diagnosis","text":"<p>Make sure that the multicast is enabled for your interface.</p> <p>For example when you run following:</p> <pre><code>source /opt/ros/humble/setup.bash\nros2 run demo_nodes_cpp talker\n</code></pre> <p>If you get the error message <code>selected interface \"{your-interface-name}\" is not multicast-capable: disabling multicast</code>, this should be fixed.</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#solution","title":"Solution","text":"<p>Run the following command to allow multicast:</p> <pre><code>sudo ip link set multicast on {your-interface-name}\n</code></pre> <p>This way DDS will function as intended and multiple subscribers can receive data from a single publisher without any significant degradation in performance.</p> <p>This is a temporary solution. And will be reverted once the computer restarts.</p> <p>To make it permanent either,</p> <ul> <li>Create a service to run this on startup (recommended)</li> <li> <p>OR put following lines to the <code>~/.bashrc</code> file:</p> <pre><code>if [ ! -e /tmp/multicast_is_set ]; then\nsudo ip link set lo multicast on\ntouch /tmp/multicast_is_set\nfi\n</code></pre> <ul> <li>This will probably ask for password on the terminal every time you restart the computer.</li> </ul> </li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#check-the-compilation-flags","title":"Check the compilation flags","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#target-symptoms_1","title":"Target symptoms","text":"<ul> <li>Autoware is running slower than expected</li> <li>Point clouds are lagging</li> <li>When multiple subscribers use the same publishers, the message rate drops even further</li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#diagnosis_1","title":"Diagnosis","text":"<p>Check the <code>~/.bash_history</code> file to see if there are any <code>colcon build</code> directives without <code>-DCMAKE_BUILD_TYPE=Release</code> or <code>-DCMAKE_BUILD_TYPE=RelWithDebInfo</code> flags at all.</p> <p>Even if a build starts with these flags but same workspace gets compiled without these flags, it will still be a slow build in the end.</p> <p>In addition, the nodes will run slow in general, especially the <code>pointcloud_preprocessor</code> nodes.</p> <p>Example issue: issue2597</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#solution_1","title":"Solution","text":"<ul> <li>Remove the <code>build</code>, <code>install</code> and optionally <code>log</code> folders in the main <code>autoware</code> folder.</li> <li> <p>Compile the Autoware with either <code>Release</code> or <code>RelWithDebInfo</code> tags:</p> <pre><code>colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n# Or build with debug flags too (comparable performance but you can debug too)\ncolcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=RelWithDebInfo\n</code></pre> </li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#check-the-dds-settings","title":"Check the DDS settings","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#target-symptoms_2","title":"Target symptoms","text":"<ul> <li>Autoware is running slower than expected</li> <li>Messages show up late in RViz2</li> <li>Point clouds are lagging</li> <li>Camera images are lagging behind</li> <li>When multiple subscribers use the same publishers, the message rate drops</li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#check-the-rmw-ros-middleware-implementation","title":"Check the RMW (ROS Middleware) implementation","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#diagnosis_2","title":"Diagnosis","text":"<p>Run following to check the middleware used:</p> <pre><code>echo $RMW_IMPLEMENTATION\n</code></pre> <p>The return line should be <code>rmw_cyclonedds_cpp</code>. If not, apply the solution.</p> <p>If you are using a different DDS middleware, we might not have official support for it just yet.</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#solution_2","title":"Solution","text":"<p>Add <code>export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp</code> as a separate line in you <code>~/.bashrc</code> file.</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#check-if-the-cyclonedds-is-configured-correctly","title":"Check if the CycloneDDS is configured correctly","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#diagnosis_3","title":"Diagnosis","text":"<p>Run following to check the configuration <code>.xml</code> file of the <code>CycloneDDS</code>:</p> <pre><code>echo $CYCLONEDDS_URI\n</code></pre> <p>The return line should be a valid path pointing to an <code>.xml</code> file with <code>CycloneDDS</code> configuration.</p> <p>Also check if the file is configured correctly:</p> <pre><code>cat !{echo $CYCLONEDDS_URI}\n</code></pre> <p>This should print the <code>.xml</code> file on the terminal.</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#solution_3","title":"Solution","text":"<p>Follow DDS settings:Tuning DDS documentation and make sure:</p> <ul> <li>you have <code>export CYCLONEDDS_URI=/absolute_path_to_your/cyclonedds_config.xml</code> as a line on your <code>~/.bashrc</code> file.</li> <li>you have the <code>cyclonedds_config.xml</code> with the configuration provided in the documentation.</li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#check-the-linux-kernel-maximum-buffer-size","title":"Check the Linux kernel maximum buffer size","text":""},{"location":"support/troubleshooting/performance-troubleshooting/#diagnosis_4","title":"Diagnosis","text":"<ul> <li>Run: <code>sysctl net.core.rmem_max</code>, it should return at least <code>net.core.rmem_max = 2147483647</code>.<ul> <li>This parameter specifies the maximum size of the \"receive buffer\" for each network connection, which determines the maximum amount of data that can be held in memory at any given time. By increasing the maximum buffer size, the operating system can accommodate larger bursts of data, which can help prevent network congestion and reduce packet loss, resulting in faster and more reliable data transfers.</li> </ul> </li> <li>Run: <code>sysctl net.ipv4.ipfrag_time</code>, it should return around: <code>net.ipv4.ipfrag_time = 3</code><ul> <li>The \"net.ipv4.ipfrag_time\" parameter specifies the maximum time in seconds that the kernel should retain partially fragmented IP packets before discarding them. The default value for this parameter is usually set to 30 seconds, but it may vary depending on the specific operating system and configuration.</li> <li>By setting this parameter to a lower value, such as 3 seconds, the kernel can free up memory resources more quickly by discarding partially fragmented packets that are no longer needed, which can help improve the overall performance and stability of the system.</li> </ul> </li> <li>Run: <code>sysctl net.ipv4.ipfrag_high_thresh</code>, it should return at around: <code>net.ipv4.ipfrag_high_thresh = 134217728</code><ul> <li>The \"net.ipv4.ipfrag_high_thresh\" parameter specifies the high watermark threshold for the number of partially fragmented packets allowed in the kernel IP packet reassembly queue. When the number of partially fragmented packets in the queue exceeds this threshold, the kernel will start to drop newly arrived packets until the number of partially fragmented packets drops below the threshold.</li> <li>By setting this parameter to a higher value, such as 134217728 (128 MB), the kernel can accommodate a larger number of partially fragmented packets in the queue, which can help improve the performance of network applications that transfer large amounts of data, such as file transfer protocols and multimedia streaming applications.</li> </ul> </li> </ul> <p>More info on these values: Cross-vendor tuning</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#solution_4","title":"Solution","text":"<p>Either:</p> <ul> <li> <p>Create the following file: <code>sudo touch /etc/sysctl.d/10-cyclone-max.conf</code> (recommended)</p> <ul> <li> <p>Edit the file to contain (<code>sudo gedit /etc/sysctl.d/10-cyclone-max.conf</code>):</p> <pre><code>net.core.rmem_max=2147483647\nnet.ipv4.ipfrag_time=3\nnet.ipv4.ipfrag_high_thresh=134217728 # (128 MB)\n</code></pre> <ul> <li> <p>Either restart the computer or run following to enable the changes:</p> <pre><code>sudo sysctl -w net.core.rmem_max=2147483647\nsudo sysctl -w net.ipv4.ipfrag_time=3\nsudo sysctl -w net.ipv4.ipfrag_high_thresh=134217728\n</code></pre> </li> </ul> </li> </ul> </li> </ul> <ul> <li> <p>OR put following lines to the <code>~/.bashrc</code> file:</p> <pre><code>if [ ! -e /tmp/kernel_network_conf_is_set ]; then\nsudo sysctl -w net.core.rmem_max=2147483647\nsudo sysctl -w net.ipv4.ipfrag_time=3\nsudo sysctl -w net.ipv4.ipfrag_high_thresh=134217728 # (128 MB)\nfi\n</code></pre> <ul> <li>This will probably ask for password on the terminal every time you restart the computer.</li> </ul> </li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#check-if-ros-localhost-only-communication-is-enabled","title":"Check if ROS localhost only communication is enabled","text":"<ul> <li>If you are using multi computer setup, please skip this check.</li> <li>Enabling ROS localhost only communication can help improve the performance of ROS by reducing network traffic and avoiding potential conflicts with other devices on the network.</li> <li>Also check Enable localhost-only communication</li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#target-symptoms_3","title":"Target symptoms","text":"<ul> <li>You see topics that shouldn't exist</li> <li>You see point clouds that don't belong to your machine<ul> <li>They might be from another computer running ROS 2 on your network</li> </ul> </li> <li>Point clouds or markers flicker on RViz2<ul> <li>Another publisher (on another machine) may be publishing on the same topic as your node does.</li> <li>Causing the flickering.</li> </ul> </li> </ul>"},{"location":"support/troubleshooting/performance-troubleshooting/#diagnosis_5","title":"Diagnosis","text":"<p>Run following to check it:</p> <pre><code>echo $ROS_LOCALHOST_ONLY\n</code></pre> <p>The return line should be <code>1</code>. If not, apply the solution.</p>"},{"location":"support/troubleshooting/performance-troubleshooting/#solution_5","title":"Solution","text":"<ul> <li>Add <code>export $ROS_LOCALHOST_ONLY=1</code> as a separate line in you <code>~/.bashrc</code> file.<ul> <li>This environment variable tells ROS to only use the <code>loopback</code> network interface (i.e., localhost) for communication, rather than using the network interface card (NIC) for Ethernet or Wi-Fi. This can reduce network traffic and potential conflicts with other devices on the network, resulting in better performance and stability.</li> </ul> </li> </ul>"},{"location":"tutorials/","title":"Simulation tutorials","text":""},{"location":"tutorials/#simulation-tutorials","title":"Simulation tutorials","text":"<p>Simulations provide a way of verifying Autoware's functionality before field testing with an actual vehicle. There are three main types of simulation that can be run ad hoc or via a scenario runner.</p>"},{"location":"tutorials/#simulation-methods","title":"Simulation methods","text":""},{"location":"tutorials/#ad-hoc-simulation","title":"Ad hoc simulation","text":"<p>Ad hoc simulation is a flexible method for running basic simulations on your local machine, and is the recommended method for anyone new to Autoware.</p>"},{"location":"tutorials/#scenario-simulation","title":"Scenario simulation","text":"<p>Scenario simulation uses a scenario runner to run more complex simulations based on predefined scenarios. It is often run automatically for continuous integration purposes, but can also be run on a local machine.</p>"},{"location":"tutorials/#simulation-types","title":"Simulation types","text":""},{"location":"tutorials/#planning-simulation","title":"Planning simulation","text":"<p>Planning simulation uses simple dummy data to test the Planning and Control components - specifically path generation, path following and obstacle avoidance. It verifies that a vehicle can reach a goal destination while avoiding pedestrians and surrounding cars, and is another method for verifying the validity of Lanelet2 maps. It also allows for testing of traffic light handling.</p>"},{"location":"tutorials/#how-does-planning-simulation-work","title":"How does planning simulation work?","text":"<ol> <li>Generate a path to the goal destination</li> <li>Control the car along the generated path</li> <li>Detect and avoid any humans or other vehicles on the way to the goal destination</li> </ol>"},{"location":"tutorials/#rosbag-replay-simulation","title":"Rosbag replay simulation","text":"<p>Rosbag replay simulation uses prerecorded rosbag data to test the following aspects of the Localization and Perception components:</p> <ul> <li>Localization: Estimation of the vehicle's location on the map by matching sensor and vehicle feedback data to the map.</li> <li>Perception: Using sensor data to detect, track and predict dynamic objects such as surrounding cars, pedestrians, and other objects</li> </ul> <p>By repeatedly playing back the data, this simulation type can also be used for endurance testing.</p>"},{"location":"tutorials/#digital-twin-simulation","title":"Digital twin simulation","text":"<p>Digital twin simulation is a simulation type that is able to produce realistic data and simulate almost the entire system. It is also commonly referred to as end-to-end simulation.</p>"},{"location":"tutorials/ad-hoc-simulation/","title":"Ad hoc simulation","text":""},{"location":"tutorials/ad-hoc-simulation/#ad-hoc-simulation","title":"Ad hoc simulation","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/","title":"Planning simulation","text":""},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#planning-simulation","title":"Planning simulation","text":""},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#preparation","title":"Preparation","text":"<p>Download and unpack a sample map.</p> <ul> <li>You can also download the map manually.</li> </ul> <pre><code>gdown -O ~/autoware_map/ 'https://docs.google.com/uc?export=download&amp;id=1499_nsbUbIeturZaDj7jhUownh5fvXHd'\nunzip -d ~/autoware_map ~/autoware_map/sample-map-planning.zip\n</code></pre> <p>Note</p> <p>Sample map: Copyright 2020 TIER IV, Inc.</p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#basic-simulations","title":"Basic simulations","text":""},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#lane-driving-scenario","title":"Lane driving scenario","text":""},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#1-launch-autoware","title":"1. Launch Autoware","text":"<pre><code>source ~/autoware/install/setup.bash\nros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-planning vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit\n</code></pre> <p>Warning</p> <p>Note that you cannot use <code>~</code> instead of <code>$HOME</code> here.</p> <p>If <code>~</code> is used, the map will fail to load.</p> <p></p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#2-set-an-initial-pose-for-the-ego-vehicle","title":"2. Set an initial pose for the ego vehicle","text":"<p>a) Click the <code>2D Pose estimate</code> button in the toolbar, or hit the <code>P</code> key.</p> <p>b) In the 3D View pane, click and hold the left-mouse button, and then drag to set the direction for the initial pose. An image representing the vehicle should now be displayed.</p> <p>Warning</p> <p>Remember to set the initial pose of the car in the same direction as the lane.</p> <p>To confirm the direction of the lane, check the arrowheads displayed on the map.</p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#3-set-a-goal-pose-for-the-ego-vehicle","title":"3. Set a goal pose for the ego vehicle","text":"<p>a) Click the <code>2D Goal Pose</code> button in the toolbar, or hit the <code>G</code> key.</p> <p>b) In the 3D View pane, click and hold the left-mouse button, and then drag to set the direction for the goal pose. If done correctly, you will see a planned path from initial pose to goal pose.</p> <p></p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#4-start-the-ego-vehicle","title":"4. Start the ego vehicle","text":"<p>Now you can start the ego vehicle driving by clicking the <code>AUTO</code> button on <code>OperationMode</code> in <code>AutowareStatePanel</code>. Alteratively, you can manually start the vehicle by running the following command:</p> <pre><code>source ~/autoware/install/setup.bash\nros2 service call /api/operation_mode/change_to_autonomous autoware_adapi_v1_msgs/srv/ChangeOperationMode {}\n</code></pre> <p>After that, you can see <code>AUTONOMOUS</code> sign on <code>OperationMode</code> and <code>AUTO</code> button is grayed out.</p> <p></p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#parking-scenario","title":"Parking scenario","text":"<ol> <li> <p>Set an initial pose and a goal pose, and engage the ego vehicle.</p> <p></p> </li> <li> <p>When the vehicle approaches the goal, it will switch from lane driving mode to parking mode.</p> </li> <li> <p>After that, the vehicle will reverse into the destination parking spot.</p> <p></p> </li> </ol>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#lane-change-scenario","title":"Lane change scenario","text":"<ol> <li> <p>Download and unpack Nishishinjuku map.</p> <pre><code>gdown -O ~/autoware_map/ 'https://github.com/tier4/AWSIM/releases/download/v1.1.0/nishishinjuku_autoware_map.zip'\nunzip -d ~/autoware_map ~/autoware_map/nishishinjuku_autoware_map.zip\n</code></pre> </li> <li> <p>Launch autoware with Nishishinjuku map with following command:</p> <pre><code>source ~/autoware/install/setup.bash\nros2 launch autoware_launch planning_simulator.launch.xml map_path:=$HOME/autoware_map/nishishinjuku_autoware_map vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit\n</code></pre> <p></p> </li> <li> <p>Set an initial pose and a goal pose in adjacent lanes.</p> <p></p> </li> <li> <p>Engage the ego vehicle. It will make a lane change along the planned path.</p> <p></p> </li> </ol>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#avoidance-scenario","title":"Avoidance scenario","text":"<ol> <li> <p>Set an initial pose and a goal pose in the same lane. A path will be planned.</p> <p></p> </li> <li> <p>Set a \"2D Dummy Bus\" on the roadside. A new path will be planned.</p> <p></p> </li> <li> <p>Engage the ego vehicle. It will avoid the obstacle along the newly planned path.</p> </li> </ol>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#advanced-simulations","title":"Advanced Simulations","text":""},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#placing-dummy-objects","title":"Placing dummy objects","text":"<ol> <li>Click the <code>2D Dummy Car</code> or <code>2D Dummy Pedestrian</code> button in the toolbar.</li> <li>Set the pose of the dummy object by clicking and dragging on the map.</li> <li> <p>Set the velocity of the object in <code>Tool Properties -&gt; 2D Dummy Car/Pedestrian</code> panel.</p> <p>!!! note</p> <p>Changes to the <code>velocity</code> parameter will only affect objects placed after the parameter is changed.</p> <p></p> </li> <li> <p>Delete any dummy objects placed in the view by clicking the <code>Delete All Objects</code> button in the toolbar.</p> </li> <li> <p>Click the <code>Interactive</code> button in the toolbar to make the dummy object interactive.</p> <p></p> </li> <li> <p>For adding an interactive dummy object, press <code>SHIFT</code> and click the <code>right click</code>.</p> </li> <li>For deleting an interactive dummy object, press <code>ALT</code> and click the <code>right click</code>.</li> <li> <p>For moving an interactive dummy object, hold the <code>right click</code> drag and drop the object.</p> <p></p> </li> </ol>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#traffic-light-recognition-simulation","title":"Traffic light recognition simulation","text":"<p>By default, traffic lights on the map are all treated as if they are set to green. As a result, when a path is created that passed through an intersection with a traffic light, the ego vehicle will drive through the intersection without stopping.</p> <p>The following steps explain how to set and reset traffic lights in order to test how the Planning component will respond.</p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#set-traffic-light","title":"Set traffic light","text":"<ol> <li> <p>Go to <code>Panels -&gt; Add new panel</code>, select <code>TrafficLightPublishPanel</code>, and then press <code>OK</code>.</p> </li> <li> <p>In <code>TrafficLightPublishPanel</code>, set the <code>ID</code> and color of the traffic light.</p> </li> <li> <p>Click the <code>SET</code> button.    </p> </li> <li> <p>Finally, click the <code>PUBLISH</code> button to send the traffic light status to the simulator. Any planned path that goes past the selected traffic light will then change accordingly.</p> </li> </ol> <p></p> <p>By default, Rviz should display the ID of each traffic light on the map. You can have a closer look at the IDs by zooming in the region or by changing the View type.</p> <p>In case the IDs are not displayed, try the following troubleshooting steps:</p> <p>a) In the <code>Displays</code> panel, find the <code>traffic_light_id</code> topic by toggling the triangle icons next to <code>Map &gt; Lanelet2VectorMap &gt; Namespaces</code>.</p> <p>b) Check the <code>traffic_light_id</code> checkbox.</p> <p>c) Reload the topic by clicking the <code>Map</code> checkbox twice.</p> <p></p>"},{"location":"tutorials/ad-hoc-simulation/planning-simulation/#updatereset-traffic-light","title":"Update/Reset traffic light","text":"<p>You can update the color of the traffic light by selecting the next color (in the image it is <code>GREEN</code>) and clicking <code>SET</code> button. In the image the traffic light in front of the ego vehicle changed from <code>RED</code> to <code>GREEN</code> and the vehicle restarted.</p> <p></p> <p>To remove a traffic light from <code>TrafficLightPublishPanel</code>, click the <code>RESET</code> button.</p> <p>Reference video tutorials</p>"},{"location":"tutorials/ad-hoc-simulation/rosbag-replay-simulation/","title":"Rosbag replay simulation","text":""},{"location":"tutorials/ad-hoc-simulation/rosbag-replay-simulation/#rosbag-replay-simulation","title":"Rosbag replay simulation","text":""},{"location":"tutorials/ad-hoc-simulation/rosbag-replay-simulation/#steps","title":"Steps","text":"<ol> <li> <p>Download and unpack a sample map.</p> <ul> <li>You can also download the map manually.</li> </ul> <pre><code>gdown -O ~/autoware_map/ 'https://docs.google.com/uc?export=download&amp;id=1A-8BvYRX3DhSzkAnOcGWFw5T30xTlwZI'\nunzip -d ~/autoware_map/ ~/autoware_map/sample-map-rosbag.zip\n</code></pre> </li> <li> <p>Download the sample rosbag files.</p> <ul> <li>You can also download the rosbag files manually.</li> </ul> <pre><code>gdown -O ~/autoware_map/ 'https://docs.google.com/uc?export=download&amp;id=1VnwJx9tI3kI_cTLzP61ktuAJ1ChgygpG'\nunzip -d ~/autoware_map/ ~/autoware_map/sample-rosbag.zip\n</code></pre> </li> </ol>"},{"location":"tutorials/ad-hoc-simulation/rosbag-replay-simulation/#note","title":"Note","text":"<ul> <li>Sample map and rosbag: Copyright 2020 TIER IV, Inc.</li> <li>Due to privacy concerns, the rosbag does not contain image data, which will cause:<ul> <li>Traffic light recognition functionality cannot be tested with this sample rosbag.</li> <li>Object detection accuracy is decreased.</li> </ul> </li> </ul>"},{"location":"tutorials/ad-hoc-simulation/rosbag-replay-simulation/#how-to-run-a-rosbag-replay-simulation","title":"How to run a rosbag replay simulation","text":"<ol> <li> <p>Launch Autoware.</p> <pre><code>source ~/autoware/install/setup.bash\nros2 launch autoware_launch logging_simulator.launch.xml map_path:=$HOME/autoware_map/sample-map-rosbag vehicle_model:=sample_vehicle sensor_model:=sample_sensor_kit\n</code></pre> <p>Note that you cannot use <code>~</code> instead of <code>$HOME</code> here.</p> <p></p> </li> <li> <p>Play the sample rosbag file.</p> <pre><code>source ~/autoware/install/setup.bash\nros2 bag play ~/autoware_map/sample-rosbag/sample.db3 -r 0.2 -s sqlite3\n</code></pre> <p></p> </li> <li> <p>To focus the view on the ego vehicle, change the <code>Target Frame</code> in the RViz Views panel from <code>viewer</code> to <code>base_link</code>.</p> <p></p> </li> <li> <p>To switch the view to <code>Third Person Follower</code> etc, change the <code>Type</code> in the RViz Views panel.</p> <p></p> </li> </ol> <p>Reference video tutorials</p>"},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/","title":"MORAI Sim: Drive","text":""},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/#morai-sim-drive","title":"MORAI Sim: Drive","text":"<p>Note</p> <p>Any kind of for-profit activity with the trial version of the MORAI SIM:Drive is strictly prohibited.</p>"},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/#hardware-requirements","title":"Hardware requirements","text":"Minimum PC Specs OS Windows 10, Ubuntu 20.04, Ubuntu 18.04, Ubuntu 16.04 CPU Intel i5-9600KF or AMD Ryzen 5 3500X RAM DDR4 16GB GPU RTX2060 Super Required PC Specs OS Windows 10, Ubuntu 20.04, Ubuntu 18.04, Ubuntu 16.04 CPU Intel i9-9900K or AMD Ryzen 7 3700X (or higher) RAM DDR4 64GB (or higher) GPU RTX2080Ti or higher"},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/#application-and-download","title":"Application and Download","text":"<p>Only for AWF developers, trial license for 3 months can be issued. Download the application form and send to Hyeongseok Jeon</p> <p>After the trial license is issued, you can login to MORAI Sim:Drive via Launchers (Windows/Ubuntu)</p> <p>CAUTION: Do not use the Launchers in the following manual</p>"},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/#technical-documents","title":"Technical Documents","text":"<p>as Oct. 2022, our simulation version is ver.22.R3 but the english manual is under construction.</p> <p>Be aware that the following manuals are for ver.22.R2</p> <ul> <li>MORAI Sim:Drive Manual</li> <li>ITRI BUS Odd tutorial</li> <li>Tutorial for rosbag replay with Tacoma Airport</li> </ul>"},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/MORAI_Sim-tutorial/#technical-support","title":"Technical Support","text":"<p>Hyeongseok Jeon will give full technical support</p> <ul> <li>hsjeon@morai.ai</li> <li>Hyeongseok Jeon#2355 in Discord</li> </ul>"},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/awsim-tutorial/","title":"AWSIM simulator","text":""},{"location":"tutorials/ad-hoc-simulation/digital-twin-simulation/awsim-tutorial/#awsim-simulator","title":"AWSIM simulator","text":"<p>AWSIM is a simulator for Autoware development and testing. To get started, please follow the official instruction provided by TIER IV.</p>"},{"location":"tutorials/scenario-simulation/","title":"Scenario simulation","text":""},{"location":"tutorials/scenario-simulation/#scenario-simulation","title":"Scenario simulation","text":"<p>Warning</p> <p>Under Construction</p>"},{"location":"tutorials/scenario-simulation/planning-simulation/installation/","title":"Installation","text":""},{"location":"tutorials/scenario-simulation/planning-simulation/installation/#installation","title":"Installation","text":"<p>This document contains step-by-step instruction on how to build AWF Autoware Core/Universe with <code>scenario_simulator_v2</code>.</p>"},{"location":"tutorials/scenario-simulation/planning-simulation/installation/#prerequisites","title":"Prerequisites","text":"<ol> <li>Autoware has been built and installed</li> </ol>"},{"location":"tutorials/scenario-simulation/planning-simulation/installation/#how-to-build","title":"How to build","text":"<ol> <li> <p>Navigate to the Autoware workspace:</p> <pre><code>cd autoware\n</code></pre> </li> <li> <p>Import Simulator dependencies:</p> <pre><code>vcs import src &lt; simulator.repos\n</code></pre> </li> <li> <p>Install dependent ROS packages:</p> <pre><code>source /opt/ros/humble/setup.bash\nrosdep install -y --from-paths src --ignore-src --rosdistro $ROS_DISTRO\n</code></pre> </li> <li> <p>Build the workspace:</p> <pre><code>colcon build --symlink-install --cmake-args -DCMAKE_BUILD_TYPE=Release\n</code></pre> </li> </ol>"},{"location":"tutorials/scenario-simulation/planning-simulation/random-test-simulation/","title":"Random test simulation","text":""},{"location":"tutorials/scenario-simulation/planning-simulation/random-test-simulation/#random-test-simulation","title":"Random test simulation","text":"<p>Note</p> <p>Running the Scenario Simulator requires some additional steps on top of building and installing Autoware, so make sure that Scenario Simulator installation has been completed first before proceeding.</p>"},{"location":"tutorials/scenario-simulation/planning-simulation/random-test-simulation/#running-steps","title":"Running steps","text":"<ol> <li> <p>Move to the workspace directory where Autoware and the Scenario Simulator have been built.</p> </li> <li> <p>Source the workspace setup script:</p> <pre><code>source install/setup.bash\n</code></pre> </li> <li> <p>Run the simulation:</p> <pre><code>ros2 launch random_test_runner random_test.launch.py \\\narchitecture_type:=awf/universe \\\nsensor_model:=sample_sensor_kit \\\nvehicle_model:=sample_vehicle\n</code></pre> </li> </ol> <p></p> <p>For more information about supported parameters, refer to the random_test_runner documentation.</p>"},{"location":"tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/","title":"Scenario test simulation","text":""},{"location":"tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/#scenario-test-simulation","title":"Scenario test simulation","text":"<p>Note</p> <p>Running the Scenario Simulator requires some additional steps on top of building and installing Autoware, so make sure that Scenario Simulator installation has been completed first before proceeding.</p>"},{"location":"tutorials/scenario-simulation/planning-simulation/scenario-test-simulation/#running-steps","title":"Running steps","text":"<ol> <li> <p>Move to the workspace directory where Autoware and the Scenario Simulator have been built.</p> </li> <li> <p>Source the workspace setup script:</p> <pre><code>source install/setup.bash\n</code></pre> </li> <li> <p>Run the simulation:</p> <pre><code>ros2 launch scenario_test_runner scenario_test_runner.launch.py \\\narchitecture_type:=awf/universe \\\nrecord:=false \\\nscenario:='$(find-pkg-share scenario_test_runner)/scenario/sample.yaml' \\\nsensor_model:=sample_sensor_kit \\\nvehicle_model:=sample_vehicle\n</code></pre> </li> </ol> <p></p> <p>Reference video tutorials</p>"},{"location":"tutorials/scenario-simulation/rosbag-replay-simulation/driving-log-replayer/","title":"Driving Log Replayer","text":""},{"location":"tutorials/scenario-simulation/rosbag-replay-simulation/driving-log-replayer/#driving-log-replayer","title":"Driving Log Replayer","text":"<p>Driving Log Replayer is an evaluation tool for Autoware. To get started, follow the official instruction provided by TIER IV.</p>"}]}